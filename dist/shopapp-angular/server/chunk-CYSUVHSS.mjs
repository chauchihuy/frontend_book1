import './polyfills.server.mjs';
import{$ as rr,$a as Ee,A as X,Aa as Xe,B as ct,Ba as Nn,C as B,Ca as Mt,D as A,Da as dt,E as O,Ea as _t,F as ee,Fa as di,G as ge,Ga as fn,H as Wt,Ha as _n,I as C,Ia as vn,J as E,Ja as ui,K as At,L as Zi,M as Xi,N as hn,Na as no,O as ve,P as yt,Q as Tn,Qa as io,R as u,Ra as hi,S as m,Sa as cr,T as An,Ta as oo,U as Ze,Ua as K,V as pn,W as Le,Wa as vt,X as mn,Xa as de,Y as g,Ya as ie,Z as J,Za as ue,_ as In,_a as dr,a as Qo,aa as w,ab as F,b as mt,ba as ne,bb as It,c as Yo,ca as Fn,cb as qt,d as Ko,da as gt,db as Fe,e as ri,ea as ft,eb as ur,f as ln,fa as a,fb as hr,g as Tt,ga as s,gb as pr,h as Zo,ha as f,hb as mr,i as Xo,ia as Ct,ib as gr,j as Ye,ja as Et,jb as fr,k as er,ka as P,l as zt,la as sr,m as Ki,ma as ar,mb as _r,n as si,na as p,o as cn,oa as v,p as tr,pa as eo,q as dn,qa as to,qb as G,r as nr,ra as ci,rb as pi,s as ir,sa as Ae,t as or,ta as c,tb as I,u as Te,ua as y,ub as Ft,v as un,va as S,vb as mi,w as ai,wa as lr,wb as vr,x as Ke,xa as Ie,xb as et,y as li,ya as k,z as R,za as gn}from"./chunk-XQRCNI3P.mjs";import{a as $,b as me}from"./chunk-KRLCULJA.mjs";var br=(()=>{let e=class e{};e.\u0275fac=function(n){return new(n||e)},e.\u0275cmp=O({type:e,selectors:[["app-root"]],standalone:!0,features:[k],decls:1,vars:0,template:function(n,o){n&1&&f(0,"router-outlet")},dependencies:[et,pi]});let i=e;return i})();var Pr=(()=>{let e=class e{constructor(t,n){this._renderer=t,this._elementRef=n,this.onChange=o=>{},this.onTouched=()=>{}}setProperty(t,n){this._renderer.setProperty(this._elementRef.nativeElement,t,n)}registerOnTouched(t){this.onTouched=t}registerOnChange(t){this.onChange=t}setDisabledState(t){this.setProperty("disabled",t)}};e.\u0275fac=function(n){return new(n||e)(m(Tn),m(yt))},e.\u0275dir=ge({type:e});let i=e;return i})(),Ln=(()=>{let e=class e extends Pr{};e.\u0275fac=(()=>{let t;return function(o){return(t||(t=At(e)))(o||e)}})(),e.\u0275dir=ge({type:e,features:[Le]});let i=e;return i})(),Qt=new ct("NgValueAccessor"),wa={provide:Qt,useExisting:Ke(()=>Un),multi:!0},Un=(()=>{let e=class e extends Ln{writeValue(t){this.setProperty("checked",t)}};e.\u0275fac=(()=>{let t;return function(o){return(t||(t=At(e)))(o||e)}})(),e.\u0275dir=ge({type:e,selectors:[["input","type","checkbox","formControlName",""],["input","type","checkbox","formControl",""],["input","type","checkbox","ngModel",""]],hostBindings:function(n,o){n&1&&p("change",function(d){return o.onChange(d.target.checked)})("blur",function(){return o.onTouched()})},features:[Ie([wa]),Le]});let i=e;return i})(),xa={provide:Qt,useExisting:Ke(()=>z),multi:!0};function Oa(){let i=oo()?oo().getUserAgent():"";return/android (\d+)/.test(i.toLowerCase())}var ka=new ct("CompositionEventMode"),z=(()=>{let e=class e extends Pr{constructor(t,n,o){super(t,n),this._compositionMode=o,this._composing=!1,this._compositionMode==null&&(this._compositionMode=!Oa())}writeValue(t){let n=t??"";this.setProperty("value",n)}_handleInput(t){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(t)}_compositionStart(){this._composing=!0}_compositionEnd(t){this._composing=!1,this._compositionMode&&this.onChange(t)}};e.\u0275fac=function(n){return new(n||e)(m(Tn),m(yt),m(ka,8))},e.\u0275dir=ge({type:e,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(n,o){n&1&&p("input",function(d){return o._handleInput(d.target.value)})("blur",function(){return o.onTouched()})("compositionstart",function(){return o._compositionStart()})("compositionend",function(d){return o._compositionEnd(d.target.value)})},features:[Ie([xa]),Le]});let i=e;return i})();function Nt(i){return i==null||(typeof i=="string"||Array.isArray(i))&&i.length===0}function Dr(i){return i!=null&&typeof i.length=="number"}var jn=new ct("NgValidators"),Mi=new ct("NgAsyncValidators"),Sa=/^(?=.{1,254}$)(?=.{1,64}@)[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+)*@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/,Je=class{static min(e){return Pa(e)}static max(e){return Da(e)}static required(e){return Tr(e)}static requiredTrue(e){return Ta(e)}static email(e){return Aa(e)}static minLength(e){return Ia(e)}static maxLength(e){return Fa(e)}static pattern(e){return Na(e)}static nullValidator(e){return fi(e)}static compose(e){return Vr(e)}static composeAsync(e){return Br(e)}};function Pa(i){return e=>{if(Nt(e.value)||Nt(i))return null;let r=parseFloat(e.value);return!isNaN(r)&&r<i?{min:{min:i,actual:e.value}}:null}}function Da(i){return e=>{if(Nt(e.value)||Nt(i))return null;let r=parseFloat(e.value);return!isNaN(r)&&r>i?{max:{max:i,actual:e.value}}:null}}function Tr(i){return Nt(i.value)?{required:!0}:null}function Ta(i){return i.value===!0?null:{required:!0}}function Aa(i){return Nt(i.value)||Sa.test(i.value)?null:{email:!0}}function Ia(i){return e=>Nt(e.value)||!Dr(e.value)?null:e.value.length<i?{minlength:{requiredLength:i,actualLength:e.value.length}}:null}function Fa(i){return e=>Dr(e.value)&&e.value.length>i?{maxlength:{requiredLength:i,actualLength:e.value.length}}:null}function Na(i){if(!i)return fi;let e,r;return typeof i=="string"?(r="",i.charAt(0)!=="^"&&(r+="^"),r+=i,i.charAt(i.length-1)!=="$"&&(r+="$"),e=new RegExp(r)):(r=i.toString(),e=i),t=>{if(Nt(t.value))return null;let n=t.value;return e.test(n)?null:{pattern:{requiredPattern:r,actualValue:n}}}}function fi(i){return null}function Ar(i){return i!=null}function Ir(i){return ar(i)?Ko(i):i}function Fr(i){let e={};return i.forEach(r=>{e=r!=null?$($({},e),r):e}),Object.keys(e).length===0?null:e}function Nr(i,e){return e.map(r=>r(i))}function Ra(i){return!i.validate}function Rr(i){return i.map(e=>Ra(e)?e:r=>e.validate(r))}function Vr(i){if(!i)return null;let e=i.filter(Ar);return e.length==0?null:function(r){return Fr(Nr(r,e))}}function lo(i){return i!=null?Vr(Rr(i)):null}function Br(i){if(!i)return null;let e=i.filter(Ar);return e.length==0?null:function(r){let t=Nr(r,e).map(Ir);return Xo(t).pipe(Tt(Fr))}}function co(i){return i!=null?Br(Rr(i)):null}function yr(i,e){return i===null?[e]:Array.isArray(i)?[...i,e]:[i,e]}function Hr(i){return i._rawValidators}function Lr(i){return i._rawAsyncValidators}function ro(i){return i?Array.isArray(i)?i:[i]:[]}function _i(i,e){return Array.isArray(i)?i.includes(e):i===e}function Cr(i,e){let r=ro(e);return ro(i).forEach(n=>{_i(r,n)||r.push(n)}),r}function Er(i,e){return ro(e).filter(r=>!_i(i,r))}var vi=class{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(e){this._rawValidators=e||[],this._composedValidatorFn=lo(this._rawValidators)}_setAsyncValidators(e){this._rawAsyncValidators=e||[],this._composedAsyncValidatorFn=co(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(e){this._onDestroyCallbacks.push(e)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(e=>e()),this._onDestroyCallbacks=[]}reset(e=void 0){this.control&&this.control.reset(e)}hasError(e,r){return this.control?this.control.hasError(e,r):!1}getError(e,r){return this.control?this.control.getError(e,r):null}},wt=class extends vi{get formDirective(){return null}get path(){return null}},Jt=class extends vi{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}},bi=class{constructor(e){this._cd=e}get isTouched(){return!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return!!this._cd?.submitted}},Va={"[class.ng-untouched]":"isUntouched","[class.ng-touched]":"isTouched","[class.ng-pristine]":"isPristine","[class.ng-dirty]":"isDirty","[class.ng-valid]":"isValid","[class.ng-invalid]":"isInvalid","[class.ng-pending]":"isPending"},Nu=me($({},Va),{"[class.ng-submitted]":"isSubmitted"}),W=(()=>{let e=class e extends bi{constructor(t){super(t)}};e.\u0275fac=function(n){return new(n||e)(m(Jt,2))},e.\u0275dir=ge({type:e,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(n,o){n&2&&J("ng-untouched",o.isUntouched)("ng-touched",o.isTouched)("ng-pristine",o.isPristine)("ng-dirty",o.isDirty)("ng-valid",o.isValid)("ng-invalid",o.isInvalid)("ng-pending",o.isPending)},features:[Le]});let i=e;return i})(),Ne=(()=>{let e=class e extends bi{constructor(t){super(t)}};e.\u0275fac=function(n){return new(n||e)(m(wt,10))},e.\u0275dir=ge({type:e,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(n,o){n&2&&J("ng-untouched",o.isUntouched)("ng-touched",o.isTouched)("ng-pristine",o.isPristine)("ng-dirty",o.isDirty)("ng-valid",o.isValid)("ng-invalid",o.isInvalid)("ng-pending",o.isPending)("ng-submitted",o.isSubmitted)},features:[Le]});let i=e;return i})();var Rn="VALID",gi="INVALID",bn="PENDING",Vn="DISABLED";function uo(i){return(wi(i)?i.validators:i)||null}function Ba(i){return Array.isArray(i)?lo(i):i||null}function ho(i,e){return(wi(e)?e.asyncValidators:i)||null}function Ha(i){return Array.isArray(i)?co(i):i||null}function wi(i){return i!=null&&!Array.isArray(i)&&typeof i=="object"}function Ur(i,e,r){let t=i.controls;if(!(e?Object.keys(t):t).length)throw new li(1e3,"");if(!t[r])throw new li(1001,"")}function jr(i,e,r){i._forEachChild((t,n)=>{if(r[n]===void 0)throw new li(1002,"")})}var yn=class{constructor(e,r){this._pendingDirty=!1,this._hasOwnPendingAsyncValidator=!1,this._pendingTouched=!1,this._onCollectionChange=()=>{},this._parent=null,this.pristine=!0,this.touched=!1,this._onDisabledChange=[],this._assignValidators(e),this._assignAsyncValidators(r)}get validator(){return this._composedValidatorFn}set validator(e){this._rawValidators=this._composedValidatorFn=e}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(e){this._rawAsyncValidators=this._composedAsyncValidatorFn=e}get parent(){return this._parent}get valid(){return this.status===Rn}get invalid(){return this.status===gi}get pending(){return this.status==bn}get disabled(){return this.status===Vn}get enabled(){return this.status!==Vn}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(e){this._assignValidators(e)}setAsyncValidators(e){this._assignAsyncValidators(e)}addValidators(e){this.setValidators(Cr(e,this._rawValidators))}addAsyncValidators(e){this.setAsyncValidators(Cr(e,this._rawAsyncValidators))}removeValidators(e){this.setValidators(Er(e,this._rawValidators))}removeAsyncValidators(e){this.setAsyncValidators(Er(e,this._rawAsyncValidators))}hasValidator(e){return _i(this._rawValidators,e)}hasAsyncValidator(e){return _i(this._rawAsyncValidators,e)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(e={}){this.touched=!0,this._parent&&!e.onlySelf&&this._parent.markAsTouched(e)}markAllAsTouched(){this.markAsTouched({onlySelf:!0}),this._forEachChild(e=>e.markAllAsTouched())}markAsUntouched(e={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild(r=>{r.markAsUntouched({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}markAsDirty(e={}){this.pristine=!1,this._parent&&!e.onlySelf&&this._parent.markAsDirty(e)}markAsPristine(e={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild(r=>{r.markAsPristine({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}markAsPending(e={}){this.status=bn,e.emitEvent!==!1&&this.statusChanges.emit(this.status),this._parent&&!e.onlySelf&&this._parent.markAsPending(e)}disable(e={}){let r=this._parentMarkedDirty(e.onlySelf);this.status=Vn,this.errors=null,this._forEachChild(t=>{t.disable(me($({},e),{onlySelf:!0}))}),this._updateValue(),e.emitEvent!==!1&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors(me($({},e),{skipPristineCheck:r})),this._onDisabledChange.forEach(t=>t(!0))}enable(e={}){let r=this._parentMarkedDirty(e.onlySelf);this.status=Rn,this._forEachChild(t=>{t.enable(me($({},e),{onlySelf:!0}))}),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent}),this._updateAncestors(me($({},e),{skipPristineCheck:r})),this._onDisabledChange.forEach(t=>t(!1))}_updateAncestors(e){this._parent&&!e.onlySelf&&(this._parent.updateValueAndValidity(e),e.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}setParent(e){this._parent=e}getRawValue(){return this.value}updateValueAndValidity(e={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===Rn||this.status===bn)&&this._runAsyncValidator(e.emitEvent)),e.emitEvent!==!1&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.updateValueAndValidity(e)}_updateTreeValidity(e={emitEvent:!0}){this._forEachChild(r=>r._updateTreeValidity(e)),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?Vn:Rn}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(e){if(this.asyncValidator){this.status=bn,this._hasOwnPendingAsyncValidator=!0;let r=Ir(this.asyncValidator(this));this._asyncValidationSubscription=r.subscribe(t=>{this._hasOwnPendingAsyncValidator=!1,this.setErrors(t,{emitEvent:e})})}}_cancelExistingSubscription(){this._asyncValidationSubscription&&(this._asyncValidationSubscription.unsubscribe(),this._hasOwnPendingAsyncValidator=!1)}setErrors(e,r={}){this.errors=e,this._updateControlsErrors(r.emitEvent!==!1)}get(e){let r=e;return r==null||(Array.isArray(r)||(r=r.split(".")),r.length===0)?null:r.reduce((t,n)=>t&&t._find(n),this)}getError(e,r){let t=r?this.get(r):this;return t&&t.errors?t.errors[e]:null}hasError(e,r){return!!this.getError(e,r)}get root(){let e=this;for(;e._parent;)e=e._parent;return e}_updateControlsErrors(e){this.status=this._calculateStatus(),e&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(e)}_initObservables(){this.valueChanges=new Ze,this.statusChanges=new Ze}_calculateStatus(){return this._allControlsDisabled()?Vn:this.errors?gi:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(bn)?bn:this._anyControlsHaveStatus(gi)?gi:Rn}_anyControlsHaveStatus(e){return this._anyControls(r=>r.status===e)}_anyControlsDirty(){return this._anyControls(e=>e.dirty)}_anyControlsTouched(){return this._anyControls(e=>e.touched)}_updatePristine(e={}){this.pristine=!this._anyControlsDirty(),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}_updateTouched(e={}){this.touched=this._anyControlsTouched(),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}_registerOnCollectionChange(e){this._onCollectionChange=e}_setUpdateStrategy(e){wi(e)&&e.updateOn!=null&&(this._updateOn=e.updateOn)}_parentMarkedDirty(e){let r=this._parent&&this._parent.dirty;return!e&&!!r&&!this._parent._anyControlsDirty()}_find(e){return null}_assignValidators(e){this._rawValidators=Array.isArray(e)?e.slice():e,this._composedValidatorFn=Ba(this._rawValidators)}_assignAsyncValidators(e){this._rawAsyncValidators=Array.isArray(e)?e.slice():e,this._composedAsyncValidatorFn=Ha(this._rawAsyncValidators)}},Cn=class extends yn{constructor(e,r,t){super(uo(r),ho(t,r)),this.controls=e,this._initObservables(),this._setUpdateStrategy(r),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}registerControl(e,r){return this.controls[e]?this.controls[e]:(this.controls[e]=r,r.setParent(this),r._registerOnCollectionChange(this._onCollectionChange),r)}addControl(e,r,t={}){this.registerControl(e,r),this.updateValueAndValidity({emitEvent:t.emitEvent}),this._onCollectionChange()}removeControl(e,r={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}setControl(e,r,t={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],r&&this.registerControl(e,r),this.updateValueAndValidity({emitEvent:t.emitEvent}),this._onCollectionChange()}contains(e){return this.controls.hasOwnProperty(e)&&this.controls[e].enabled}setValue(e,r={}){jr(this,!0,e),Object.keys(e).forEach(t=>{Ur(this,!0,t),this.controls[t].setValue(e[t],{onlySelf:!0,emitEvent:r.emitEvent})}),this.updateValueAndValidity(r)}patchValue(e,r={}){e!=null&&(Object.keys(e).forEach(t=>{let n=this.controls[t];n&&n.patchValue(e[t],{onlySelf:!0,emitEvent:r.emitEvent})}),this.updateValueAndValidity(r))}reset(e={},r={}){this._forEachChild((t,n)=>{t.reset(e?e[n]:null,{onlySelf:!0,emitEvent:r.emitEvent})}),this._updatePristine(r),this._updateTouched(r),this.updateValueAndValidity(r)}getRawValue(){return this._reduceChildren({},(e,r,t)=>(e[t]=r.getRawValue(),e))}_syncPendingControls(){let e=this._reduceChildren(!1,(r,t)=>t._syncPendingControls()?!0:r);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_forEachChild(e){Object.keys(this.controls).forEach(r=>{let t=this.controls[r];t&&e(t,r)})}_setUpControls(){this._forEachChild(e=>{e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(e){for(let[r,t]of Object.entries(this.controls))if(this.contains(r)&&e(t))return!0;return!1}_reduceValue(){let e={};return this._reduceChildren(e,(r,t,n)=>((t.enabled||this.disabled)&&(r[n]=t.value),r))}_reduceChildren(e,r){let t=e;return this._forEachChild((n,o)=>{t=r(t,n,o)}),t}_allControlsDisabled(){for(let e of Object.keys(this.controls))if(this.controls[e].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_find(e){return this.controls.hasOwnProperty(e)?this.controls[e]:null}};var so=class extends Cn{};var Gn=new ct("CallSetDisabledState",{providedIn:"root",factory:()=>xi}),xi="always";function Gr(i,e){return[...e.path,i]}function yi(i,e,r=xi){po(i,e),e.valueAccessor.writeValue(i.value),(i.disabled||r==="always")&&e.valueAccessor.setDisabledState?.(i.disabled),Ua(i,e),Ga(i,e),ja(i,e),La(i,e)}function Mr(i,e,r=!0){let t=()=>{};e.valueAccessor&&(e.valueAccessor.registerOnChange(t),e.valueAccessor.registerOnTouched(t)),Ei(i,e),i&&(e._invokeOnDestroyCallbacks(),i._registerOnCollectionChange(()=>{}))}function Ci(i,e){i.forEach(r=>{r.registerOnValidatorChange&&r.registerOnValidatorChange(e)})}function La(i,e){if(e.valueAccessor.setDisabledState){let r=t=>{e.valueAccessor.setDisabledState(t)};i.registerOnDisabledChange(r),e._registerOnDestroy(()=>{i._unregisterOnDisabledChange(r)})}}function po(i,e){let r=Hr(i);e.validator!==null?i.setValidators(yr(r,e.validator)):typeof r=="function"&&i.setValidators([r]);let t=Lr(i);e.asyncValidator!==null?i.setAsyncValidators(yr(t,e.asyncValidator)):typeof t=="function"&&i.setAsyncValidators([t]);let n=()=>i.updateValueAndValidity();Ci(e._rawValidators,n),Ci(e._rawAsyncValidators,n)}function Ei(i,e){let r=!1;if(i!==null){if(e.validator!==null){let n=Hr(i);if(Array.isArray(n)&&n.length>0){let o=n.filter(l=>l!==e.validator);o.length!==n.length&&(r=!0,i.setValidators(o))}}if(e.asyncValidator!==null){let n=Lr(i);if(Array.isArray(n)&&n.length>0){let o=n.filter(l=>l!==e.asyncValidator);o.length!==n.length&&(r=!0,i.setAsyncValidators(o))}}}let t=()=>{};return Ci(e._rawValidators,t),Ci(e._rawAsyncValidators,t),r}function Ua(i,e){e.valueAccessor.registerOnChange(r=>{i._pendingValue=r,i._pendingChange=!0,i._pendingDirty=!0,i.updateOn==="change"&&$r(i,e)})}function ja(i,e){e.valueAccessor.registerOnTouched(()=>{i._pendingTouched=!0,i.updateOn==="blur"&&i._pendingChange&&$r(i,e),i.updateOn!=="submit"&&i.markAsTouched()})}function $r(i,e){i._pendingDirty&&i.markAsDirty(),i.setValue(i._pendingValue,{emitModelToViewChange:!1}),e.viewToModelUpdate(i._pendingValue),i._pendingChange=!1}function Ga(i,e){let r=(t,n)=>{e.valueAccessor.writeValue(t),n&&e.viewToModelUpdate(t)};i.registerOnChange(r),e._registerOnDestroy(()=>{i._unregisterOnChange(r)})}function zr(i,e){i==null,po(i,e)}function $a(i,e){return Ei(i,e)}function Wr(i,e){if(!i.hasOwnProperty("model"))return!1;let r=i.model;return r.isFirstChange()?!0:!Object.is(e,r.currentValue)}function za(i){return Object.getPrototypeOf(i.constructor)===Ln}function qr(i,e){i._syncPendingControls(),e.forEach(r=>{let t=r.control;t.updateOn==="submit"&&t._pendingChange&&(r.viewToModelUpdate(t._pendingValue),t._pendingChange=!1)})}function Jr(i,e){if(!e)return null;Array.isArray(e);let r,t,n;return e.forEach(o=>{o.constructor===z?r=o:za(o)?t=o:n=o}),n||t||r||null}function Wa(i,e){let r=i.indexOf(e);r>-1&&i.splice(r,1)}var qa={provide:wt,useExisting:Ke(()=>Qe)},Bn=(()=>Promise.resolve())(),Qe=(()=>{let e=class e extends wt{constructor(t,n,o){super(),this.callSetDisabledState=o,this.submitted=!1,this._directives=new Set,this.ngSubmit=new Ze,this.form=new Cn({},lo(t),co(n))}ngAfterViewInit(){this._setUpdateStrategy()}get formDirective(){return this}get control(){return this.form}get path(){return[]}get controls(){return this.form.controls}addControl(t){Bn.then(()=>{let n=this._findContainer(t.path);t.control=n.registerControl(t.name,t.control),yi(t.control,t,this.callSetDisabledState),t.control.updateValueAndValidity({emitEvent:!1}),this._directives.add(t)})}getControl(t){return this.form.get(t.path)}removeControl(t){Bn.then(()=>{let n=this._findContainer(t.path);n&&n.removeControl(t.name),this._directives.delete(t)})}addFormGroup(t){Bn.then(()=>{let n=this._findContainer(t.path),o=new Cn({});zr(o,t),n.registerControl(t.name,o),o.updateValueAndValidity({emitEvent:!1})})}removeFormGroup(t){Bn.then(()=>{let n=this._findContainer(t.path);n&&n.removeControl(t.name)})}getFormGroup(t){return this.form.get(t.path)}updateModel(t,n){Bn.then(()=>{this.form.get(t.path).setValue(n)})}setValue(t){this.control.setValue(t)}onSubmit(t){return this.submitted=!0,qr(this.form,this._directives),this.ngSubmit.emit(t),t?.target?.method==="dialog"}onReset(){this.resetForm()}resetForm(t=void 0){this.form.reset(t),this.submitted=!1}_setUpdateStrategy(){this.options&&this.options.updateOn!=null&&(this.form._updateOn=this.options.updateOn)}_findContainer(t){return t.pop(),t.length?this.form.get(t):this.form}};e.\u0275fac=function(n){return new(n||e)(m(jn,10),m(Mi,10),m(Gn,8))},e.\u0275dir=ge({type:e,selectors:[["form",3,"ngNoForm","",3,"formGroup",""],["ng-form"],["","ngForm",""]],hostBindings:function(n,o){n&1&&p("submit",function(d){return o.onSubmit(d)})("reset",function(){return o.onReset()})},inputs:{options:["ngFormOptions","options"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[Ie([qa]),Le]});let i=e;return i})();function wr(i,e){let r=i.indexOf(e);r>-1&&i.splice(r,1)}function xr(i){return typeof i=="object"&&i!==null&&Object.keys(i).length===2&&"value"in i&&"disabled"in i}var Hn=class extends yn{constructor(e=null,r,t){super(uo(r),ho(t,r)),this.defaultValue=null,this._onChange=[],this._pendingChange=!1,this._applyFormState(e),this._setUpdateStrategy(r),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),wi(r)&&(r.nonNullable||r.initialValueIsDefault)&&(xr(e)?this.defaultValue=e.value:this.defaultValue=e)}setValue(e,r={}){this.value=this._pendingValue=e,this._onChange.length&&r.emitModelToViewChange!==!1&&this._onChange.forEach(t=>t(this.value,r.emitViewToModelChange!==!1)),this.updateValueAndValidity(r)}patchValue(e,r={}){this.setValue(e,r)}reset(e=this.defaultValue,r={}){this._applyFormState(e),this.markAsPristine(r),this.markAsUntouched(r),this.setValue(this.value,r),this._pendingChange=!1}_updateValue(){}_anyControls(e){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(e){this._onChange.push(e)}_unregisterOnChange(e){wr(this._onChange,e)}registerOnDisabledChange(e){this._onDisabledChange.push(e)}_unregisterOnDisabledChange(e){wr(this._onDisabledChange,e)}_forEachChild(e){}_syncPendingControls(){return this.updateOn==="submit"&&(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),this._pendingChange)?(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),!0):!1}_applyFormState(e){xr(e)?(this.value=this._pendingValue=e.value,e.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=e}};var Ja=i=>i instanceof Hn;var Qa={provide:Jt,useExisting:Ke(()=>Z)},Or=(()=>Promise.resolve())(),Z=(()=>{let e=class e extends Jt{constructor(t,n,o,l,d,h){super(),this._changeDetectorRef=d,this.callSetDisabledState=h,this.control=new Hn,this._registered=!1,this.name="",this.update=new Ze,this._parent=t,this._setValidators(n),this._setAsyncValidators(o),this.valueAccessor=Jr(this,l)}ngOnChanges(t){if(this._checkForErrors(),!this._registered||"name"in t){if(this._registered&&(this._checkName(),this.formDirective)){let n=t.name.previousValue;this.formDirective.removeControl({name:n,path:this._getPath(n)})}this._setUpControl()}"isDisabled"in t&&this._updateDisabled(t),Wr(t,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._getPath(this.name)}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(t){this.viewModel=t,this.update.emit(t)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&this.options.updateOn!=null&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!!(this.options&&this.options.standalone)}_setUpStandalone(){yi(this.control,this,this.callSetDisabledState),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._isStandalone()||this._checkParentType(),this._checkName()}_checkParentType(){}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),!this._isStandalone()&&this.name}_updateValue(t){Or.then(()=>{this.control.setValue(t,{emitViewToModelChange:!1}),this._changeDetectorRef?.markForCheck()})}_updateDisabled(t){let n=t.isDisabled.currentValue,o=n!==0&&io(n);Or.then(()=>{o&&!this.control.disabled?this.control.disable():!o&&this.control.disabled&&this.control.enable(),this._changeDetectorRef?.markForCheck()})}_getPath(t){return this._parent?Gr(t,this._parent):[t]}};e.\u0275fac=function(n){return new(n||e)(m(wt,9),m(jn,10),m(Mi,10),m(Qt,10),m(An,8),m(Gn,8))},e.\u0275dir=ge({type:e,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:["disabled","isDisabled"],model:["ngModel","model"],options:["ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],features:[Ie([Qa]),Le,Wt]});let i=e;return i})(),Re=(()=>{let e=class e{};e.\u0275fac=function(n){return new(n||e)},e.\u0275dir=ge({type:e,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""]});let i=e;return i})(),Ya={provide:Qt,useExisting:Ke(()=>$n),multi:!0},$n=(()=>{let e=class e extends Ln{writeValue(t){let n=t??"";this.setProperty("value",n)}registerOnChange(t){this.onChange=n=>{t(n==""?null:parseFloat(n))}}};e.\u0275fac=(()=>{let t;return function(o){return(t||(t=At(e)))(o||e)}})(),e.\u0275dir=ge({type:e,selectors:[["input","type","number","formControlName",""],["input","type","number","formControl",""],["input","type","number","ngModel",""]],hostBindings:function(n,o){n&1&&p("input",function(d){return o.onChange(d.target.value)})("blur",function(){return o.onTouched()})},features:[Ie([Ya]),Le]});let i=e;return i})();var Ka=(()=>{let e=class e{};e.\u0275fac=function(n){return new(n||e)},e.\u0275mod=ee({type:e}),e.\u0275inj=X({});let i=e;return i})();var Qr=new ct("NgModelWithFormControlWarning");var Za={provide:wt,useExisting:Ke(()=>zn)},zn=(()=>{let e=class e extends wt{constructor(t,n,o){super(),this.callSetDisabledState=o,this.submitted=!1,this._onCollectionChange=()=>this._updateDomValue(),this.directives=[],this.form=null,this.ngSubmit=new Ze,this._setValidators(t),this._setAsyncValidators(n)}ngOnChanges(t){this._checkFormPresent(),t.hasOwnProperty("form")&&(this._updateValidators(),this._updateDomValue(),this._updateRegistrations(),this._oldForm=this.form)}ngOnDestroy(){this.form&&(Ei(this.form,this),this.form._onCollectionChange===this._onCollectionChange&&this.form._registerOnCollectionChange(()=>{}))}get formDirective(){return this}get control(){return this.form}get path(){return[]}addControl(t){let n=this.form.get(t.path);return yi(n,t,this.callSetDisabledState),n.updateValueAndValidity({emitEvent:!1}),this.directives.push(t),n}getControl(t){return this.form.get(t.path)}removeControl(t){Mr(t.control||null,t,!1),Wa(this.directives,t)}addFormGroup(t){this._setUpFormContainer(t)}removeFormGroup(t){this._cleanUpFormContainer(t)}getFormGroup(t){return this.form.get(t.path)}addFormArray(t){this._setUpFormContainer(t)}removeFormArray(t){this._cleanUpFormContainer(t)}getFormArray(t){return this.form.get(t.path)}updateModel(t,n){this.form.get(t.path).setValue(n)}onSubmit(t){return this.submitted=!0,qr(this.form,this.directives),this.ngSubmit.emit(t),t?.target?.method==="dialog"}onReset(){this.resetForm()}resetForm(t=void 0){this.form.reset(t),this.submitted=!1}_updateDomValue(){this.directives.forEach(t=>{let n=t.control,o=this.form.get(t.path);n!==o&&(Mr(n||null,t),Ja(o)&&(yi(o,t,this.callSetDisabledState),t.control=o))}),this.form._updateTreeValidity({emitEvent:!1})}_setUpFormContainer(t){let n=this.form.get(t.path);zr(n,t),n.updateValueAndValidity({emitEvent:!1})}_cleanUpFormContainer(t){if(this.form){let n=this.form.get(t.path);n&&$a(n,t)&&n.updateValueAndValidity({emitEvent:!1})}}_updateRegistrations(){this.form._registerOnCollectionChange(this._onCollectionChange),this._oldForm&&this._oldForm._registerOnCollectionChange(()=>{})}_updateValidators(){po(this.form,this),this._oldForm&&Ei(this._oldForm,this)}_checkFormPresent(){this.form}};e.\u0275fac=function(n){return new(n||e)(m(jn,10),m(Mi,10),m(Gn,8))},e.\u0275dir=ge({type:e,selectors:[["","formGroup",""]],hostBindings:function(n,o){n&1&&p("submit",function(d){return o.onSubmit(d)})("reset",function(){return o.onReset()})},inputs:{form:["formGroup","form"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[Ie([Za]),Le,Wt]});let i=e;return i})();var Xa={provide:Jt,useExisting:Ke(()=>Wn)},Wn=(()=>{let e=class e extends Jt{set isDisabled(t){}constructor(t,n,o,l,d){super(),this._ngModelWarningConfig=d,this._added=!1,this.name=null,this.update=new Ze,this._ngModelWarningSent=!1,this._parent=t,this._setValidators(n),this._setAsyncValidators(o),this.valueAccessor=Jr(this,l)}ngOnChanges(t){this._added||this._setUpControl(),Wr(t,this.viewModel)&&(this.viewModel=this.model,this.formDirective.updateModel(this,this.model))}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}viewToModelUpdate(t){this.viewModel=t,this.update.emit(t)}get path(){return Gr(this.name==null?this.name:this.name.toString(),this._parent)}get formDirective(){return this._parent?this._parent.formDirective:null}_checkParentType(){}_setUpControl(){this._checkParentType(),this.control=this.formDirective.addControl(this),this._added=!0}};e._ngModelWarningSentOnce=!1,e.\u0275fac=function(n){return new(n||e)(m(wt,13),m(jn,10),m(Mi,10),m(Qt,10),m(Qr,8))},e.\u0275dir=ge({type:e,selectors:[["","formControlName",""]],inputs:{name:["formControlName","name"],isDisabled:["disabled","isDisabled"],model:["ngModel","model"]},outputs:{update:"ngModelChange"},features:[Ie([Xa]),Le,Wt]});let i=e;return i})(),el={provide:Qt,useExisting:Ke(()=>$e),multi:!0};function Yr(i,e){return i==null?`${e}`:(e&&typeof e=="object"&&(e="Object"),`${i}: ${e}`.slice(0,50))}function tl(i){return i.split(":")[0]}var $e=(()=>{let e=class e extends Ln{constructor(){super(...arguments),this._optionMap=new Map,this._idCounter=0,this._compareWith=Object.is}set compareWith(t){this._compareWith=t}writeValue(t){this.value=t;let n=this._getOptionId(t),o=Yr(n,t);this.setProperty("value",o)}registerOnChange(t){this.onChange=n=>{this.value=this._getOptionValue(n),t(this.value)}}_registerOption(){return(this._idCounter++).toString()}_getOptionId(t){for(let n of this._optionMap.keys())if(this._compareWith(this._optionMap.get(n),t))return n;return null}_getOptionValue(t){let n=tl(t);return this._optionMap.has(n)?this._optionMap.get(n):t}};e.\u0275fac=(()=>{let t;return function(o){return(t||(t=At(e)))(o||e)}})(),e.\u0275dir=ge({type:e,selectors:[["select","formControlName","",3,"multiple",""],["select","formControl","",3,"multiple",""],["select","ngModel","",3,"multiple",""]],hostBindings:function(n,o){n&1&&p("change",function(d){return o.onChange(d.target.value)})("blur",function(){return o.onTouched()})},inputs:{compareWith:"compareWith"},features:[Ie([el]),Le]});let i=e;return i})(),tt=(()=>{let e=class e{constructor(t,n,o){this._element=t,this._renderer=n,this._select=o,this._select&&(this.id=this._select._registerOption())}set ngValue(t){this._select!=null&&(this._select._optionMap.set(this.id,t),this._setElementValue(Yr(this.id,t)),this._select.writeValue(this._select.value))}set value(t){this._setElementValue(t),this._select&&this._select.writeValue(this._select.value)}_setElementValue(t){this._renderer.setProperty(this._element.nativeElement,"value",t)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}};e.\u0275fac=function(n){return new(n||e)(m(yt),m(Tn),m($e,9))},e.\u0275dir=ge({type:e,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"}});let i=e;return i})(),nl={provide:Qt,useExisting:Ke(()=>Kr),multi:!0};function kr(i,e){return i==null?`${e}`:(typeof e=="string"&&(e=`'${e}'`),e&&typeof e=="object"&&(e="Object"),`${i}: ${e}`.slice(0,50))}function il(i){return i.split(":")[0]}var Kr=(()=>{let e=class e extends Ln{constructor(){super(...arguments),this._optionMap=new Map,this._idCounter=0,this._compareWith=Object.is}set compareWith(t){this._compareWith=t}writeValue(t){this.value=t;let n;if(Array.isArray(t)){let o=t.map(l=>this._getOptionId(l));n=(l,d)=>{l._setSelected(o.indexOf(d.toString())>-1)}}else n=(o,l)=>{o._setSelected(!1)};this._optionMap.forEach(n)}registerOnChange(t){this.onChange=n=>{let o=[],l=n.selectedOptions;if(l!==void 0){let d=l;for(let h=0;h<d.length;h++){let _=d[h],b=this._getOptionValue(_.value);o.push(b)}}else{let d=n.options;for(let h=0;h<d.length;h++){let _=d[h];if(_.selected){let b=this._getOptionValue(_.value);o.push(b)}}}this.value=o,t(o)}}_registerOption(t){let n=(this._idCounter++).toString();return this._optionMap.set(n,t),n}_getOptionId(t){for(let n of this._optionMap.keys())if(this._compareWith(this._optionMap.get(n)._value,t))return n;return null}_getOptionValue(t){let n=il(t);return this._optionMap.has(n)?this._optionMap.get(n)._value:t}};e.\u0275fac=(()=>{let t;return function(o){return(t||(t=At(e)))(o||e)}})(),e.\u0275dir=ge({type:e,selectors:[["select","multiple","","formControlName",""],["select","multiple","","formControl",""],["select","multiple","","ngModel",""]],hostBindings:function(n,o){n&1&&p("change",function(d){return o.onChange(d.target)})("blur",function(){return o.onTouched()})},inputs:{compareWith:"compareWith"},features:[Ie([nl]),Le]});let i=e;return i})(),nt=(()=>{let e=class e{constructor(t,n,o){this._element=t,this._renderer=n,this._select=o,this._select&&(this.id=this._select._registerOption(this))}set ngValue(t){this._select!=null&&(this._value=t,this._setElementValue(kr(this.id,t)),this._select.writeValue(this._select.value))}set value(t){this._select?(this._value=t,this._setElementValue(kr(this.id,t)),this._select.writeValue(this._select.value)):this._setElementValue(t)}_setElementValue(t){this._renderer.setProperty(this._element.nativeElement,"value",t)}_setSelected(t){this._renderer.setProperty(this._element.nativeElement,"selected",t)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}};e.\u0275fac=function(n){return new(n||e)(m(yt),m(Tn),m(Kr,9))},e.\u0275dir=ge({type:e,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"}});let i=e;return i})();var ol=(()=>{let e=class e{constructor(){this._validator=fi}ngOnChanges(t){if(this.inputName in t){let n=this.normalizeInput(t[this.inputName].currentValue);this._enabled=this.enabled(n),this._validator=this._enabled?this.createValidator(n):fi,this._onChange&&this._onChange()}}validate(t){return this._validator(t)}registerOnValidatorChange(t){this._onChange=t}enabled(t){return t!=null}};e.\u0275fac=function(n){return new(n||e)},e.\u0275dir=ge({type:e,features:[Wt]});let i=e;return i})();var rl={provide:jn,useExisting:Ke(()=>Ue),multi:!0};var Ue=(()=>{let e=class e extends ol{constructor(){super(...arguments),this.inputName="required",this.normalizeInput=io,this.createValidator=t=>Tr}enabled(t){return t}};e.\u0275fac=(()=>{let t;return function(o){return(t||(t=At(e)))(o||e)}})(),e.\u0275dir=ge({type:e,selectors:[["","required","","formControlName","",3,"type","checkbox"],["","required","","formControl","",3,"type","checkbox"],["","required","","ngModel","",3,"type","checkbox"]],hostVars:1,hostBindings:function(n,o){n&2&&mn("required",o._enabled?"":null)},inputs:{required:"required"},features:[Ie([rl]),Le]});let i=e;return i})();var Zr=(()=>{let e=class e{};e.\u0275fac=function(n){return new(n||e)},e.\u0275mod=ee({type:e}),e.\u0275inj=X({imports:[Ka]});let i=e;return i})(),ao=class extends yn{constructor(e,r,t){super(uo(r),ho(t,r)),this.controls=e,this._initObservables(),this._setUpdateStrategy(r),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}at(e){return this.controls[this._adjustIndex(e)]}push(e,r={}){this.controls.push(e),this._registerControl(e),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}insert(e,r,t={}){this.controls.splice(e,0,r),this._registerControl(r),this.updateValueAndValidity({emitEvent:t.emitEvent})}removeAt(e,r={}){let t=this._adjustIndex(e);t<0&&(t=0),this.controls[t]&&this.controls[t]._registerOnCollectionChange(()=>{}),this.controls.splice(t,1),this.updateValueAndValidity({emitEvent:r.emitEvent})}setControl(e,r,t={}){let n=this._adjustIndex(e);n<0&&(n=0),this.controls[n]&&this.controls[n]._registerOnCollectionChange(()=>{}),this.controls.splice(n,1),r&&(this.controls.splice(n,0,r),this._registerControl(r)),this.updateValueAndValidity({emitEvent:t.emitEvent}),this._onCollectionChange()}get length(){return this.controls.length}setValue(e,r={}){jr(this,!1,e),e.forEach((t,n)=>{Ur(this,!1,n),this.at(n).setValue(t,{onlySelf:!0,emitEvent:r.emitEvent})}),this.updateValueAndValidity(r)}patchValue(e,r={}){e!=null&&(e.forEach((t,n)=>{this.at(n)&&this.at(n).patchValue(t,{onlySelf:!0,emitEvent:r.emitEvent})}),this.updateValueAndValidity(r))}reset(e=[],r={}){this._forEachChild((t,n)=>{t.reset(e[n],{onlySelf:!0,emitEvent:r.emitEvent})}),this._updatePristine(r),this._updateTouched(r),this.updateValueAndValidity(r)}getRawValue(){return this.controls.map(e=>e.getRawValue())}clear(e={}){this.controls.length<1||(this._forEachChild(r=>r._registerOnCollectionChange(()=>{})),this.controls.splice(0),this.updateValueAndValidity({emitEvent:e.emitEvent}))}_adjustIndex(e){return e<0?e+this.length:e}_syncPendingControls(){let e=this.controls.reduce((r,t)=>t._syncPendingControls()?!0:r,!1);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_forEachChild(e){this.controls.forEach((r,t)=>{e(r,t)})}_updateValue(){this.value=this.controls.filter(e=>e.enabled||this.disabled).map(e=>e.value)}_anyControls(e){return this.controls.some(r=>r.enabled&&e(r))}_setUpControls(){this._forEachChild(e=>this._registerControl(e))}_allControlsDisabled(){for(let e of this.controls)if(e.enabled)return!1;return this.controls.length>0||this.disabled}_registerControl(e){e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)}_find(e){return this.at(e)??null}};function Sr(i){return!!i&&(i.asyncValidators!==void 0||i.validators!==void 0||i.updateOn!==void 0)}var Oi=(()=>{let e=class e{constructor(){this.useNonNullable=!1}get nonNullable(){let t=new e;return t.useNonNullable=!0,t}group(t,n=null){let o=this._reduceControls(t),l={};return Sr(n)?l=n:n!==null&&(l.validators=n.validator,l.asyncValidators=n.asyncValidator),new Cn(o,l)}record(t,n=null){let o=this._reduceControls(t);return new so(o,n)}control(t,n,o){let l={};return this.useNonNullable?(Sr(n)?l=n:(l.validators=n,l.asyncValidators=o),new Hn(t,me($({},l),{nonNullable:!0}))):new Hn(t,n,o)}array(t,n,o){let l=t.map(d=>this._createControl(d));return new ao(l,n,o)}_reduceControls(t){let n={};return Object.keys(t).forEach(o=>{n[o]=this._createControl(t[o])}),n}_createControl(t){if(t instanceof Hn)return t;if(t instanceof yn)return t;if(Array.isArray(t)){let n=t[0],o=t.length>1?t[1]:null,l=t.length>2?t[2]:null;return this.control(n,o,l)}else return this.control(t)}};e.\u0275fac=function(n){return new(n||e)},e.\u0275prov=R({token:e,factory:e.\u0275fac,providedIn:"root"});let i=e;return i})();var H=(()=>{let e=class e{static withConfig(t){return{ngModule:e,providers:[{provide:Gn,useValue:t.callSetDisabledState??xi}]}}};e.\u0275fac=function(n){return new(n||e)},e.\u0275mod=ee({type:e}),e.\u0275inj=X({imports:[Zr]});let i=e;return i})(),ki=(()=>{let e=class e{static withConfig(t){return{ngModule:e,providers:[{provide:Qr,useValue:t.warnOnNgModelWithFormControl??"always"},{provide:Gn,useValue:t.callSetDisabledState??xi}]}}};e.\u0275fac=function(n){return new(n||e)},e.\u0275mod=ee({type:e}),e.\u0275inj=X({imports:[Zr]});let i=e;return i})();var fe="top",Se="bottom",Me="right",be="left",Si="auto",Rt=[fe,Se,Me,be],xt="start",Yt="end",Xr="clippingParents",Pi="viewport",En="popper",es="reference",mo=Rt.reduce(function(i,e){return i.concat([e+"-"+xt,e+"-"+Yt])},[]),Di=[].concat(Rt,[Si]).reduce(function(i,e){return i.concat([e,e+"-"+xt,e+"-"+Yt])},[]),sl="beforeRead",al="read",ll="afterRead",cl="beforeMain",dl="main",ul="afterMain",hl="beforeWrite",pl="write",ml="afterWrite",ts=[sl,al,ll,cl,dl,ul,hl,pl,ml];function we(i){return i?(i.nodeName||"").toLowerCase():null}function oe(i){if(i==null)return window;if(i.toString()!=="[object Window]"){var e=i.ownerDocument;return e&&e.defaultView||window}return i}function it(i){var e=oe(i).Element;return i instanceof e||i instanceof Element}function ye(i){var e=oe(i).HTMLElement;return i instanceof e||i instanceof HTMLElement}function Mn(i){if(typeof ShadowRoot>"u")return!1;var e=oe(i).ShadowRoot;return i instanceof e||i instanceof ShadowRoot}function gl(i){var e=i.state;Object.keys(e.elements).forEach(function(r){var t=e.styles[r]||{},n=e.attributes[r]||{},o=e.elements[r];!ye(o)||!we(o)||(Object.assign(o.style,t),Object.keys(n).forEach(function(l){var d=n[l];d===!1?o.removeAttribute(l):o.setAttribute(l,d===!0?"":d)}))})}function fl(i){var e=i.state,r={popper:{position:e.options.strategy,left:"0",top:"0",margin:"0"},arrow:{position:"absolute"},reference:{}};return Object.assign(e.elements.popper.style,r.popper),e.styles=r,e.elements.arrow&&Object.assign(e.elements.arrow.style,r.arrow),function(){Object.keys(e.elements).forEach(function(t){var n=e.elements[t],o=e.attributes[t]||{},l=Object.keys(e.styles.hasOwnProperty(t)?e.styles[t]:r[t]),d=l.reduce(function(h,_){return h[_]="",h},{});!ye(n)||!we(n)||(Object.assign(n.style,d),Object.keys(o).forEach(function(h){n.removeAttribute(h)}))})}}var ns={name:"applyStyles",enabled:!0,phase:"write",fn:gl,effect:fl,requires:["computeStyles"]};function xe(i){return i.split("-")[0]}var ut=Math.max,Kt=Math.min,Ot=Math.round;function wn(){var i=navigator.userAgentData;return i!=null&&i.brands&&Array.isArray(i.brands)?i.brands.map(function(e){return e.brand+"/"+e.version}).join(" "):navigator.userAgent}function qn(){return!/^((?!chrome|android).)*safari/i.test(wn())}function ot(i,e,r){e===void 0&&(e=!1),r===void 0&&(r=!1);var t=i.getBoundingClientRect(),n=1,o=1;e&&ye(i)&&(n=i.offsetWidth>0&&Ot(t.width)/i.offsetWidth||1,o=i.offsetHeight>0&&Ot(t.height)/i.offsetHeight||1);var l=it(i)?oe(i):window,d=l.visualViewport,h=!qn()&&r,_=(t.left+(h&&d?d.offsetLeft:0))/n,b=(t.top+(h&&d?d.offsetTop:0))/o,D=t.width/n,x=t.height/o;return{width:D,height:x,top:b,right:_+D,bottom:b+x,left:_,x:_,y:b}}function Zt(i){var e=ot(i),r=i.offsetWidth,t=i.offsetHeight;return Math.abs(e.width-r)<=1&&(r=e.width),Math.abs(e.height-t)<=1&&(t=e.height),{x:i.offsetLeft,y:i.offsetTop,width:r,height:t}}function Jn(i,e){var r=e.getRootNode&&e.getRootNode();if(i.contains(e))return!0;if(r&&Mn(r)){var t=e;do{if(t&&i.isSameNode(t))return!0;t=t.parentNode||t.host}while(t)}return!1}function Ge(i){return oe(i).getComputedStyle(i)}function go(i){return["table","td","th"].indexOf(we(i))>=0}function Pe(i){return((it(i)?i.ownerDocument:i.document)||window.document).documentElement}function kt(i){return we(i)==="html"?i:i.assignedSlot||i.parentNode||(Mn(i)?i.host:null)||Pe(i)}function is(i){return!ye(i)||Ge(i).position==="fixed"?null:i.offsetParent}function _l(i){var e=/firefox/i.test(wn()),r=/Trident/i.test(wn());if(r&&ye(i)){var t=Ge(i);if(t.position==="fixed")return null}var n=kt(i);for(Mn(n)&&(n=n.host);ye(n)&&["html","body"].indexOf(we(n))<0;){var o=Ge(n);if(o.transform!=="none"||o.perspective!=="none"||o.contain==="paint"||["transform","perspective"].indexOf(o.willChange)!==-1||e&&o.willChange==="filter"||e&&o.filter&&o.filter!=="none")return n;n=n.parentNode}return null}function ht(i){for(var e=oe(i),r=is(i);r&&go(r)&&Ge(r).position==="static";)r=is(r);return r&&(we(r)==="html"||we(r)==="body"&&Ge(r).position==="static")?e:r||_l(i)||e}function Xt(i){return["top","bottom"].indexOf(i)>=0?"x":"y"}function en(i,e,r){return ut(i,Kt(e,r))}function os(i,e,r){var t=en(i,e,r);return t>r?r:t}function Qn(){return{top:0,right:0,bottom:0,left:0}}function Yn(i){return Object.assign({},Qn(),i)}function Kn(i,e){return e.reduce(function(r,t){return r[t]=i,r},{})}var vl=function(e,r){return e=typeof e=="function"?e(Object.assign({},r.rects,{placement:r.placement})):e,Yn(typeof e!="number"?e:Kn(e,Rt))};function bl(i){var e,r=i.state,t=i.name,n=i.options,o=r.elements.arrow,l=r.modifiersData.popperOffsets,d=xe(r.placement),h=Xt(d),_=[be,Me].indexOf(d)>=0,b=_?"height":"width";if(!(!o||!l)){var D=vl(n.padding,r),x=Zt(o),M=h==="y"?fe:be,L=h==="y"?Se:Me,j=r.rects.reference[b]+r.rects.reference[h]-l[h]-r.rects.popper[b],U=l[h]-r.rects.reference[h],te=ht(o),he=te?h==="y"?te.clientHeight||0:te.clientWidth||0:0,pe=j/2-U/2,V=D[M],Q=he-x[b]-D[L],Y=he/2-x[b]/2+pe,ce=en(V,Y,Q),ke=h;r.modifiersData[t]=(e={},e[ke]=ce,e.centerOffset=ce-Y,e)}}function yl(i){var e=i.state,r=i.options,t=r.element,n=t===void 0?"[data-popper-arrow]":t;n!=null&&(typeof n=="string"&&(n=e.elements.popper.querySelector(n),!n)||Jn(e.elements.popper,n)&&(e.elements.arrow=n))}var fo={name:"arrow",enabled:!0,phase:"main",fn:bl,effect:yl,requires:["popperOffsets"],requiresIfExists:["preventOverflow"]};function rt(i){return i.split("-")[1]}var Cl={top:"auto",right:"auto",bottom:"auto",left:"auto"};function El(i,e){var r=i.x,t=i.y,n=e.devicePixelRatio||1;return{x:Ot(r*n)/n||0,y:Ot(t*n)/n||0}}function rs(i){var e,r=i.popper,t=i.popperRect,n=i.placement,o=i.variation,l=i.offsets,d=i.position,h=i.gpuAcceleration,_=i.adaptive,b=i.roundOffsets,D=i.isFixed,x=l.x,M=x===void 0?0:x,L=l.y,j=L===void 0?0:L,U=typeof b=="function"?b({x:M,y:j}):{x:M,y:j};M=U.x,j=U.y;var te=l.hasOwnProperty("x"),he=l.hasOwnProperty("y"),pe=be,V=fe,Q=window;if(_){var Y=ht(r),ce="clientHeight",ke="clientWidth";if(Y===oe(r)&&(Y=Pe(r),Ge(Y).position!=="static"&&d==="absolute"&&(ce="scrollHeight",ke="scrollWidth")),Y=Y,n===fe||(n===be||n===Me)&&o===Yt){V=Se;var Ce=D&&Y===Q&&Q.visualViewport?Q.visualViewport.height:Y[ce];j-=Ce-t.height,j*=h?1:-1}if(n===be||(n===fe||n===Se)&&o===Yt){pe=Me;var _e=D&&Y===Q&&Q.visualViewport?Q.visualViewport.width:Y[ke];M-=_e-t.width,M*=h?1:-1}}var De=Object.assign({position:d},_&&Cl),at=b===!0?El({x:M,y:j},oe(r)):{x:M,y:j};if(M=at.x,j=at.y,h){var He;return Object.assign({},De,(He={},He[V]=he?"0":"",He[pe]=te?"0":"",He.transform=(Q.devicePixelRatio||1)<=1?"translate("+M+"px, "+j+"px)":"translate3d("+M+"px, "+j+"px, 0)",He))}return Object.assign({},De,(e={},e[V]=he?j+"px":"",e[pe]=te?M+"px":"",e.transform="",e))}function Ml(i){var e=i.state,r=i.options,t=r.gpuAcceleration,n=t===void 0?!0:t,o=r.adaptive,l=o===void 0?!0:o,d=r.roundOffsets,h=d===void 0?!0:d,_={placement:xe(e.placement),variation:rt(e.placement),popper:e.elements.popper,popperRect:e.rects.popper,gpuAcceleration:n,isFixed:e.options.strategy==="fixed"};e.modifiersData.popperOffsets!=null&&(e.styles.popper=Object.assign({},e.styles.popper,rs(Object.assign({},_,{offsets:e.modifiersData.popperOffsets,position:e.options.strategy,adaptive:l,roundOffsets:h})))),e.modifiersData.arrow!=null&&(e.styles.arrow=Object.assign({},e.styles.arrow,rs(Object.assign({},_,{offsets:e.modifiersData.arrow,position:"absolute",adaptive:!1,roundOffsets:h})))),e.attributes.popper=Object.assign({},e.attributes.popper,{"data-popper-placement":e.placement})}var ss={name:"computeStyles",enabled:!0,phase:"beforeWrite",fn:Ml,data:{}};var Ti={passive:!0};function wl(i){var e=i.state,r=i.instance,t=i.options,n=t.scroll,o=n===void 0?!0:n,l=t.resize,d=l===void 0?!0:l,h=oe(e.elements.popper),_=[].concat(e.scrollParents.reference,e.scrollParents.popper);return o&&_.forEach(function(b){b.addEventListener("scroll",r.update,Ti)}),d&&h.addEventListener("resize",r.update,Ti),function(){o&&_.forEach(function(b){b.removeEventListener("scroll",r.update,Ti)}),d&&h.removeEventListener("resize",r.update,Ti)}}var as={name:"eventListeners",enabled:!0,phase:"write",fn:function(){},effect:wl,data:{}};var xl={left:"right",right:"left",bottom:"top",top:"bottom"};function xn(i){return i.replace(/left|right|bottom|top/g,function(e){return xl[e]})}var Ol={start:"end",end:"start"};function Ai(i){return i.replace(/start|end/g,function(e){return Ol[e]})}function tn(i){var e=oe(i),r=e.pageXOffset,t=e.pageYOffset;return{scrollLeft:r,scrollTop:t}}function nn(i){return ot(Pe(i)).left+tn(i).scrollLeft}function _o(i,e){var r=oe(i),t=Pe(i),n=r.visualViewport,o=t.clientWidth,l=t.clientHeight,d=0,h=0;if(n){o=n.width,l=n.height;var _=qn();(_||!_&&e==="fixed")&&(d=n.offsetLeft,h=n.offsetTop)}return{width:o,height:l,x:d+nn(i),y:h}}function vo(i){var e,r=Pe(i),t=tn(i),n=(e=i.ownerDocument)==null?void 0:e.body,o=ut(r.scrollWidth,r.clientWidth,n?n.scrollWidth:0,n?n.clientWidth:0),l=ut(r.scrollHeight,r.clientHeight,n?n.scrollHeight:0,n?n.clientHeight:0),d=-t.scrollLeft+nn(i),h=-t.scrollTop;return Ge(n||r).direction==="rtl"&&(d+=ut(r.clientWidth,n?n.clientWidth:0)-o),{width:o,height:l,x:d,y:h}}function on(i){var e=Ge(i),r=e.overflow,t=e.overflowX,n=e.overflowY;return/auto|scroll|overlay|hidden/.test(r+n+t)}function Ii(i){return["html","body","#document"].indexOf(we(i))>=0?i.ownerDocument.body:ye(i)&&on(i)?i:Ii(kt(i))}function Vt(i,e){var r;e===void 0&&(e=[]);var t=Ii(i),n=t===((r=i.ownerDocument)==null?void 0:r.body),o=oe(t),l=n?[o].concat(o.visualViewport||[],on(t)?t:[]):t,d=e.concat(l);return n?d:d.concat(Vt(kt(l)))}function On(i){return Object.assign({},i,{left:i.x,top:i.y,right:i.x+i.width,bottom:i.y+i.height})}function kl(i,e){var r=ot(i,!1,e==="fixed");return r.top=r.top+i.clientTop,r.left=r.left+i.clientLeft,r.bottom=r.top+i.clientHeight,r.right=r.left+i.clientWidth,r.width=i.clientWidth,r.height=i.clientHeight,r.x=r.left,r.y=r.top,r}function ls(i,e,r){return e===Pi?On(_o(i,r)):it(e)?kl(e,r):On(vo(Pe(i)))}function Sl(i){var e=Vt(kt(i)),r=["absolute","fixed"].indexOf(Ge(i).position)>=0,t=r&&ye(i)?ht(i):i;return it(t)?e.filter(function(n){return it(n)&&Jn(n,t)&&we(n)!=="body"}):[]}function bo(i,e,r,t){var n=e==="clippingParents"?Sl(i):[].concat(e),o=[].concat(n,[r]),l=o[0],d=o.reduce(function(h,_){var b=ls(i,_,t);return h.top=ut(b.top,h.top),h.right=Kt(b.right,h.right),h.bottom=Kt(b.bottom,h.bottom),h.left=ut(b.left,h.left),h},ls(i,l,t));return d.width=d.right-d.left,d.height=d.bottom-d.top,d.x=d.left,d.y=d.top,d}function Zn(i){var e=i.reference,r=i.element,t=i.placement,n=t?xe(t):null,o=t?rt(t):null,l=e.x+e.width/2-r.width/2,d=e.y+e.height/2-r.height/2,h;switch(n){case fe:h={x:l,y:e.y-r.height};break;case Se:h={x:l,y:e.y+e.height};break;case Me:h={x:e.x+e.width,y:d};break;case be:h={x:e.x-r.width,y:d};break;default:h={x:e.x,y:e.y}}var _=n?Xt(n):null;if(_!=null){var b=_==="y"?"height":"width";switch(o){case xt:h[_]=h[_]-(e[b]/2-r[b]/2);break;case Yt:h[_]=h[_]+(e[b]/2-r[b]/2);break;default:}}return h}function Bt(i,e){e===void 0&&(e={});var r=e,t=r.placement,n=t===void 0?i.placement:t,o=r.strategy,l=o===void 0?i.strategy:o,d=r.boundary,h=d===void 0?Xr:d,_=r.rootBoundary,b=_===void 0?Pi:_,D=r.elementContext,x=D===void 0?En:D,M=r.altBoundary,L=M===void 0?!1:M,j=r.padding,U=j===void 0?0:j,te=Yn(typeof U!="number"?U:Kn(U,Rt)),he=x===En?es:En,pe=i.rects.popper,V=i.elements[L?he:x],Q=bo(it(V)?V:V.contextElement||Pe(i.elements.popper),h,b,l),Y=ot(i.elements.reference),ce=Zn({reference:Y,element:pe,strategy:"absolute",placement:n}),ke=On(Object.assign({},pe,ce)),Ce=x===En?ke:Y,_e={top:Q.top-Ce.top+te.top,bottom:Ce.bottom-Q.bottom+te.bottom,left:Q.left-Ce.left+te.left,right:Ce.right-Q.right+te.right},De=i.modifiersData.offset;if(x===En&&De){var at=De[n];Object.keys(_e).forEach(function(He){var Lt=[Me,Se].indexOf(He)>=0?1:-1,Ut=[fe,Se].indexOf(He)>=0?"y":"x";_e[He]+=at[Ut]*Lt})}return _e}function yo(i,e){e===void 0&&(e={});var r=e,t=r.placement,n=r.boundary,o=r.rootBoundary,l=r.padding,d=r.flipVariations,h=r.allowedAutoPlacements,_=h===void 0?Di:h,b=rt(t),D=b?d?mo:mo.filter(function(L){return rt(L)===b}):Rt,x=D.filter(function(L){return _.indexOf(L)>=0});x.length===0&&(x=D);var M=x.reduce(function(L,j){return L[j]=Bt(i,{placement:j,boundary:n,rootBoundary:o,padding:l})[xe(j)],L},{});return Object.keys(M).sort(function(L,j){return M[L]-M[j]})}function Pl(i){if(xe(i)===Si)return[];var e=xn(i);return[Ai(i),e,Ai(e)]}function Dl(i){var e=i.state,r=i.options,t=i.name;if(!e.modifiersData[t]._skip){for(var n=r.mainAxis,o=n===void 0?!0:n,l=r.altAxis,d=l===void 0?!0:l,h=r.fallbackPlacements,_=r.padding,b=r.boundary,D=r.rootBoundary,x=r.altBoundary,M=r.flipVariations,L=M===void 0?!0:M,j=r.allowedAutoPlacements,U=e.options.placement,te=xe(U),he=te===U,pe=h||(he||!L?[xn(U)]:Pl(U)),V=[U].concat(pe).reduce(function(an,Dt){return an.concat(xe(Dt)===Si?yo(e,{placement:Dt,boundary:b,rootBoundary:D,padding:_,flipVariations:L,allowedAutoPlacements:j}):Dt)},[]),Q=e.rects.reference,Y=e.rects.popper,ce=new Map,ke=!0,Ce=V[0],_e=0;_e<V.length;_e++){var De=V[_e],at=xe(De),He=rt(De)===xt,Lt=[fe,Se].indexOf(at)>=0,Ut=Lt?"width":"height",qe=Bt(e,{placement:De,boundary:b,rootBoundary:D,altBoundary:x,padding:_}),lt=Lt?He?Me:be:He?Se:fe;Q[Ut]>Y[Ut]&&(lt=xn(lt));var ei=xn(lt),jt=[];if(o&&jt.push(qe[at]<=0),d&&jt.push(qe[lt]<=0,qe[ei]<=0),jt.every(function(an){return an})){Ce=De,ke=!1;break}ce.set(De,jt)}if(ke)for(var ti=L?3:1,qi=function(Dt){var Dn=V.find(function(ii){var Gt=ce.get(ii);if(Gt)return Gt.slice(0,Dt).every(function(Ji){return Ji})});if(Dn)return Ce=Dn,"break"},Pn=ti;Pn>0;Pn--){var ni=qi(Pn);if(ni==="break")break}e.placement!==Ce&&(e.modifiersData[t]._skip=!0,e.placement=Ce,e.reset=!0)}}var Co={name:"flip",enabled:!0,phase:"main",fn:Dl,requiresIfExists:["offset"],data:{_skip:!1}};function Tl(i,e,r){var t=xe(i),n=[be,fe].indexOf(t)>=0?-1:1,o=typeof r=="function"?r(Object.assign({},e,{placement:i})):r,l=o[0],d=o[1];return l=l||0,d=(d||0)*n,[be,Me].indexOf(t)>=0?{x:d,y:l}:{x:l,y:d}}function Al(i){var e=i.state,r=i.options,t=i.name,n=r.offset,o=n===void 0?[0,0]:n,l=Di.reduce(function(b,D){return b[D]=Tl(D,e.rects,o),b},{}),d=l[e.placement],h=d.x,_=d.y;e.modifiersData.popperOffsets!=null&&(e.modifiersData.popperOffsets.x+=h,e.modifiersData.popperOffsets.y+=_),e.modifiersData[t]=l}var Eo={name:"offset",enabled:!0,phase:"main",requires:["popperOffsets"],fn:Al};function Il(i){var e=i.state,r=i.name;e.modifiersData[r]=Zn({reference:e.rects.reference,element:e.rects.popper,strategy:"absolute",placement:e.placement})}var cs={name:"popperOffsets",enabled:!0,phase:"read",fn:Il,data:{}};function Mo(i){return i==="x"?"y":"x"}function Fl(i){var e=i.state,r=i.options,t=i.name,n=r.mainAxis,o=n===void 0?!0:n,l=r.altAxis,d=l===void 0?!1:l,h=r.boundary,_=r.rootBoundary,b=r.altBoundary,D=r.padding,x=r.tether,M=x===void 0?!0:x,L=r.tetherOffset,j=L===void 0?0:L,U=Bt(e,{boundary:h,rootBoundary:_,padding:D,altBoundary:b}),te=xe(e.placement),he=rt(e.placement),pe=!he,V=Xt(te),Q=Mo(V),Y=e.modifiersData.popperOffsets,ce=e.rects.reference,ke=e.rects.popper,Ce=typeof j=="function"?j(Object.assign({},e.rects,{placement:e.placement})):j,_e=typeof Ce=="number"?{mainAxis:Ce,altAxis:Ce}:Object.assign({mainAxis:0,altAxis:0},Ce),De=e.modifiersData.offset?e.modifiersData.offset[e.placement]:null,at={x:0,y:0};if(Y){if(o){var He,Lt=V==="y"?fe:be,Ut=V==="y"?Se:Me,qe=V==="y"?"height":"width",lt=Y[V],ei=lt+U[Lt],jt=lt-U[Ut],ti=M?-ke[qe]/2:0,qi=he===xt?ce[qe]:ke[qe],Pn=he===xt?-ke[qe]:-ce[qe],ni=e.elements.arrow,an=M&&ni?Zt(ni):{width:0,height:0},Dt=e.modifiersData["arrow#persistent"]?e.modifiersData["arrow#persistent"].padding:Qn(),Dn=Dt[Lt],ii=Dt[Ut],Gt=en(0,ce[qe],an[qe]),Ji=pe?ce[qe]/2-ti-Gt-Dn-_e.mainAxis:qi-Gt-Dn-_e.mainAxis,va=pe?-ce[qe]/2+ti+Gt+ii+_e.mainAxis:Pn+Gt+ii+_e.mainAxis,Qi=e.elements.arrow&&ht(e.elements.arrow),ba=Qi?V==="y"?Qi.clientTop||0:Qi.clientLeft||0:0,Lo=(He=De?.[V])!=null?He:0,ya=lt+Ji-Lo-ba,Ca=lt+va-Lo,Uo=en(M?Kt(ei,ya):ei,lt,M?ut(jt,Ca):jt);Y[V]=Uo,at[V]=Uo-lt}if(d){var jo,Ea=V==="x"?fe:be,Ma=V==="x"?Se:Me,$t=Y[Q],oi=Q==="y"?"height":"width",Go=$t+U[Ea],$o=$t-U[Ma],Yi=[fe,be].indexOf(te)!==-1,zo=(jo=De?.[Q])!=null?jo:0,Wo=Yi?Go:$t-ce[oi]-ke[oi]-zo+_e.altAxis,qo=Yi?$t+ce[oi]+ke[oi]-zo-_e.altAxis:$o,Jo=M&&Yi?os(Wo,$t,qo):en(M?Wo:Go,$t,M?qo:$o);Y[Q]=Jo,at[Q]=Jo-$t}e.modifiersData[t]=at}}var wo={name:"preventOverflow",enabled:!0,phase:"main",fn:Fl,requiresIfExists:["offset"]};function xo(i){return{scrollLeft:i.scrollLeft,scrollTop:i.scrollTop}}function Oo(i){return i===oe(i)||!ye(i)?tn(i):xo(i)}function Nl(i){var e=i.getBoundingClientRect(),r=Ot(e.width)/i.offsetWidth||1,t=Ot(e.height)/i.offsetHeight||1;return r!==1||t!==1}function ko(i,e,r){r===void 0&&(r=!1);var t=ye(e),n=ye(e)&&Nl(e),o=Pe(e),l=ot(i,n,r),d={scrollLeft:0,scrollTop:0},h={x:0,y:0};return(t||!t&&!r)&&((we(e)!=="body"||on(o))&&(d=Oo(e)),ye(e)?(h=ot(e,!0),h.x+=e.clientLeft,h.y+=e.clientTop):o&&(h.x=nn(o))),{x:l.left+d.scrollLeft-h.x,y:l.top+d.scrollTop-h.y,width:l.width,height:l.height}}function Rl(i){var e=new Map,r=new Set,t=[];i.forEach(function(o){e.set(o.name,o)});function n(o){r.add(o.name);var l=[].concat(o.requires||[],o.requiresIfExists||[]);l.forEach(function(d){if(!r.has(d)){var h=e.get(d);h&&n(h)}}),t.push(o)}return i.forEach(function(o){r.has(o.name)||n(o)}),t}function So(i){var e=Rl(i);return ts.reduce(function(r,t){return r.concat(e.filter(function(n){return n.phase===t}))},[])}function Po(i){var e;return function(){return e||(e=new Promise(function(r){Promise.resolve().then(function(){e=void 0,r(i())})})),e}}function Do(i){var e=i.reduce(function(r,t){var n=r[t.name];return r[t.name]=n?Object.assign({},n,t,{options:Object.assign({},n.options,t.options),data:Object.assign({},n.data,t.data)}):t,r},{});return Object.keys(e).map(function(r){return e[r]})}var ds={placement:"bottom",modifiers:[],strategy:"absolute"};function us(){for(var i=arguments.length,e=new Array(i),r=0;r<i;r++)e[r]=arguments[r];return!e.some(function(t){return!(t&&typeof t.getBoundingClientRect=="function")})}function hs(i){i===void 0&&(i={});var e=i,r=e.defaultModifiers,t=r===void 0?[]:r,n=e.defaultOptions,o=n===void 0?ds:n;return function(d,h,_){_===void 0&&(_=o);var b={placement:"bottom",orderedModifiers:[],options:Object.assign({},ds,o),modifiersData:{},elements:{reference:d,popper:h},attributes:{},styles:{}},D=[],x=!1,M={state:b,setOptions:function(te){var he=typeof te=="function"?te(b.options):te;j(),b.options=Object.assign({},o,b.options,he),b.scrollParents={reference:it(d)?Vt(d):d.contextElement?Vt(d.contextElement):[],popper:Vt(h)};var pe=So(Do([].concat(t,b.options.modifiers)));return b.orderedModifiers=pe.filter(function(V){return V.enabled}),L(),M.update()},forceUpdate:function(){if(!x){var te=b.elements,he=te.reference,pe=te.popper;if(us(he,pe)){b.rects={reference:ko(he,ht(pe),b.options.strategy==="fixed"),popper:Zt(pe)},b.reset=!1,b.placement=b.options.placement,b.orderedModifiers.forEach(function(_e){return b.modifiersData[_e.name]=Object.assign({},_e.data)});for(var V=0;V<b.orderedModifiers.length;V++){if(b.reset===!0){b.reset=!1,V=-1;continue}var Q=b.orderedModifiers[V],Y=Q.fn,ce=Q.options,ke=ce===void 0?{}:ce,Ce=Q.name;typeof Y=="function"&&(b=Y({state:b,options:ke,name:Ce,instance:M})||b)}}}},update:Po(function(){return new Promise(function(U){M.forceUpdate(),U(b)})}),destroy:function(){j(),x=!0}};if(!us(d,h))return M;M.setOptions(_).then(function(U){!x&&_.onFirstUpdate&&_.onFirstUpdate(U)});function L(){b.orderedModifiers.forEach(function(U){var te=U.name,he=U.options,pe=he===void 0?{}:he,V=U.effect;if(typeof V=="function"){var Q=V({state:b,name:te,instance:M,options:pe}),Y=function(){};D.push(Q||Y)}})}function j(){D.forEach(function(U){return U()}),D=[]}return M}}var Vl=[as,cs,ss,ns],To=hs({defaultModifiers:Vl});var fs=["*"];var Bl=["dialog"];function Hl(i,e){if(i&1&&c(0),i&2){let r=v(2);y(r.title)}}function Ll(i,e){}function Ul(i,e){if(i&1&&(a(0,"h3",3),w(1,Hl,1,1,"ng-template",null,4,ui)(3,Ll,0,0,"ng-template",5),s()),i&2){let r=Ae(2),t=v();u(3),g("ngTemplateOutlet",t.isTitleTemplate()?t.title:r)("ngTemplateOutletContext",t.context)}}var _s={animation:!0,transitionTimerDelayMs:5},vs=(()=>{let e=class e{constructor(){this.animation=_s.animation}};e.\u0275fac=function(n){return new(n||e)},e.\u0275prov=R({token:e,factory:e.\u0275fac,providedIn:"root"});let i=e;return i})();function jl(i){let{transitionDelay:e,transitionDuration:r}=window.getComputedStyle(i),t=parseFloat(e),n=parseFloat(r);return(t+n)*1e3}function Ro(i){return typeof i=="string"}function Ao(i){return i!=null}function Gl(i){return i&&i.then}function $l(i,e){return!e||typeof i.closest>"u"?null:i.closest(e)}function bs(i){return(i||document.body).getBoundingClientRect()}function zl(i){return e=>new Qo(r=>{let t=l=>i.run(()=>r.next(l)),n=l=>i.run(()=>r.error(l)),o=()=>i.run(()=>r.complete());return e.subscribe({next:t,error:n,complete:o})})}var Wl=()=>{},{transitionTimerDelayMs:ql}=_s,Fi=new Map,St=(i,e,r,t)=>{let n=t.context||{},o=Fi.get(e);if(o)switch(t.runningTransition){case"continue":return Yo;case"stop":i.run(()=>o.transition$.complete()),n=Object.assign(o.context,n),Fi.delete(e)}let l=r(e,t.animation,n)||Wl;if(!t.animation||window.getComputedStyle(e).transitionProperty==="none")return i.run(()=>l()),ri(void 0).pipe(zl(i));let d=new mt,h=new mt,_=d.pipe(ir(!0));Fi.set(e,{transition$:d,complete:()=>{h.next(),h.complete()},context:n});let b=jl(e);return i.runOutsideAngular(()=>{let D=Ye(e,"transitionend").pipe(Te(_),zt(({target:M})=>M===e)),x=er(b+ql).pipe(Te(_));Ki(x,D,h).pipe(Te(_)).subscribe(()=>{Fi.delete(e),i.run(()=>{l(),d.next(),d.complete()})})}),d.asObservable()};var ys=(()=>{let e=class e{};e.\u0275fac=function(n){return new(n||e)},e.\u0275mod=ee({type:e}),e.\u0275inj=X({});let i=e;return i})();var Cs=(()=>{let e=class e{};e.\u0275fac=function(n){return new(n||e)},e.\u0275mod=ee({type:e}),e.\u0275inj=X({});let i=e;return i})();var Es=(()=>{let e=class e{};e.\u0275fac=function(n){return new(n||e)},e.\u0275mod=ee({type:e}),e.\u0275inj=X({});let i=e;return i})(),Ms=(()=>{let e=class e{};e.\u0275fac=function(n){return new(n||e)},e.\u0275mod=ee({type:e}),e.\u0275inj=X({});let i=e;return i})();var Vi=function(i){return i[i.Tab=9]="Tab",i[i.Enter=13]="Enter",i[i.Escape=27]="Escape",i[i.Space=32]="Space",i[i.PageUp=33]="PageUp",i[i.PageDown=34]="PageDown",i[i.End=35]="End",i[i.Home=36]="Home",i[i.ArrowLeft=37]="ArrowLeft",i[i.ArrowUp=38]="ArrowUp",i[i.ArrowRight=39]="ArrowRight",i[i.ArrowDown=40]="ArrowDown",i}(Vi||{});var Ni=(i,e)=>e?e.some(r=>r.contains(i)):!1,ps=(i,e)=>!e||$l(i,e)!=null,Jl=(()=>{let i=()=>/iPad|iPhone|iPod/.test(navigator.userAgent)||/Macintosh/.test(navigator.userAgent)&&navigator.maxTouchPoints&&navigator.maxTouchPoints>2,e=()=>/Android/.test(navigator.userAgent);return typeof navigator<"u"?!!navigator.userAgent&&(i()||e()):!1})(),Ql=i=>Jl?()=>setTimeout(()=>i(),100):i;function Yl(i,e,r,t,n,o,l,d){r&&i.runOutsideAngular(Ql(()=>{let h=x=>{let M=x.target;return x.button===2||Ni(M,l)?!1:r==="inside"?Ni(M,o)&&ps(M,d):r==="outside"?!Ni(M,o):ps(M,d)||!Ni(M,o)},_=Ye(e,"keydown").pipe(Te(n),zt(x=>x.which===Vi.Escape),un(x=>x.preventDefault())),b=Ye(e,"mousedown").pipe(Tt(h),Te(n)),D=Ye(e,"mouseup").pipe(ai(b),zt(([x,M])=>M),nr(0),Te(n));Ki([_.pipe(Tt(x=>0)),D.pipe(Tt(x=>1))]).subscribe(x=>i.run(()=>t(x)))}))}var Kl=["a[href]","button:not([disabled])",'input:not([disabled]):not([type="hidden"])',"select:not([disabled])","textarea:not([disabled])","[contenteditable]",'[tabindex]:not([tabindex="-1"])'].join(", ");function ws(i){let e=Array.from(i.querySelectorAll(Kl)).filter(r=>r.tabIndex!==-1);return[e[0],e[e.length-1]]}var Zl=(i,e,r,t=!1)=>{i.runOutsideAngular(()=>{let n=Ye(e,"focusin").pipe(Te(r),Tt(o=>o.target));Ye(e,"keydown").pipe(Te(r),zt(o=>o.which===Vi.Tab),ai(n)).subscribe(([o,l])=>{let[d,h]=ws(e);(l===d||l===e)&&o.shiftKey&&(h.focus(),o.preventDefault()),l===h&&!o.shiftKey&&(d.focus(),o.preventDefault())}),t&&Ye(e,"click").pipe(Te(r),ai(n),Tt(o=>o[1])).subscribe(o=>o.focus())})},Xl=(()=>{let e=class e{constructor(){this._element=A(K).documentElement}isRTL(){return(this._element.getAttribute("dir")||"").toLowerCase()==="rtl"}};e.\u0275fac=function(n){return new(n||e)},e.\u0275prov=R({token:e,factory:e.\u0275fac,providedIn:"root"});let i=e;return i})(),ec=/\s+/,tc=/  +/gi,nc={top:["top"],bottom:["bottom"],start:["left","right"],left:["left"],end:["right","left"],right:["right"],"top-start":["top-start","top-end"],"top-left":["top-start"],"top-end":["top-end","top-start"],"top-right":["top-end"],"bottom-start":["bottom-start","bottom-end"],"bottom-left":["bottom-start"],"bottom-end":["bottom-end","bottom-start"],"bottom-right":["bottom-end"],"start-top":["left-start","right-start"],"left-top":["left-start"],"start-bottom":["left-end","right-end"],"left-bottom":["left-end"],"end-top":["right-start","left-start"],"right-top":["right-start"],"end-bottom":["right-end","left-end"],"right-bottom":["right-end"]};function ic(i,e){let[r,t]=nc[i];return e&&t||r}var oc=/^left/,rc=/^right/,sc=/^start/,ac=/^end/;function lc(i,e){let[r,t]=e.split("-"),n=r.replace(oc,"start").replace(rc,"end"),o=[n];if(t){let l=t;(r==="left"||r==="right")&&(l=l.replace(sc,"top").replace(ac,"bottom")),o.push(`${n}-${l}`)}return i&&(o=o.map(l=>`${i}-${l}`)),o.join(" ")}function ms({placement:i,baseClass:e},r){let t=Array.isArray(i)?i:i.split(ec),n=["top","bottom","start","end","top-start","top-end","bottom-start","bottom-end","start-top","start-bottom","end-top","end-bottom"],o=t.findIndex(_=>_==="auto");o>=0&&n.forEach(function(_){t.find(b=>b.search("^"+_)!==-1)==null&&t.splice(o++,1,_)});let l=t.map(_=>ic(_,r.isRTL()));return{placement:l.shift(),modifiers:[{name:"bootstrapClasses",enabled:!!e,phase:"write",fn({state:_}){let b=new RegExp(e+"(-[a-z]+)*","gi"),D=_.elements.popper,x=_.placement,M=D.className;M=M.replace(b,""),M+=` ${lc(e,x)}`,M=M.trim().replace(tc," "),D.className=M}},Co,wo,fo,{enabled:!0,name:"flip",options:{fallbackPlacements:l}},{enabled:!0,name:"preventOverflow",phase:"main",fn:function(){}}]}}function gs(i){return i}function cc(){let i=A(Xl),e=null;return{createPopper(r){if(!e){let n=(r.updatePopperOptions||gs)(ms(r,i));e=To(r.hostElement,r.targetElement,n)}},update(){e&&e.update()},setOptions(r){if(e){let n=(r.updatePopperOptions||gs)(ms(r,i));e.setOptions(n)}},destroy(){e&&(e.destroy(),e=null)}}}function dc(i){return e=>(e.modifiers.push(Eo,{name:"offset",options:{offset:()=>i}}),e)}var yg=new Date(1882,10,12),Cg=new Date(2174,10,25);var Eg=1e3*60*60*24;var Vo=1080,uc=24*Vo,hc=12*Vo+793,Mg=29*uc+hc,wg=11*Vo+204;var xs=(()=>{let e=class e{};e.\u0275fac=function(n){return new(n||e)},e.\u0275mod=ee({type:e}),e.\u0275inj=X({});let i=e;return i})();var Os=(()=>{let e=class e{};e.\u0275fac=function(n){return new(n||e)},e.\u0275mod=ee({type:e}),e.\u0275inj=X({});let i=e;return i})(),pc=(()=>{let e=class e{constructor(){this._ngbConfig=A(vs),this.backdrop=!0,this.fullscreen=!1,this.keyboard=!0}get animation(){return this._animation??this._ngbConfig.animation}set animation(t){this._animation=t}};e.\u0275fac=function(n){return new(n||e)},e.\u0275prov=R({token:e,factory:e.\u0275fac,providedIn:"root"});let i=e;return i})(),Pt=class{constructor(e,r,t){this.nodes=e,this.viewRef=r,this.componentRef=t}},Io=class{constructor(e){this._componentType=e,this._windowRef=null,this._contentRef=null,this._document=A(K),this._applicationRef=A(no),this._injector=A(hn),this._viewContainerRef=A(rr),this._ngZone=A(pn)}open(e,r,t=!1){this._windowRef||(this._contentRef=this._getContentRef(e,r),this._windowRef=this._viewContainerRef.createComponent(this._componentType,{injector:this._injector,projectableNodes:this._contentRef.nodes}));let{nativeElement:n}=this._windowRef.location,o=this._ngZone.onStable.pipe(dn(1),Zo(()=>St(this._ngZone,n,({classList:l})=>l.add("show"),{animation:t,runningTransition:"continue"})));return{windowRef:this._windowRef,transition$:o}}close(e=!1){return this._windowRef?St(this._ngZone,this._windowRef.location.nativeElement,({classList:r})=>r.remove("show"),{animation:e,runningTransition:"stop"}).pipe(un(()=>{this._windowRef&&(this._viewContainerRef.remove(this._viewContainerRef.indexOf(this._windowRef.hostView)),this._windowRef=null),this._contentRef?.viewRef&&(this._applicationRef.detachView(this._contentRef.viewRef),this._contentRef.viewRef.destroy(),this._contentRef=null)})):ri(void 0)}_getContentRef(e,r){if(e)if(e instanceof di){let t=e.createEmbeddedView(r);return this._applicationRef.attachView(t),new Pt([t.rootNodes],t)}else return new Pt([[this._document.createTextNode(`${e}`)]]);else return new Pt([])}},mc=(()=>{let e=class e{constructor(){this._document=A(K)}hide(){let t=Math.abs(window.innerWidth-this._document.documentElement.clientWidth),n=this._document.body,o=n.style,{overflow:l,paddingRight:d}=o;if(t>0){let h=parseFloat(window.getComputedStyle(n).paddingRight);o.paddingRight=`${h+t}px`}return o.overflow="hidden",()=>{t>0&&(o.paddingRight=d),o.overflow=l}}};e.\u0275fac=function(n){return new(n||e)},e.\u0275prov=R({token:e,factory:e.\u0275fac,providedIn:"root"});let i=e;return i})(),gc=(()=>{let e=class e{constructor(){this._nativeElement=A(yt).nativeElement,this._zone=A(pn)}ngOnInit(){this._zone.onStable.asObservable().pipe(dn(1)).subscribe(()=>{St(this._zone,this._nativeElement,(t,n)=>{n&&bs(t),t.classList.add("show")},{animation:this.animation,runningTransition:"continue"})})}hide(){return St(this._zone,this._nativeElement,({classList:t})=>t.remove("show"),{animation:this.animation,runningTransition:"stop"})}};e.\u0275fac=function(n){return new(n||e)},e.\u0275cmp=O({type:e,selectors:[["ngb-modal-backdrop"]],hostAttrs:[2,"z-index","1055"],hostVars:6,hostBindings:function(n,o){n&2&&(In("modal-backdrop"+(o.backdropClass?" "+o.backdropClass:"")),J("show",!o.animation)("fade",o.animation))},inputs:{animation:"animation",backdropClass:"backdropClass"},standalone:!0,features:[k],decls:0,vars:0,template:function(n,o){},encapsulation:2});let i=e;return i})(),Ri=class{update(e){}close(e){}dismiss(e){}},fc=["animation","ariaLabelledBy","ariaDescribedBy","backdrop","centered","fullscreen","keyboard","scrollable","size","windowClass","modalDialogClass"],_c=["animation","backdropClass"],Fo=class{_applyWindowOptions(e,r){fc.forEach(t=>{Ao(r[t])&&(e[t]=r[t])})}_applyBackdropOptions(e,r){_c.forEach(t=>{Ao(r[t])&&(e[t]=r[t])})}update(e){this._applyWindowOptions(this._windowCmptRef.instance,e),this._backdropCmptRef&&this._backdropCmptRef.instance&&this._applyBackdropOptions(this._backdropCmptRef.instance,e)}get componentInstance(){if(this._contentRef&&this._contentRef.componentRef)return this._contentRef.componentRef.instance}get closed(){return this._closed.asObservable().pipe(Te(this._hidden))}get dismissed(){return this._dismissed.asObservable().pipe(Te(this._hidden))}get hidden(){return this._hidden.asObservable()}get shown(){return this._windowCmptRef.instance.shown.asObservable()}constructor(e,r,t,n){this._windowCmptRef=e,this._contentRef=r,this._backdropCmptRef=t,this._beforeDismiss=n,this._closed=new mt,this._dismissed=new mt,this._hidden=new mt,e.instance.dismissEvent.subscribe(o=>{this.dismiss(o)}),this.result=new Promise((o,l)=>{this._resolve=o,this._reject=l}),this.result.then(null,()=>{})}close(e){this._windowCmptRef&&(this._closed.next(e),this._resolve(e),this._removeModalElements())}_dismiss(e){this._dismissed.next(e),this._reject(e),this._removeModalElements()}dismiss(e){if(this._windowCmptRef)if(!this._beforeDismiss)this._dismiss(e);else{let r=this._beforeDismiss();Gl(r)?r.then(t=>{t!==!1&&this._dismiss(e)},()=>{}):r!==!1&&this._dismiss(e)}}_removeModalElements(){let e=this._windowCmptRef.instance.hide(),r=this._backdropCmptRef?this._backdropCmptRef.instance.hide():ri(void 0);e.subscribe(()=>{let{nativeElement:t}=this._windowCmptRef.location;t.parentNode.removeChild(t),this._windowCmptRef.destroy(),this._contentRef&&this._contentRef.viewRef&&this._contentRef.viewRef.destroy(),this._windowCmptRef=null,this._contentRef=null}),r.subscribe(()=>{if(this._backdropCmptRef){let{nativeElement:t}=this._backdropCmptRef.location;t.parentNode.removeChild(t),this._backdropCmptRef.destroy(),this._backdropCmptRef=null}}),si(e,r).subscribe(()=>{this._hidden.next(),this._hidden.complete()})}},No=function(i){return i[i.BACKDROP_CLICK=0]="BACKDROP_CLICK",i[i.ESC=1]="ESC",i}(No||{}),vc=(()=>{let e=class e{constructor(){this._document=A(K),this._elRef=A(yt),this._zone=A(pn),this._closed$=new mt,this._elWithFocus=null,this.backdrop=!0,this.keyboard=!0,this.dismissEvent=new Ze,this.shown=new mt,this.hidden=new mt}get fullscreenClass(){return this.fullscreen===!0?" modal-fullscreen":Ro(this.fullscreen)?` modal-fullscreen-${this.fullscreen}-down`:""}dismiss(t){this.dismissEvent.emit(t)}ngOnInit(){this._elWithFocus=this._document.activeElement,this._zone.onStable.asObservable().pipe(dn(1)).subscribe(()=>{this._show()})}ngOnDestroy(){this._disableEventHandling()}hide(){let{nativeElement:t}=this._elRef,n={animation:this.animation,runningTransition:"stop"},o=St(this._zone,t,()=>t.classList.remove("show"),n),l=St(this._zone,this._dialogEl.nativeElement,()=>{},n),d=si(o,l);return d.subscribe(()=>{this.hidden.next(),this.hidden.complete()}),this._disableEventHandling(),this._restoreFocus(),d}_show(){let t={animation:this.animation,runningTransition:"continue"},n=St(this._zone,this._elRef.nativeElement,(l,d)=>{d&&bs(l),l.classList.add("show")},t),o=St(this._zone,this._dialogEl.nativeElement,()=>{},t);si(n,o).subscribe(()=>{this.shown.next(),this.shown.complete()}),this._enableEventHandling(),this._setFocus()}_enableEventHandling(){let{nativeElement:t}=this._elRef;this._zone.runOutsideAngular(()=>{Ye(t,"keydown").pipe(Te(this._closed$),zt(o=>o.which===Vi.Escape)).subscribe(o=>{this.keyboard?requestAnimationFrame(()=>{o.defaultPrevented||this._zone.run(()=>this.dismiss(No.ESC))}):this.backdrop==="static"&&this._bumpBackdrop()});let n=!1;Ye(this._dialogEl.nativeElement,"mousedown").pipe(Te(this._closed$),un(()=>n=!1),or(()=>Ye(t,"mouseup").pipe(Te(this._closed$),dn(1))),zt(({target:o})=>t===o)).subscribe(()=>{n=!0}),Ye(t,"click").pipe(Te(this._closed$)).subscribe(({target:o})=>{t===o&&(this.backdrop==="static"?this._bumpBackdrop():this.backdrop===!0&&!n&&this._zone.run(()=>this.dismiss(No.BACKDROP_CLICK))),n=!1})})}_disableEventHandling(){this._closed$.next()}_setFocus(){let{nativeElement:t}=this._elRef;if(!t.contains(document.activeElement)){let n=t.querySelector("[ngbAutofocus]"),o=ws(t)[0];(n||o||t).focus()}}_restoreFocus(){let t=this._document.body,n=this._elWithFocus,o;n&&n.focus&&t.contains(n)?o=n:o=t,this._zone.runOutsideAngular(()=>{setTimeout(()=>o.focus()),this._elWithFocus=null})}_bumpBackdrop(){this.backdrop==="static"&&St(this._zone,this._elRef.nativeElement,({classList:t})=>(t.add("modal-static"),()=>t.remove("modal-static")),{animation:this.animation,runningTransition:"continue"})}};e.\u0275fac=function(n){return new(n||e)},e.\u0275cmp=O({type:e,selectors:[["ngb-modal-window"]],viewQuery:function(n,o){if(n&1&&_n(Bl,7),n&2){let l;fn(l=vn())&&(o._dialogEl=l.first)}},hostAttrs:["role","dialog","tabindex","-1"],hostVars:7,hostBindings:function(n,o){n&2&&(mn("aria-modal",!0)("aria-labelledby",o.ariaLabelledBy)("aria-describedby",o.ariaDescribedBy),In("modal d-block"+(o.windowClass?" "+o.windowClass:"")),J("fade",o.animation))},inputs:{animation:"animation",ariaLabelledBy:"ariaLabelledBy",ariaDescribedBy:"ariaDescribedBy",backdrop:"backdrop",centered:"centered",fullscreen:"fullscreen",keyboard:"keyboard",scrollable:"scrollable",size:"size",windowClass:"windowClass",modalDialogClass:"modalDialogClass"},outputs:{dismissEvent:"dismiss"},standalone:!0,features:[k],ngContentSelectors:fs,decls:4,vars:2,consts:[["role","document"],["dialog",""],[1,"modal-content"]],template:function(n,o){n&1&&(eo(),a(0,"div",0,1)(2,"div",2),to(3),s()()),n&2&&In("modal-dialog"+(o.size?" modal-"+o.size:"")+(o.centered?" modal-dialog-centered":"")+o.fullscreenClass+(o.scrollable?" modal-dialog-scrollable":"")+(o.modalDialogClass?" "+o.modalDialogClass:""))},styles:[`ngb-modal-window .component-host-scrollable{display:flex;flex-direction:column;overflow:hidden}
`],encapsulation:2});let i=e;return i})(),bc=(()=>{let e=class e{constructor(){this._applicationRef=A(no),this._injector=A(hn),this._environmentInjector=A(Xi),this._document=A(K),this._scrollBar=A(mc),this._activeWindowCmptHasChanged=new mt,this._ariaHiddenValues=new Map,this._scrollBarRestoreFn=null,this._modalRefs=[],this._windowCmpts=[],this._activeInstances=new Ze;let t=A(pn);this._activeWindowCmptHasChanged.subscribe(()=>{if(this._windowCmpts.length){let n=this._windowCmpts[this._windowCmpts.length-1];Zl(t,n.location.nativeElement,this._activeWindowCmptHasChanged),this._revertAriaHidden(),this._setAriaHidden(n.location.nativeElement)}})}_restoreScrollBar(){let t=this._scrollBarRestoreFn;t&&(this._scrollBarRestoreFn=null,t())}_hideScrollBar(){this._scrollBarRestoreFn||(this._scrollBarRestoreFn=this._scrollBar.hide())}open(t,n,o){let l=o.container instanceof HTMLElement?o.container:Ao(o.container)?this._document.querySelector(o.container):this._document.body;if(!l)throw new Error(`The specified modal container "${o.container||"body"}" was not found in the DOM.`);this._hideScrollBar();let d=new Ri;t=o.injector||t;let h=t.get(Xi,null)||this._environmentInjector,_=this._getContentRef(t,h,n,d,o),b=o.backdrop!==!1?this._attachBackdrop(l):void 0,D=this._attachWindowComponent(l,_.nodes),x=new Fo(D,_,b,o.beforeDismiss);return this._registerModalRef(x),this._registerWindowCmpt(D),x.hidden.pipe(dn(1)).subscribe(()=>Promise.resolve(!0).then(()=>{this._modalRefs.length||(this._document.body.classList.remove("modal-open"),this._restoreScrollBar(),this._revertAriaHidden())})),d.close=M=>{x.close(M)},d.dismiss=M=>{x.dismiss(M)},d.update=M=>{x.update(M)},x.update(o),this._modalRefs.length===1&&this._document.body.classList.add("modal-open"),b&&b.instance&&b.changeDetectorRef.detectChanges(),D.changeDetectorRef.detectChanges(),x}get activeInstances(){return this._activeInstances}dismissAll(t){this._modalRefs.forEach(n=>n.dismiss(t))}hasOpenModals(){return this._modalRefs.length>0}_attachBackdrop(t){let n=hi(gc,{environmentInjector:this._applicationRef.injector,elementInjector:this._injector});return this._applicationRef.attachView(n.hostView),t.appendChild(n.location.nativeElement),n}_attachWindowComponent(t,n){let o=hi(vc,{environmentInjector:this._applicationRef.injector,elementInjector:this._injector,projectableNodes:n});return this._applicationRef.attachView(o.hostView),t.appendChild(o.location.nativeElement),o}_getContentRef(t,n,o,l,d){return o?o instanceof di?this._createFromTemplateRef(o,l):Ro(o)?this._createFromString(o):this._createFromComponent(t,n,o,l,d):new Pt([])}_createFromTemplateRef(t,n){let o={$implicit:n,close(d){n.close(d)},dismiss(d){n.dismiss(d)}},l=t.createEmbeddedView(o);return this._applicationRef.attachView(l),new Pt([l.rootNodes],l)}_createFromString(t){let n=this._document.createTextNode(`${t}`);return new Pt([[n]])}_createFromComponent(t,n,o,l,d){let h=hn.create({providers:[{provide:Ri,useValue:l}],parent:t}),_=hi(o,{environmentInjector:n,elementInjector:h}),b=_.location.nativeElement;return d.scrollable&&b.classList.add("component-host-scrollable"),this._applicationRef.attachView(_.hostView),new Pt([[b]],_.hostView,_)}_setAriaHidden(t){let n=t.parentElement;n&&t!==this._document.body&&(Array.from(n.children).forEach(o=>{o!==t&&o.nodeName!=="SCRIPT"&&(this._ariaHiddenValues.set(o,o.getAttribute("aria-hidden")),o.setAttribute("aria-hidden","true"))}),this._setAriaHidden(n))}_revertAriaHidden(){this._ariaHiddenValues.forEach((t,n)=>{t?n.setAttribute("aria-hidden",t):n.removeAttribute("aria-hidden")}),this._ariaHiddenValues.clear()}_registerModalRef(t){let n=()=>{let o=this._modalRefs.indexOf(t);o>-1&&(this._modalRefs.splice(o,1),this._activeInstances.emit(this._modalRefs))};this._modalRefs.push(t),this._activeInstances.emit(this._modalRefs),t.result.then(n,n)}_registerWindowCmpt(t){this._windowCmpts.push(t),this._activeWindowCmptHasChanged.next(),t.onDestroy(()=>{let n=this._windowCmpts.indexOf(t);n>-1&&(this._windowCmpts.splice(n,1),this._activeWindowCmptHasChanged.next())})}};e.\u0275fac=function(n){return new(n||e)},e.\u0275prov=R({token:e,factory:e.\u0275fac,providedIn:"root"});let i=e;return i})(),yc=(()=>{let e=class e{constructor(){this._injector=A(hn),this._modalStack=A(bc),this._config=A(pc)}open(t,n={}){let o=$(me($({},this._config),{animation:this._config.animation}),n);return this._modalStack.open(this._injector,t,o)}get activeInstances(){return this._modalStack.activeInstances}dismissAll(t){this._modalStack.dismissAll(t)}hasOpenModals(){return this._modalStack.hasOpenModals()}};e.\u0275fac=function(n){return new(n||e)},e.\u0275prov=R({token:e,factory:e.\u0275fac,providedIn:"root"});let i=e;return i})(),ks=(()=>{let e=class e{};e.\u0275fac=function(n){return new(n||e)},e.\u0275mod=ee({type:e}),e.\u0275inj=X({providers:[yc]});let i=e;return i})();var Ss=(()=>{let e=class e{};e.\u0275fac=function(n){return new(n||e)},e.\u0275mod=ee({type:e}),e.\u0275inj=X({});let i=e;return i})();var Ps=(()=>{let e=class e{};e.\u0275fac=function(n){return new(n||e)},e.\u0275mod=ee({type:e}),e.\u0275inj=X({});let i=e;return i})(),Cc={hover:["mouseenter","mouseleave"],focus:["focusin","focusout"]};function Ec(i){let e=(i||"").trim();if(e.length===0)return[];let r=e.split(/\s+/).map(n=>n.split(":")).map(n=>Cc[n[0]]||n),t=r.filter(n=>n.includes("manual"));if(t.length>1)throw"Triggers parse error: only one manual trigger is allowed";if(t.length===1&&r.length>1)throw"Triggers parse error: manual trigger can't be mixed with other triggers";return t.length?[]:r}function Mc(i,e,r,t,n,o=0,l=0){let d=Ec(e);if(d.length===0)return()=>{};let h=new Set,_=[],b;function D(M,L){i.addEventListener(M,L),_.push(()=>i.removeEventListener(M,L))}function x(M,L){clearTimeout(b),L>0?b=setTimeout(M,L):M()}for(let[M,L]of d)L?(D(M,()=>{h.add(M),x(()=>h.size>0&&t(),o)}),D(L,()=>{h.delete(M),x(()=>h.size===0&&n(),l)})):D(M,()=>r()?x(n,l):x(t,o));return()=>_.forEach(M=>M())}var wc=(()=>{let e=class e{constructor(){this._ngbConfig=A(vs),this.autoClose=!0,this.placement="auto",this.popperOptions=t=>t,this.triggers="click",this.disablePopover=!1,this.openDelay=0,this.closeDelay=0}get animation(){return this._animation??this._ngbConfig.animation}set animation(t){this._animation=t}};e.\u0275fac=function(n){return new(n||e)},e.\u0275prov=R({token:e,factory:e.\u0275fac,providedIn:"root"});let i=e;return i})(),xc=0,Oc=(()=>{let e=class e{isTitleTemplate(){return this.title instanceof di}};e.\u0275fac=function(n){return new(n||e)},e.\u0275cmp=O({type:e,selectors:[["ngb-popover-window"]],hostAttrs:["role","tooltip",2,"position","absolute"],hostVars:5,hostBindings:function(n,o){n&2&&(sr("id",o.id),In("popover"+(o.popoverClass?" "+o.popoverClass:"")),J("fade",o.animation))},inputs:{animation:"animation",title:"title",id:"id",popoverClass:"popoverClass",context:"context"},standalone:!0,features:[k],ngContentSelectors:fs,decls:4,vars:1,consts:[["data-popper-arrow","",1,"popover-arrow"],["class","popover-header"],[1,"popover-body"],[1,"popover-header"],["simpleTitle",""],[3,"ngTemplateOutlet","ngTemplateOutletContext"]],template:function(n,o){n&1&&(eo(),f(0,"div",0),w(1,Ul,4,2,"h3",1),a(2,"div",2),to(3),s()),n&2&&(u(1),ne(1,o.title?1:-1))},dependencies:[dr],encapsulation:2,changeDetection:0});let i=e;return i})(),Ds=(()=>{let e=class e{constructor(){this._config=A(wc),this.animation=this._config.animation,this.autoClose=this._config.autoClose,this.placement=this._config.placement,this.popperOptions=this._config.popperOptions,this.triggers=this._config.triggers,this.container=this._config.container,this.disablePopover=this._config.disablePopover,this.popoverClass=this._config.popoverClass,this.openDelay=this._config.openDelay,this.closeDelay=this._config.closeDelay,this.shown=new Ze,this.hidden=new Ze,this._nativeElement=A(yt).nativeElement,this._ngZone=A(pn),this._document=A(K),this._changeDetector=A(An),this._ngbPopoverWindowId=`ngb-popover-${xc++}`,this._popupService=new Io(Oc),this._windowRef=null,this._positioning=cc()}open(t){if(!this._windowRef&&!this._isDisabled()){let{windowRef:n,transition$:o}=this._popupService.open(this.ngbPopover,t??this.popoverContext,this.animation);this._windowRef=n,this._windowRef.setInput("animation",this.animation),this._windowRef.setInput("title",this.popoverTitle),this._windowRef.setInput("context",t??this.popoverContext),this._windowRef.setInput("popoverClass",this.popoverClass),this._windowRef.setInput("id",this._ngbPopoverWindowId),this._getPositionTargetElement().setAttribute("aria-describedby",this._ngbPopoverWindowId),this.container==="body"&&this._document.body.appendChild(this._windowRef.location.nativeElement),this._windowRef.changeDetectorRef.detectChanges(),this._windowRef.changeDetectorRef.markForCheck(),this._ngZone.runOutsideAngular(()=>{this._positioning.createPopper({hostElement:this._getPositionTargetElement(),targetElement:this._windowRef.location.nativeElement,placement:this.placement,appendToBody:this.container==="body",baseClass:"bs-popover",updatePopperOptions:l=>this.popperOptions(dc([0,8])(l))}),Promise.resolve().then(()=>{this._positioning.update(),this._zoneSubscription=this._ngZone.onStable.subscribe(()=>this._positioning.update())})}),Yl(this._ngZone,this._document,this.autoClose,()=>this.close(),this.hidden,[this._windowRef.location.nativeElement]),o.subscribe(()=>this.shown.emit())}}close(t=this.animation){this._windowRef&&(this._getPositionTargetElement().removeAttribute("aria-describedby"),this._popupService.close(t).subscribe(()=>{this._windowRef=null,this._positioning.destroy(),this._zoneSubscription?.unsubscribe(),this.hidden.emit(),this._changeDetector.markForCheck()}))}toggle(){this._windowRef?this.close():this.open()}isOpen(){return this._windowRef!=null}ngOnInit(){this._unregisterListenersFn=Mc(this._nativeElement,this.triggers,this.isOpen.bind(this),this.open.bind(this),this.close.bind(this),+this.openDelay,+this.closeDelay)}ngOnChanges({ngbPopover:t,popoverTitle:n,disablePopover:o,popoverClass:l}){l&&this.isOpen()&&this._windowRef.setInput("popoverClass",l.currentValue),(t||n||o)&&this._isDisabled()&&this.close()}ngOnDestroy(){this.close(!1),this._unregisterListenersFn?.()}_isDisabled(){return this.disablePopover?!0:!this.ngbPopover&&!this.popoverTitle}_getPositionTargetElement(){return(Ro(this.positionTarget)?this._document.querySelector(this.positionTarget):this.positionTarget)||this._nativeElement}};e.\u0275fac=function(n){return new(n||e)},e.\u0275dir=ge({type:e,selectors:[["","ngbPopover",""]],inputs:{animation:"animation",autoClose:"autoClose",ngbPopover:"ngbPopover",popoverTitle:"popoverTitle",placement:"placement",popperOptions:"popperOptions",triggers:"triggers",positionTarget:"positionTarget",container:"container",disablePopover:"disablePopover",popoverClass:"popoverClass",popoverContext:"popoverContext",openDelay:"openDelay",closeDelay:"closeDelay"},outputs:{shown:"shown",hidden:"hidden"},exportAs:["ngbPopover"],standalone:!0,features:[Wt]});let i=e;return i})(),Ts=(()=>{let e=class e{};e.\u0275fac=function(n){return new(n||e)},e.\u0275mod=ee({type:e}),e.\u0275inj=X({});let i=e;return i})();var As=(()=>{let e=class e{};e.\u0275fac=function(n){return new(n||e)},e.\u0275mod=ee({type:e}),e.\u0275inj=X({});let i=e;return i})();var Is=(()=>{let e=class e{};e.\u0275fac=function(n){return new(n||e)},e.\u0275mod=ee({type:e}),e.\u0275inj=X({});let i=e;return i})();var Fs=(()=>{let e=class e{};e.\u0275fac=function(n){return new(n||e)},e.\u0275mod=ee({type:e}),e.\u0275inj=X({});let i=e;return i})();var Ns=(()=>{let e=class e{};e.\u0275fac=function(n){return new(n||e)},e.\u0275mod=ee({type:e}),e.\u0275inj=X({});let i=e;return i})();var Rs=(()=>{let e=class e{};e.\u0275fac=function(n){return new(n||e)},e.\u0275mod=ee({type:e}),e.\u0275inj=X({});let i=e;return i})();var Vs=(()=>{let e=class e{};e.\u0275fac=function(n){return new(n||e)},e.\u0275mod=ee({type:e}),e.\u0275inj=X({});let i=e;return i})();var xg=new ct("live announcer delay",{providedIn:"root",factory:()=>100});var Bs=(()=>{let e=class e{};e.\u0275fac=function(n){return new(n||e)},e.\u0275mod=ee({type:e}),e.\u0275inj=X({});let i=e;return i})();var Hs=(()=>{let e=class e{};e.\u0275fac=function(n){return new(n||e)},e.\u0275mod=ee({type:e}),e.\u0275inj=X({});let i=e;return i})(),kc=[ys,Cs,Es,Ms,xs,Os,ks,Ss,Hs,Ps,Ts,As,Is,Fs,Ns,Rs,Vs,Bs],Bi=(()=>{let e=class e{};e.\u0275fac=function(n){return new(n||e)},e.\u0275mod=ee({type:e}),e.\u0275inj=X({imports:[kc,ys,Cs,Es,Ms,xs,Os,ks,Ss,Hs,Ps,Ts,As,Is,Fs,Ns,Rs,Vs,Bs]});let i=e;return i})();var T={production:!1,apiBaseUrl:"http://localhost:8088/api/v1"};var Hi=(()=>{let e=class e{createHeaders(){return new It({"Content-Type":"application/json","Accept-Language":"vi"})}};e.\u0275fac=function(n){return new(n||e)},e.\u0275prov=R({token:e,factory:e.\u0275fac,providedIn:"root"});let i=e;return i})();var Pc=new ct("JWT_OPTIONS"),Us=(()=>{class i{constructor(r=null){this.tokenGetter=r&&r.tokenGetter||function(){}}urlBase64Decode(r){let t=r.replace(/-/g,"+").replace(/_/g,"/");switch(t.length%4){case 0:break;case 2:{t+="==";break}case 3:{t+="=";break}default:throw new Error("Illegal base64url string!")}return this.b64DecodeUnicode(t)}b64decode(r){let t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",n="";if(r=String(r).replace(/=+$/,""),r.length%4===1)throw new Error("'atob' failed: The string to be decoded is not correctly encoded.");for(let o=0,l,d,h=0;d=r.charAt(h++);~d&&(l=o%4?l*64+d:d,o++%4)?n+=String.fromCharCode(255&l>>(-2*o&6)):0)d=t.indexOf(d);return n}b64DecodeUnicode(r){return decodeURIComponent(Array.prototype.map.call(this.b64decode(r),t=>"%"+("00"+t.charCodeAt(0).toString(16)).slice(-2)).join(""))}decodeToken(r=this.tokenGetter()){return r instanceof Promise?r.then(t=>this._decodeToken(t)):this._decodeToken(r)}_decodeToken(r){if(!r||r==="")return null;let t=r.split(".");if(t.length!==3)throw new Error("The inspected token doesn't appear to be a JWT. Check to make sure it has three parts and see https://jwt.io for more.");let n=this.urlBase64Decode(t[1]);if(!n)throw new Error("Cannot decode the token.");return JSON.parse(n)}getTokenExpirationDate(r=this.tokenGetter()){return r instanceof Promise?r.then(t=>this._getTokenExpirationDate(t)):this._getTokenExpirationDate(r)}_getTokenExpirationDate(r){let t;if(t=this.decodeToken(r),!t||!t.hasOwnProperty("exp"))return null;let n=new Date(0);return n.setUTCSeconds(t.exp),n}isTokenExpired(r=this.tokenGetter(),t){return r instanceof Promise?r.then(n=>this._isTokenExpired(n,t)):this._isTokenExpired(r,t)}_isTokenExpired(r,t){if(!r||r==="")return!0;let n=this.getTokenExpirationDate(r);return t=t||0,n===null?!1:!(n.valueOf()>new Date().valueOf()+t*1e3)}getAuthScheme(r,t){return typeof r=="function"?r(t):r}}return i.\u0275fac=function(r){return new(r||i)(B(Pc))},i.\u0275prov=R({token:i,factory:i.\u0275fac}),i})();var q=(()=>{let e=class e{constructor(t){this.document=t,this.TOKEN_KEY="access_token",this.jwtHelperService=new Us,this.localStorage=t.defaultView?.localStorage}getToken(){return this.localStorage?.getItem(this.TOKEN_KEY)??""}getUserId(){let t=this.getToken();if(!t)return 0;let n=this.jwtHelperService.decodeToken(t);return"userId"in n?parseInt(n.userId):0}removeToken(){this.localStorage?.removeItem(this.TOKEN_KEY)}isTokenExpired(){return this.getToken()==null?!1:this.jwtHelperService.isTokenExpired(this.getToken())}setToken(t){this.localStorage?.setItem(this.TOKEN_KEY,t);let n=this.jwtHelperService.decodeToken(t);"userId"in n&&this.localStorage?.setItem("userId",String(n.userId))}getUserIdFromLocalStorage(){let t=this.localStorage?.getItem("user");return t?JSON.parse(t).id:0}signOut(){this.localStorage?.removeItem("accessToken"),this.localStorage?.removeItem("currentUser"),this.localStorage?.removeItem("currentEbookPage"),this.localStorage?.clear()}};e.\u0275fac=function(n){return new(n||e)(B(K))},e.\u0275prov=R({token:e,factory:e.\u0275fac,providedIn:"root"});let i=e;return i})();var re=(()=>{let e=class e{constructor(t,n,o,l){this.http=t,this.httpUtilService=n,this.tokenService=o,this.document=l,this.apiRegister=`${T.apiBaseUrl}/users/register`,this.apiLogin=`${T.apiBaseUrl}/users/login`,this.apiUserDetail=`${T.apiBaseUrl}/users/details`,this.apiUsers=`${T.apiBaseUrl}/users`,this.apiConfig={headers:this.httpUtilService.createHeaders()},this.localStorage=l.defaultView?.localStorage}getUserById(t){return this.http.get(`${this.apiUserDetail}/${t}`)}register(t){return this.http.post(this.apiRegister,t,this.apiConfig)}login(t){return this.http.post(this.apiLogin,t,this.apiConfig).pipe(un(n=>{n.token&&this.tokenService.setToken(n.token)}),cn(n=>{let o="\u0110\u0103ng nh\u1EADp kh\xF4ng th\xE0nh c\xF4ng. Vui l\xF2ng ki\u1EC3m tra th\xF4ng tin \u0111\u0103ng nh\u1EADp c\u1EE7a b\u1EA1n.";return n.error&&n.error.message&&(o=n.error.message),ln(()=>new Error(o))}))}getUserDetail(t){return this.http.post(this.apiUserDetail,{headers:new It({"Content-Type":"application/json",Authorization:`Bearer ${t}`})})}updateUserDetail(t,n){let o=this.getUserResponseFromLocalStorage();return this.http.put(`${this.apiUserDetail}/${o?.id}`,n,{headers:new It({"Content-Type":"application/json",Authorization:`Bearer ${t}`})})}saveUserResponseToLocalStorage(t){try{if(t==null||!t)return;let n=JSON.stringify(t);this.localStorage?.setItem("user",n),console.log("User response saved to local storage.")}catch(n){console.error("Error saving user response to local storage:",n)}}getUserResponseFromLocalStorage(){try{let t=this.localStorage?.getItem("user");if(t==null||t==null)return null;let n=JSON.parse(t);return console.log("User response retrieved from local storage."),n}catch(t){return console.error("Error retrieving user response from local storage:",t),null}}removeUserFromLocalStorage(){try{this.localStorage?.removeItem("user"),console.log("User data removed from local storage.")}catch(t){console.error("Error removing user data from local storage:",t)}}removeToken(){this.localStorage?.removeItem("token")}getUsers(t,n,o){return this.http.get(`${this.apiUsers}?keyword=${t}&page=${n}&limit=${o}`)}addUser(t){return this.http.post(this.apiUsers,t)}updateUser(t){return this.http.put(`${this.apiUsers}/${t.id}`,t)}blockOrEnableUser(t,n){return this.http.put(`${this.apiUsers}/block/${t}/${n?1:0}`,null)}getCurrentUserId(){return Number(this.localStorage?.getItem("userId"))||0}};e.\u0275fac=function(n){return new(n||e)(B(Fe),B(Hi),B(q),B(K))},e.\u0275prov=R({token:e,factory:e.\u0275fac,providedIn:"root"});let i=e;return i})();var bt=(()=>{let e=class e{constructor(t){this.document=t,this.cart=new Map,this.localStorage=t.defaultView?.localStorage,this.refreshCart()}refreshCart(){let t=this.localStorage?.getItem(this.getCartKey());t?this.cart=new Map(JSON.parse(t)):this.cart=new Map}getCartKey(){let t=this.localStorage?.getItem("user"),n=JSON.parse(t);debugger;return`cart:${n?.id??""}`}addToCart(t,n=1){debugger;this.cart.has(t)?this.cart.set(t,this.cart.get(t)+n):this.cart.set(t,n),this.saveCartToLocalStorage()}getCart(){return this.cart}saveCartToLocalStorage(){this.localStorage?.setItem(this.getCartKey(),JSON.stringify(Array.from(this.cart.entries())))}setCart(t){this.cart=t??new Map,this.saveCartToLocalStorage()}clearCart(){this.cart.clear(),this.saveCartToLocalStorage()}isProductInCart(t){return this.cart.has(t)}getTotalItemCount(){let t=0;return this.cart.forEach(n=>t+=n),t}};e.\u0275fac=function(n){return new(n||e)(B(K))},e.\u0275prov=R({token:e,factory:e.\u0275fac,providedIn:"root"});let i=e;return i})();var Ht=(()=>{let e=class e{constructor(t){this.document=t,this.love=new Map;let n=t.defaultView;n&&n.localStorage?this.localStorage=n.localStorage:(console.error("LocalStorage kh\xF4ng kh\u1EA3 d\u1EE5ng."),this.localStorage={getItem:()=>null,setItem:()=>{},removeItem:()=>{},clear:()=>{}}),this.refreshLove()}refreshLove(){let t=this.localStorage.getItem(this.getLoveKey());this.love=t?new Map(JSON.parse(t)):new Map}getLoveKey(){let t=this.localStorage.getItem("user");return`love:${(t?JSON.parse(t):{}).id??""}`}addToLove(t,n=1){this.love.set(t,(this.love.get(t)||0)+n),this.saveLoveToLocalStorage()}removeFromLove(t){this.love.delete(t),this.saveLoveToLocalStorage()}getLove(){return this.love}saveLoveToLocalStorage(){this.localStorage.setItem(this.getLoveKey(),JSON.stringify(Array.from(this.love.entries())))}setLove(t){this.love=t??new Map,this.saveLoveToLocalStorage()}clearLove(){this.love.clear(),this.saveLoveToLocalStorage()}isProductInLove(t){return this.love.has(t)}getTotalLoveItemCount(){let t=0;return this.love.forEach(n=>t+=n),t}};e.\u0275fac=function(n){return new(n||e)(B(K))},e.\u0275prov=R({token:e,factory:e.\u0275fac,providedIn:"root"});let i=e;return i})();function Dc(i,e){if(i&1&&(a(0,"span",21),c(1),s()),i&2){let r=v();u(1),y(r.loveItemCount)}}function Tc(i,e){if(i&1&&(a(0,"span",21),c(1),s()),i&2){let r=v();u(1),y(r.cartItemCount)}}function Ac(i,e){if(i&1){let r=P();a(0,"div",28)(1,"a",29),p("click",function(){C(r);let n=v(2);return E(n.handleItemClick(0))}),c(2,"T\xE0i kho\u1EA3n c\u1EE7a t\xF4i"),s(),a(3,"a",30),p("click",function(){C(r);let n=v(2);return E(n.handleItemClick(1))}),c(4,"\u0110\u01A1n mua"),s(),a(5,"a",31),p("click",function(){C(r);let n=v(2);return E(n.handleItemClick(2))}),c(6,"\u0110\u0103ng xu\u1EA5t"),s()()}}function Ic(i,e){if(i&1){let r=P();a(0,"li",8),Ct(1,22),a(2,"div",23)(3,"a",24),p("click",function(){C(r);let n=v();return E(n.setActiveNavItem(3))}),f(4,"img",25),s()(),a(5,"a",26),p("click",function(n){C(r);let o=v();return o.togglePopover(n),E(o.setActiveNavItem(4))}),c(6),s(),w(7,Ac,7,0,"ng-template",null,27,ui),Et(),s()}if(i&2){let r=Ae(8),t=v();u(1),g("placement","bottom"),u(4),g("ngbPopover",r),u(1),S(" Hi! ",t.userResponse.fullname," ")}}function Fc(i,e){i&1&&(a(0,"li",8)(1,"a",32),c(2,"\u0110\u0103ng nh\u1EADp"),s()())}var Nc=()=>({exact:!0}),se=(()=>{let e=class e{constructor(t,n,o,l,d,h){this.userService=t,this.tokenService=n,this.cartService=o,this.lovetService=l,this.router=d,this.document=h,this.isPopoverOpen=!1,this.showDropdown=!1,this.activeNavItem=0,this.isSearchBoxVisible=!1,this.cartItems=[],this.cart=new Map,this.cartItemCount=0,this.loveItemCount=0,this.localStorage=h.defaultView?.localStorage}ngOnInit(){this.userResponse=this.userService.getUserResponseFromLocalStorage(),this.cart=this.cartService.getCart();let t=Array.from(this.cart.keys());this.userResponse&&(this.updateCartItemCount(),this.updateLoveItemCount())}togglePopover(t){t.preventDefault(),this.isPopoverOpen=!this.isPopoverOpen}handleItemClick(t){t===0?this.router.navigate(["/user-profile"]):t===1?this.router.navigate(["/order-user"]):t===2&&(this.userService.removeUserFromLocalStorage(),this.tokenService.removeToken(),this.userResponse=this.userService.getUserResponseFromLocalStorage(),this.router.navigate(["/"]),location.reload()),this.isPopoverOpen=!1}setActiveNavItem(t){this.activeNavItem=t}toggleSearchBox(){this.isSearchBoxVisible=!this.isSearchBoxVisible}checklogin(){if(!this.tokenService.getUserId()){alert("B\u1EA1n c\u1EA7n \u0111\u0103ng nh\u1EADp.");return}}clickten1(){}updateCartItemCount(){this.cartItemCount=this.cartService.getTotalItemCount()}updateLoveItemCount(){this.loveItemCount=this.lovetService.getTotalLoveItemCount()}};e.\u0275fac=function(n){return new(n||e)(m(re),m(q),m(bt),m(Ht),m(I),m(K))},e.\u0275cmp=O({type:e,selectors:[["app-header"]],standalone:!0,features:[k],decls:38,vars:8,consts:[[1,"navbar","navbar-expand-lg","navbar-light","bg-dark"],[1,"container"],["href","#",1,"navbar-brand"],["src","assets/poster/anhbia.jpg","alt","\u1EA2nh B\xECa","width","50","height","50"],["type","button","data-bs-toggle","collapse","data-bs-target","#navbarNav","aria-controls","navbarNav","aria-expanded","false","aria-label","Toggle navigation",1,"navbar-toggler"],[1,"navbar-toggler-icon"],["id","navbarNav",1,"collapse","navbar-collapse"],[1,"navbar-nav"],[1,"nav-item"],["routerLink","/","routerLinkActive","active",1,"nav-link",3,"routerLinkActiveOptions"],["routerLink","/loves","routerLinkActive","active",1,"nav-link",3,"click"],[1,"hgi-solid","hgi-favourite"],["class","cart-count",4,"ngIf"],[1,"nav-item","dropdown",3,"mouseenter","mouseleave"],["routerLink","/@",1,"nav-link","dropdown-toggle","ten1-link",3,"click"],[1,"dropdown-menu"],["routerLink","/danh-muc-con-1",1,"dropdown-item"],["routerLink","/danh-muc-con-2",1,"dropdown-item"],["routerLink","/orders","routerLinkActive","active",1,"nav-link",3,"click"],[1,"fas","fa-shopping-cart","icon"],["class","nav-item",4,"ngIf"],[1,"cart-count"],["ngbPopover","T\xE0i kho\u1EA3n c\u1EE7a t\xF4i, \u0110\u01A1n mua, \u0110\u0103ng xu\u1EA5t","popoverTitle","User Actions","triggers","click",3,"placement"],[1,"notification"],["routerLink","/","routerLinkActive","active",1,"nav-link",3,"click"],["src","../assets/icon-notification.svg"],["routerLinkActive","active",1,"nav-link","user",3,"ngbPopover","click"],["popoverContent",""],[1,"popover-list"],["routerLink","/user-profile","routerLinkActive","active",1,"popover-item",3,"click"],["routerLink","/order-user","routerLinkActive","active",1,"popover-item",3,"click"],[1,"popover-item",3,"click"],["routerLink","/login","routerLinkActive","active",1,"nav-link","login"]],template:function(n,o){n&1&&(a(0,"header")(1,"nav",0)(2,"div",1)(3,"a",2),f(4,"img",3),s(),a(5,"button",4),f(6,"span",5),s(),a(7,"div",6)(8,"ul",7)(9,"li",8)(10,"a",9),c(11,"Trang ch\u1EE7"),s()(),a(12,"li",8)(13,"a",10),p("click",function(){return o.checklogin()}),f(14,"i",11),c(15,"Y\xEAu th\xEDch "),w(16,Dc,2,1,"span",12),s()(),a(17,"li",13),p("mouseenter",function(){return o.showDropdown=!0})("mouseleave",function(){return o.showDropdown=!1}),a(18,"a",14),p("click",function(){return o.clickten1()}),f(19,"i",11),c(20," t\xEAn 1 "),s(),a(21,"ul",15)(22,"li")(23,"a",16),c(24,"Danh m\u1EE5c con 1"),s()(),a(25,"li")(26,"a",17),c(27,"Danh m\u1EE5c con 2"),s()()()(),a(28,"li",8)(29,"a",18),p("click",function(){return o.checklogin()}),f(30,"i",19),c(31," Gi\u1ECF h\xE0ng "),w(32,Tc,2,1,"span",12),s()(),w(33,Ic,9,3,"li",20)(34,Fc,3,0,"li",20),s()()()()(),f(35,"br")(36,"br")(37,"br")),n&2&&(u(10),g("routerLinkActiveOptions",gn(7,Nc)),u(6),g("ngIf",o.loveItemCount>0),u(5),J("show",o.showDropdown),u(11),g("ngIf",o.cartItemCount>0),u(1),g("ngIf",o.userResponse),u(1),g("ngIf",!o.userResponse))},dependencies:[F,ue,Bi,Ds,et,Ft,mi],styles:['@charset "UTF-8";header[_ngcontent-%COMP%]{background-color:#0000;color:#adb2cb}.navbar[_ngcontent-%COMP%]{background-color:#0000!important}.navbar[_ngcontent-%COMP%]   .container[_ngcontent-%COMP%]{background-color:#ff060600!important}.navbar[_ngcontent-%COMP%]   .container[_ngcontent-%COMP%]   .navbar-brand[_ngcontent-%COMP%]{color:#fff}.navbar[_ngcontent-%COMP%]   .container[_ngcontent-%COMP%]   .navbar-nav[_ngcontent-%COMP%]   .nav-link[_ngcontent-%COMP%]{color:#fff;border-radius:30px;padding:8px 16px;font-size:18px;font-weight:700}.ten1-link[_ngcontent-%COMP%]{transition:background-color .3s ease;padding:10px;display:block}.nav-item.dropdown[_ngcontent-%COMP%]:hover   .ten1-link[_ngcontent-%COMP%]{background-color:#007bff;color:#fff}.dropdown-item[_ngcontent-%COMP%]{padding:10px;display:block;transition:background-color .3s ease}.dropdown-item[_ngcontent-%COMP%]:hover{background-color:#007bff;color:#fff}.nav-link[_ngcontent-%COMP%]{transition:background-color .3s ease,color .3s ease;display:block;padding:10px;color:#fff;border-radius:5px}.nav-link[_ngcontent-%COMP%]:hover{background-color:#007bff;color:#fff}.nav-link[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{margin-right:5px}.navbar[_ngcontent-%COMP%]   .container[_ngcontent-%COMP%]   .navbar-nav[_ngcontent-%COMP%]   .nav-link.active[_ngcontent-%COMP%]{background-color:#7f44ff!important;color:#fd2b2b!important}.nav-item.active[_ngcontent-%COMP%]   .nav-link[_ngcontent-%COMP%]{background-color:#7f44ff!important;color:#fff!important}.popover-list[_ngcontent-%COMP%]{padding:10px}.popover-body[_ngcontent-%COMP%]{padding:0}.popover-item[_ngcontent-%COMP%]{display:block;margin-bottom:5px;text-decoration:none;color:#333}.popover-item[_ngcontent-%COMP%]:hover{background-color:#f0f0f0;color:#7f44ff}.show[_ngcontent-%COMP%]{display:block;left:calc(50% + 25px)}.notification[_ngcontent-%COMP%]{position:absolute;top:50%;left:calc(50% + 275px);transform:translateY(-50%)}.login[_ngcontent-%COMP%], .user[_ngcontent-%COMP%]{position:absolute;top:50%;left:calc(50% + 320px);transform:translateY(-50%)}header[_ngcontent-%COMP%]{position:fixed;top:0;left:0;width:100%;z-index:1000;background-color:#0c413d;border-bottom:1px solid #0d503d}.cart-count[_ngcontent-%COMP%]{color:red}']});let i=e;return i})();var ae=(()=>{let e=class e{};e.\u0275fac=function(n){return new(n||e)},e.\u0275cmp=O({type:e,selectors:[["app-footer"]],standalone:!0,features:[k],decls:60,vars:0,consts:[[1,"site-footer"],[1,"container"],[1,"row"],[1,"col-sm-12","col-md-6"],[1,"text-justify"],[1,"col-xs-6","col-md-3"],[1,"footer-links"],["href","https://zalo.me/0335086156"],["href","#"],[1,"col-md-8","col-sm-6","col-xs-12"],[1,"copyright-text"],[1,"col-md-4","col-sm-6","col-xs-12"],[1,"social-icons"],["href","https://www.facebook.com/cihuy.ha",1,"facebook"],[1,"fa","fa-facebook"],["href","#",1,"twitter"],[1,"fa","fa-twitter"],["href","#",1,"dribbble"],[1,"fa","fa-dribbble"],["href","#",1,"linkedin"],[1,"fa","fa-linkedin"]],template:function(n,o){n&1&&(a(0,"footer",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"h6"),c(5,"About"),s(),a(6,"p",4),c(7,"Ebook kh\xF4ng ch\u1EC9 \u0111\xE1p \u1EE9ng nhu c\u1EA7u v\u1EC1 s\u1EF1 ti\u1EC7n l\u1EE3i m\xE0 c\xF2n mang l\u1EA1i tr\u1EA3i nghi\u1EC7m nghe s\xE1ch ch\u1EA5t l\u01B0\u1EE3ng cao. V\u1EDBi m\u1ED9t th\u01B0 vi\u1EC7n \u0111a d\u1EA1ng bao g\u1ED3m c\xE1c th\u1EC3 lo\u1EA1i t\u1EEB ti\u1EC3u thuy\u1EBFt h\u1EA5p d\u1EABn \u0111\u1EBFn s\xE1ch h\u1ECDc thu\u1EADt s\xE2u s\u1EAFc, trang web n\xE0y h\u01B0\u1EDBng \u0111\u1EBFn vi\u1EC7c cung c\u1EA5p m\u1ED9t n\u1EC1n t\u1EA3ng tr\u1EF1c tuy\u1EBFn linh ho\u1EA1t v\xE0 \u0111a chi\u1EC1u cho ng\u01B0\u1EDDi \u0111\u1ECDc m\u1ECDi l\u1EE9a tu\u1ED5i v\xE0 s\u1EDF th\xEDch. Ebook kh\xF4ng ch\u1EC9 l\xE0 m\u1ED9t c\u1EEDa h\xE0ng s\xE1ch tr\u1EF1c tuy\u1EBFn m\xE0 c\xF2n l\xE0 m\u1ED9t \u0111i\u1EC3m \u0111\u1EBFn v\u0103n h\xF3a \u0111a chi\u1EC1u, n\u01A1i m\xE0 m\u1ECDi ng\u01B0\u1EDDi c\xF3 th\u1EC3 k\u1EBFt n\u1ED1i, chia s\u1EBB v\xE0 kh\xE1m ph\xE1 th\u1EBF gi\u1EDBi th\xF4ng qua t\u1EEBng c\xE2u chuy\u1EC7n. "),s()(),a(8,"div",5)(9,"h6"),c(10,"CONTACT"),s(),a(11,"ul",6)(12,"li")(13,"a",7),c(14,"Phone: 0335086156"),s()(),a(15,"li")(16,"a",7),c(17,"Zalo: 0335086156"),s()()()(),a(18,"div",5)(19,"h6"),c(20,"Quick Links"),s(),a(21,"ul",6)(22,"li")(23,"a",8),c(24,"About Us"),s()(),a(25,"li")(26,"a",8),c(27,"Contact Us"),s()(),a(28,"li")(29,"a",8),c(30,"Contribute"),s()(),a(31,"li")(32,"a",8),c(33,"Privacy Policy"),s()(),a(34,"li")(35,"a",8),c(36,"Sitemap"),s()()()()(),f(37,"hr"),s(),a(38,"div",1)(39,"div",2)(40,"div",9)(41,"p",10),c(42,"Copyright \xA9 2024 All Rights Reserved by "),a(43,"a",8),c(44,"Ebook Weke"),s(),c(45,". "),s()(),a(46,"div",11)(47,"ul",12)(48,"li")(49,"a",13),f(50,"i",14),s()(),a(51,"li")(52,"a",15),f(53,"i",16),s()(),a(54,"li")(55,"a",17),f(56,"i",18),s()(),a(57,"li")(58,"a",19),f(59,"i",20),s()()()()()()())},styles:['@charset "UTF-8";.site-footer[_ngcontent-%COMP%]{background-color:#031610;padding:45px 0 20px;font-size:17px;line-height:24px;color:#737373}.site-footer[_ngcontent-%COMP%]   hr[_ngcontent-%COMP%]{border-top-color:#bbb;opacity:.5}.site-footer[_ngcontent-%COMP%]   hr.small[_ngcontent-%COMP%]{margin:20px 0}.site-footer[_ngcontent-%COMP%]   h6[_ngcontent-%COMP%]{color:#fff;font-size:16px;text-transform:uppercase;margin-top:5px;letter-spacing:2px}.site-footer[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{color:#737373;text-decoration:none}.site-footer[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{color:#36c;text-decoration:none}.footer-links[_ngcontent-%COMP%]{padding-left:0;list-style:none}.footer-links[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{display:block}.footer-links[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{color:#737373}.footer-links[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:active, .footer-links[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:focus, .footer-links[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{color:#36c;text-decoration:none}.footer-links.inline[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{display:inline-block}.site-footer[_ngcontent-%COMP%]   .social-icons[_ngcontent-%COMP%]{text-align:right}.site-footer[_ngcontent-%COMP%]   .social-icons[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{width:40px;height:40px;line-height:40px;margin-left:6px;margin-right:0;border-radius:100%;background-color:#33353d}.copyright-text[_ngcontent-%COMP%]{margin:0}@media (max-width: 991px){.site-footer[_ngcontent-%COMP%]   [class^=col-][_ngcontent-%COMP%]{margin-bottom:30px}}@media (max-width: 767px){.site-footer[_ngcontent-%COMP%]{padding-bottom:0}.site-footer[_ngcontent-%COMP%]   .copyright-text[_ngcontent-%COMP%], .site-footer[_ngcontent-%COMP%]   .social-icons[_ngcontent-%COMP%]{text-align:center}}.social-icons[_ngcontent-%COMP%]{padding-left:0;margin-bottom:0;list-style:none}.social-icons[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{display:inline-block;margin-bottom:4px}.social-icons[_ngcontent-%COMP%]   li.title[_ngcontent-%COMP%]{margin-right:15px;text-transform:uppercase;color:#96a2b2;font-weight:700;font-size:13px}.social-icons[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{background-color:#eceeef;color:#818a91;font-size:16px;display:inline-block;line-height:44px;width:44px;height:44px;text-align:center;margin-right:8px;border-radius:100%;-webkit-transition:all .2s linear;-o-transition:all .2s linear;transition:all .2s linear}.social-icons[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:active, .social-icons[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:focus, .social-icons[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{color:#fff;background-color:#29aafe}.social-icons.size-sm[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{line-height:34px;height:34px;width:34px;font-size:14px}.social-icons[_ngcontent-%COMP%]   a.facebook[_ngcontent-%COMP%]:hover{background-color:#3b5998}.social-icons[_ngcontent-%COMP%]   a.twitter[_ngcontent-%COMP%]:hover{background-color:#00aced}.social-icons[_ngcontent-%COMP%]   a.linkedin[_ngcontent-%COMP%]:hover{background-color:#007bb6}.social-icons[_ngcontent-%COMP%]   a.dribbble[_ngcontent-%COMP%]:hover{background-color:#ea4c89}@media (max-width: 767px){.social-icons[_ngcontent-%COMP%]   li.title[_ngcontent-%COMP%]{display:block;margin-right:0;font-weight:600}}.container-main[_ngcontent-%COMP%]{display:flex;flex-direction:column;min-height:100vh}.content[_ngcontent-%COMP%]{flex:1}.site-footer[_ngcontent-%COMP%]{background-color:#212121;padding:3rem;text-align:center}']});let i=e;return i})();var Ve=(()=>{let e=class e{constructor(t){this.http=t,this.apiBaseUrl=T.apiBaseUrl}getEbooks(t,n,o,l){let d={keyword:t,category_id:n.toString(),page:o.toString(),limit:l.toString()};return this.http.get(`${this.apiBaseUrl}/ebooks`,{params:d})}getEbooksUser(t,n,o,l){let d={keyword:t,category_id:n.toString(),page:o.toString(),limit:l.toString()};return this.http.get(`${this.apiBaseUrl}/ebooks/user`,{params:d})}getDetailEbook(t){return this.http.get(`${this.apiBaseUrl}/ebooks/${t}`)}getDetailEbookCategory(t){return this.http.get(`${this.apiBaseUrl}/ebooks/ebookcategories/${t}`)}getEbooksByIds(t){let n=new qt().set("ids",t.join(","));return this.http.get(`${this.apiBaseUrl}/ebooks/by-ids`,{params:n})}deleteEbook(t){return this.http.delete(`${this.apiBaseUrl}/ebooks/${t}`)}updateEbook(t,n){return n.audioFile?this.uploadAudio(t,n.audioFile).pipe(tr(o=>(n.audioUrl=o,this.http.put(`${this.apiBaseUrl}/ebooks/${t}`,n)))):this.http.put(`${this.apiBaseUrl}/ebooks/${t}`,n)}insertEbook(t){return this.http.post(`${this.apiBaseUrl}/ebooks`,t)}uploadImages(t,n){let o=new FormData;for(let l=0;l<n.length;l++)o.append("files",n[l]);return this.http.post(`${this.apiBaseUrl}/ebooks/uploads/${t}`,o)}uploadmp3s(t,n){let o=new FormData;for(let l=0;l<n.length;l++)o.append("audio",n[l]);return this.http.post(`${this.apiBaseUrl}/ebooks/uploadmp3s/${t}`,o)}uploadAudio(t,n){let o=new FormData;return o.append("audio",n,n.name),this.http.post(`${this.apiBaseUrl}/ebooks/uploadmp3s/${t}`,o)}deleteEbookImage(t){debugger;return this.http.delete(`${this.apiBaseUrl}/ebook_images/${t}`)}deleteEbookMp3(t){debugger;return this.http.delete(`${this.apiBaseUrl}/ebook_mp3s/${t}`)}updateActiveStatus(t){return this.http.put(`${this.apiBaseUrl}/ebooks/${t}/status`,{}).pipe(cn(n=>(console.error("Update status error:",n),ln(()=>new Error("Failed to update status.")))))}getEbookCategories(t){return this.http.get(`${this.apiBaseUrl}/ebooks/ebookcategories/${t}`)}};e.\u0275fac=function(n){return new(n||e)(B(Fe))},e.\u0275prov=R({token:e,factory:e.\u0275fac,providedIn:"root"});let i=e;return i})();var st=(()=>{let e=class e{constructor(t){this.http=t,this.apiBaseUrl=T.apiBaseUrl}getCategories(t,n){let o=new qt().set("page",t.toString()).set("limit",n.toString());return this.http.get(`${T.apiBaseUrl}/categories`,{params:o})}getDetailCategory(t){return this.http.get(`${this.apiBaseUrl}/categories/${t}`)}deleteCategory(t){debugger;return this.http.delete(`${this.apiBaseUrl}/categories/${t}`)}updateCategory(t,n){return this.http.put(`${this.apiBaseUrl}/categories/${t}`,n)}insertCategory(t){return this.http.post(`${this.apiBaseUrl}/categories`,t)}};e.\u0275fac=function(n){return new(n||e)(B(Fe))},e.\u0275prov=R({token:e,factory:e.\u0275fac,providedIn:"root"});let i=e;return i})();var We=(()=>{let e=class e{constructor(t,n){this.http=t,this.tokenService=n,this.apiUrl=`${T.apiBaseUrl}/orders`,this.apiGetAllOrders=`${T.apiBaseUrl}/orders/get-orders-by-keyword`,this.apiOrders=`${T.apiBaseUrl}/orders`}placeOrder(t){return this.http.post(this.apiUrl,t)}getOrderById(t){let n=`${T.apiBaseUrl}/orders/${t}`;return this.http.get(n)}getOrderByUserId(t){let n=`${T.apiBaseUrl}/orders/order-user/${t}`;return this.http.get(n)}getAllOrdersByUserId(t,n,o,l){let d=`${this.apiUrl}/user/${t}`,h=new qt().set("keyword",n).set("page",o.toString()).set("limit",l.toString()),_=new It({Authorization:`Bearer ${this.tokenService.getToken()}`});return this.http.get(d,{params:h,headers:_})}getAllOrders(t,n,o){let l=new qt().set("keyword",t).set("page",n.toString()).set("limit",o.toString());return this.http.get(this.apiGetAllOrders,{params:l})}updateOrder(t,n){let o=`${T.apiBaseUrl}/orders/${t}`;return this.http.put(o,n)}deleteOrder(t){let n=`${T.apiBaseUrl}/orders/${t}`;return this.http.delete(n,{responseType:"text"})}updateActiveStatus(t){return this.http.put(`${T.apiBaseUrl}/orders/${t}/status`,{}).pipe(cn(n=>(console.error("Update status error:",n),ln(()=>new Error("Failed to update status.")))))}getAllOrdersStatus(){let t=this.tokenService.getUserId();if(!t)throw new Error("User is not logged in");return this.http.get(`${T.apiBaseUrl}/orders/status/${t}`)}cancelOrder(t){let n=`${T.apiBaseUrl}/orders/cancel/${t}`,o=new It({Authorization:`Bearer ${this.tokenService.getToken()}`});return this.http.put(n,{},{headers:o})}};e.\u0275fac=function(n){return new(n||e)(B(Fe),B(q))},e.\u0275prov=R({token:e,factory:e.\u0275fac,providedIn:"root"});let i=e;return i})();function Rc(i,e){if(i&1&&(a(0,"option",5),c(1),s()),i&2){let r=e.$implicit;g("value",r.id),u(1),y(r.name)}}function Vc(i,e){if(i&1){let r=P();a(0,"div",14)(1,"div",15),p("click",function(){let o=C(r).$implicit,l=v();return E(l.onEbookClick(o.id))}),a(2,"button",16),p("click",function(n){let l=C(r).$implicit,d=v();return E(d.toggleLove(l,n))}),f(3,"i",17),s(),f(4,"img",18),a(5,"h4",19),c(6),s(),a(7,"p",20),c(8),s(),a(9,"div",21),c(10),f(11,"div",22),s()()()}if(i&2){let r=e.$implicit,t=v();u(2),J("love",!r.isLoved)("love_red",r.isLoved),u(2),g("src",r.url,ve),u(2),y(r.name),u(2),y(r.title),u(2),S(" Gi\xE1: ",t.formatPrice(r.price)," ")}}function Bc(i,e){if(i&1){let r=P();a(0,"li",23)(1,"a",24),p("click",function(){C(r);let n=v();return E(n.onPageChange(0))}),c(2,"First"),s()()}}function Hc(i,e){if(i&1){let r=P();a(0,"li",23)(1,"a",24),p("click",function(){C(r);let n=v();return E(n.onPageChange(n.currentPage-1))}),f(2,"i",25),s()()}}var Lc=i=>({active:i});function Uc(i,e){if(i&1){let r=P();Ct(0),a(1,"li",26)(2,"a",24),p("click",function(){let o=C(r).$implicit,l=v();return E(l.onPageChange(o-1))}),c(3),s()(),Et()}if(i&2){let r=e.$implicit,t=v();u(1),g("ngClass",Xe(2,Lc,r===t.currentPage+1)),u(2),y(r)}}function jc(i,e){if(i&1){let r=P();a(0,"li",23)(1,"a",24),p("click",function(){C(r);let n=v();return E(n.onPageChange(n.currentPage+1))}),f(2,"i",27),s()(),a(3,"li",23)(4,"a",24),p("click",function(){C(r);let n=v();return E(n.onPageChange(n.totalPages-1))}),c(5,"Last"),s()()}}var js=(()=>{let e=class e{constructor(t,n,o,l,d,h,_,b,D){this.ebookService=t,this.categoryService=n,this.orderService=o,this.router=l,this.tokenService=d,this.loveService=h,this.cartService=_,this.userService=b,this.document=D,this.ebooks=[],this.categories=[],this.selectedCategoryId=0,this.currentPage=0,this.itemsPerPage=12,this.totalPages=0,this.pages=[],this.visiblePages=[],this.keyword="",this.noebooksearch=!1,this.isPressedAddToLove=!1,this.quantity=1,this.cartItemCount=0,this.localStorage=D.defaultView?.localStorage}ngOnInit(){this.currentPage=Number(this.localStorage?.getItem("currentEbookPage"))||0,this.getEbooks(this.keyword,this.selectedCategoryId,this.currentPage,this.itemsPerPage),this.getCategories(0,10)}getCategories(t,n){this.categoryService.getCategories(t,n).subscribe({next:o=>{debugger;this.categories=o},complete:()=>{debugger},error:o=>{console.error("Error fetching categories:",o)}})}searchEbooks(){this.currentPage=0,this.itemsPerPage=12;debugger;this.getEbooks(this.keyword,this.selectedCategoryId,this.currentPage,this.itemsPerPage)}getEbooks(t,n,o,l){debugger;this.ebookService.getEbooksUser(t,n,o,l).subscribe({next:d=>{debugger;d.ebooks.forEach(h=>{h.url=`${T.apiBaseUrl}/ebooks/images/${h.thumbnail}`,h.isLoved=this.loveService.isProductInLove(h.id)}),this.ebooks=d.ebooks,this.totalPages=d.totalPages,this.visiblePages=this.generateVisiblePageArray(this.currentPage,this.totalPages),this.noebooksearch=this.ebooks.length===0},complete:()=>{debugger},error:d=>{debugger;console.error("Error fetching ebooks:",d)}})}onPageChange(t){debugger;this.currentPage=t<0?0:t,this.localStorage?.setItem("currentEbookPage",String(this.currentPage)),this.getEbooks(this.keyword,this.selectedCategoryId,this.currentPage,this.itemsPerPage)}generateVisiblePageArray(t,n){let l=Math.floor(2.5),d=Math.max(t-l,1),h=Math.min(d+5-1,n);return h-d+1<5&&(d=Math.max(h-5+1,1)),new Array(h-d+1).fill(0).map((_,b)=>d+b)}onEbookClick(t){debugger;this.router.navigate(["/ebooks",t])}formatPrice(t){return t===void 0?"N/A":t===0?"Mi\u1EC5n Ph\xED":t.toLocaleString("vi-VN")+" \u0111"}addToLove(t,n){if(n.stopPropagation(),this.isPressedAddToLove=!0,!this.tokenService.getUserId()){alert("B\u1EA1n c\u1EA7n \u0111\u0103ng nh\u1EADp \u0111\u1EC3 th\xEAm y\xEAu th\xEDch."),this.router.navigate(["/login"]);return}t?this.loveService.getLove().size>=15?alert("Y\xEAu th\xEDch c\u1EE7a b\u1EA1n \u0111\xE3 \u0111\u1EA7y. Vui l\xF2ng x\xF3a s\u1EA3n ph\u1EA9m \u0111\u1EC3 th\xEAm"):this.loveService.isProductInLove(t.id)?alert("S\u1EA3n ph\u1EA9m \u0111\xE3 t\u1ED3n t\u1EA1i trong y\xEAu th\xEDch c\u1EE7a b\u1EA1n."):(this.loveService.addToLove(t.id,this.quantity),alert("Th\xEAm v\xE0o y\xEAu th\xEDch th\xE0nh c\xF4ng."),t.isLoved=!0,location.reload()):console.error("Kh\xF4ng th\u1EC3 th\xEAm s\u1EA3n ph\u1EA9m v\xE0o y\xEAu th\xEDch v\xEC ebook l\xE0 null.")}toggleLove(t,n){if(n.stopPropagation(),!this.tokenService.getUserId()){alert("B\u1EA1n c\u1EA7n \u0111\u0103ng nh\u1EADp \u0111\u1EC3 th\xEAm y\xEAu th\xEDch."),this.router.navigate(["/login"]);return}t.isLoved?confirm("X\xE1c nh\u1EADn x\xF3a y\xEAu th\xEDch?")&&(this.loveService.removeFromLove(t.id),t.isLoved=!1,location.reload()):(this.addToLove(t,n),t.isLoved=!0,location.reload())}};e.\u0275fac=function(n){return new(n||e)(m(Ve),m(st),m(We),m(I),m(q),m(Ht),m(bt),m(re),m(K))},e.\u0275cmp=O({type:e,selectors:[["app-home"]],standalone:!0,features:[k],decls:24,vars:8,consts:[[1,"banner"],[1,"container"],[1,"search-box"],["type","text","placeholder","T\xECm s\u1EA3n ph\u1EA9m",1,"form-control","search-input",3,"ngModel","ngModelChange"],[1,"form-control","ebook-category",3,"ngModel","ngModelChange"],[3,"value"],[3,"value",4,"ngFor","ngForOf"],[1,"btn","btn-primary",3,"click"],[1,"row"],["class","col-lg-3 col-md-5",4,"ngFor","ngForOf"],[1,"d-flex","justify-content-center"],["aria-label","Page navigation"],[1,"pagination"],["class","page-item"],[1,"col-lg-3","col-md-5"],[1,"ebook-item",3,"click"],[3,"click"],[1,"fa","fa-heart"],["alt","Ebook Image",1,"ebook-image",3,"src"],[1,"ebook-name"],[1,"ebook-title"],[1,"ebook-price"],[1,"new"],[1,"page-item"],[1,"page-link",3,"click"],[1,"fa","fa-chevron-left"],[1,"page-item",3,"ngClass"],[1,"fa","fa-chevron-right"]],template:function(n,o){n&1&&(f(0,"app-header")(1,"div",0),a(2,"div",1)(3,"div",2)(4,"input",3),p("ngModelChange",function(d){return o.keyword=d}),s(),a(5,"select",4),p("ngModelChange",function(d){return o.selectedCategoryId=d}),a(6,"option",5),c(7,"T\u1EA5t c\u1EA3"),s(),w(8,Rc,2,2,"option",6),s(),a(9,"button",7),p("click",function(){return o.searchEbooks()}),c(10,"T\xECm ki\u1EBFm"),s()(),a(11,"div",8),w(12,Vc,12,8,"div",9),s(),f(13,"br")(14,"br"),a(15,"div",10)(16,"nav",11)(17,"ul",12),w(18,Bc,3,0,"li",13)(19,Hc,3,0,"li",13),gt(20,Uc,4,4,"ng-container",null,Fn),w(22,jc,6,0),s()()()(),f(23,"app-footer")),n&2&&(u(4),g("ngModel",o.keyword),u(1),g("ngModel",o.selectedCategoryId),u(1),g("value",0),u(2),g("ngForOf",o.categories),u(4),g("ngForOf",o.ebooks),u(6),ne(18,o.currentPage>0?18:-1),u(1),ne(19,o.currentPage>0?19:-1),u(1),ft(o.visiblePages),u(2),ne(22,o.currentPage<o.totalPages-1?22:-1))},dependencies:[ae,se,F,de,ie,H,tt,nt,z,$e,W,Z],styles:['@charset "UTF-8";.intro-section[_ngcontent-%COMP%]{text-align:center;color:#fff;padding:20px}.search-box[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;margin-bottom:20px}.search-box[_ngcontent-%COMP%]   .form-control[_ngcontent-%COMP%], .search-box[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]{font-size:20px}.ebook-category[_ngcontent-%COMP%]{width:200px;border:2px}.search-input[_ngcontent-%COMP%]{width:300px;background-color:#13172a;margin-right:10px;border-color:#ffffff80;color:#f20000}.form-control[_ngcontent-%COMP%]{background-color:transparent;color:#fff;border:2px}.form-control[_ngcontent-%COMP%]::placeholder{color:#fff;opacity:1}.form-control[_ngcontent-%COMP%]:-ms-input-placeholder{color:#ffffff80}.form-control[_ngcontent-%COMP%]::-ms-input-placeholder{color:#ffffff80}.ebook-item[_ngcontent-%COMP%]{background-color:#13172a;border:3px solid rgb(0,38,255);border-radius:20px;padding:10px;margin-bottom:10px;text-align:center;max-width:300px;max-height:750px}.ebook-image[_ngcontent-%COMP%]{width:70%;max-width:70%;height:250px;margin-bottom:10px;object-fit:contain}.ebook-name[_ngcontent-%COMP%]{color:#fff;font-size:1.3rem;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}@media screen and (max-width: 1200px){.ebook-name[_ngcontent-%COMP%]{font-size:1.1rem}}@media screen and (max-width: 992px){.ebook-name[_ngcontent-%COMP%]{font-size:1rem}}@media screen and (max-width: 768px){.ebook-name[_ngcontent-%COMP%]{font-size:.9rem}}@media screen and (max-width: 576px){.ebook-name[_ngcontent-%COMP%]{font-size:.8rem}}.ebook-title[_ngcontent-%COMP%]{color:#fff;font-size:1rem;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}@media screen and (max-width: 1200px){.ebook-title[_ngcontent-%COMP%]{font-size:1.1rem}}@media screen and (max-width: 992px){.ebook-title[_ngcontent-%COMP%]{font-size:1rem}}@media screen and (max-width: 768px){.ebook-title[_ngcontent-%COMP%]{font-size:.9rem}}@media screen and (max-width: 576px){.ebook-title[_ngcontent-%COMP%]{font-size:.8rem}}.ebook-warranty[_ngcontent-%COMP%]{color:#e942b2}.ebook-price[_ngcontent-%COMP%]{color:#fff}.ebook-rating[_ngcontent-%COMP%]{color:gold;margin-top:10px}.ebook-actions[_ngcontent-%COMP%]{display:flex;justify-content:center;margin-top:20px}.space-x[_ngcontent-%COMP%]{margin:0 5px}.page-number[_ngcontent-%COMP%]{cursor:pointer;padding:5px 10px;border:1px solid #ccc;margin:0 2px;border-radius:3px}.page-number.active[_ngcontent-%COMP%]{background-color:#7f44ff!important;color:#fff;border-color:#7f44ff!important}.btn-primary[_ngcontent-%COMP%]{background-color:#7f44ff;border-color:#7f44ff}.btn.btn-primary[_ngcontent-%COMP%]{margin-left:10px}.banner[_ngcontent-%COMP%]{position:relative;background:url("./media/banner-ZWRCSY4B.png") no-repeat center center;background-size:cover;color:#fff;height:450px;text-align:center;margin-bottom:40px;overflow:hidden}.banner[_ngcontent-%COMP%]:before{content:"";position:absolute;left:0;width:100%;height:100%;background:radial-gradient(circle,rgba(18,20,20,.8),rgba(25,23,23,0) 70%);z-index:1;pointer-events:none}.banner-content[_ngcontent-%COMP%]{max-width:800px;margin:0 auto}.banner[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:3rem;margin:0;font-weight:700}.banner[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:1.2rem}.ebook-category[_ngcontent-%COMP%]   option[_ngcontent-%COMP%]{color:#000}.new[_ngcontent-%COMP%]{position:absolute;background:url("./media/new-I7KXX6ZO.png") no-repeat center center;background-size:cover;color:#fff;height:20px;width:50px;right:10px;bottom:20px}.ebook-price[_ngcontent-%COMP%]{font-size:1.2em;font-weight:700;margin-top:10px}.ebook-item[_ngcontent-%COMP%]{position:relative;padding-right:0;width:400px;height:390px}.ebook-item[_ngcontent-%COMP%]:hover{border:3px solid rgb(255,0,0)}.love[_ngcontent-%COMP%]{position:absolute;background:url("./media/love3-3BAC2BAM.png") no-repeat center center;background-size:cover;color:#fff;border:none;top:10px;right:10px;cursor:pointer;width:32px;height:32px;filter:invert(100%)}.love[_ngcontent-%COMP%]:hover{border:3px solid rgb(255,111,0)}.love_red[_ngcontent-%COMP%]{position:absolute;background:url("./media/love-F3KCJ7XV.png") no-repeat center center;background-size:cover;color:#fff;border:none;top:10px;right:10px;cursor:pointer;width:32px;height:32px;filter:invert(33%) sepia(84%) saturate(4458%) hue-rotate(340deg) brightness(92%) contrast(96%)}.love_red[_ngcontent-%COMP%]:hover{border:3px solid rgb(203,203,203)}']});let i=e;return i})();var Gi=(()=>{let e=class e{constructor(t){this.http=t,this.apiGetRoles=`${T.apiBaseUrl}/roles`}getRoles(){return this.http.get(this.apiGetRoles)}};e.\u0275fac=function(n){return new(n||e)(B(Fe))},e.\u0275prov=R({token:e,factory:e.\u0275fac,providedIn:"root"});let i=e;return i})();var Gc=["loginForm"],$c=(i,e)=>e.name;function zc(i,e){if(i&1&&(a(0,"option",27),c(1),s()),i&2){let r=e.$implicit;g("ngValue",r),u(1),S(" ",r.name," ")}}function Wc(i,e){if(i&1&&(a(0,"div",28),c(1),s()),i&2){let r=v();u(1),S(" ",r.message," ")}}var $s=(()=>{let e=class e{onPhoneNumberChange(){console.log(`Phone typed: ${this.phoneNumber}`)}constructor(t,n,o,l,d,h){this.router=t,this.activatedRoute=n,this.userService=o,this.tokenService=l,this.roleService=d,this.cartService=h,this.phoneNumber="0367229859",this.password="270504",this.showPassword=!1,this.roles=[],this.rememberMe=!0,this.message=""}ngOnInit(){debugger;this.roleService.getRoles().subscribe({next:t=>{debugger;this.roles=t,this.selectedRole=t.length>0?t[0]:void 0},complete:()=>{debugger},error:t=>{debugger;console.error("Error getting roles:",t)}})}createAccount(){debugger;this.router.navigate(["/register"])}login(){let t={phone_number:this.phoneNumber,password:this.password,role_id:this.selectedRole?.id??1};this.userService.login(t).subscribe({next:n=>{let{token:o}=n;this.rememberMe&&(this.tokenService.setToken(o),this.userService.getUserDetail(o).subscribe({next:l=>{this.userResponse=me($({},l),{date_of_birth:new Date(l.date_of_birth)}),this.userService.saveUserResponseToLocalStorage(this.userResponse),alert("\u0110\u0103ng nh\u1EADp th\xE0nh c\xF4ng"),this.userResponse?.role.name==="admin"?this.router.navigate(["/admin"]):this.userResponse?.role.name==="user"&&this.router.navigate(["/"]).then(()=>{window.location.reload()})},error:l=>{console.error("Error fetching user details:",l),this.message="L\u1ED7i khi l\u1EA5y th\xF4ng tin chi ti\u1EBFt ng\u01B0\u1EDDi d\xF9ng",this.setCloseTimeout()}}))},error:n=>{this.message=n.message||"\u0110\u0103ng nh\u1EADp kh\xF4ng th\xE0nh c\xF4ng. Vui l\xF2ng ki\u1EC3m tra th\xF4ng tin c\u1EE7a b\u1EA1n."}})}setCloseTimeout(){this.clearCloseTimeout(),this.messageTimeout=setTimeout(()=>{this.message=""},1500)}clearCloseTimeout(){this.messageTimeout&&clearTimeout(this.messageTimeout)}togglePassword(){this.showPassword=!this.showPassword}};e.\u0275fac=function(n){return new(n||e)(m(I),m(G),m(re),m(q),m(Gi),m(bt))},e.\u0275cmp=O({type:e,selectors:[["app-login"]],viewQuery:function(n,o){if(n&1&&_n(Gc,5),n&2){let l;fn(l=vn())&&(o.loginForm=l.first)}},standalone:!0,features:[k],decls:50,vars:7,consts:[[1,"container"],[1,"row"],[1,"col-md-6","offset-md-3"],[1,"login-form","mx-auto"],[1,"login-header"],[1,"form-group"],["for","phoneNumber"],["type","text","name","phone","id","phoneNumber",1,"form-control",3,"ngModel","ngModelChange","input","focus"],[1,"divider-nospace"],[1,"mt-5"],[1,"form-group","password-field"],["for","password"],["name","password","placeholder","\xCDt nh\u1EA5t 3 k\xFD t\u1EF1","id","password",1,"form-control",3,"type","ngModel","ngModelChange"],[1,"password-toggle","fas",3,"ngClass","click"],[1,"form-check","checkbox-text"],[2,"display","flex"],["type","checkbox","id","remember",1,"form-check-input",3,"ngModel","ngModelChange"],["for","remember",1,"form-check-label","text-start"],["href","#",1,"register-link"],[1,"form-control","access-right",3,"ngModel","ngModelChange"],["selected","","disabled",""],[1,"message-container"],["class","alert alert-success",4,"ngIf"],["type","button",1,"login-button",3,"click"],[1,"divider"],[1,"text-center"],[1,"register-link",3,"click"],[3,"ngValue"],[1,"alert","alert-success"]],template:function(n,o){n&1&&(f(0,"app-header")(1,"br")(2,"br")(3,"br"),a(4,"div",0)(5,"div",1)(6,"div",2)(7,"div",3)(8,"h2",4),c(9,"\u0110\u0103ng nh\u1EADp"),s(),a(10,"div",5)(11,"label",6),c(12,"Phone"),s(),a(13,"input",7),p("ngModelChange",function(d){return o.phoneNumber=d})("input",function(){return o.onPhoneNumberChange()})("focus",function(){return o.loginForm.form.markAsTouched()}),s(),f(14,"div",8),s(),f(15,"div",9),a(16,"div",10)(17,"label",11),c(18,"M\u1EADt kh\u1EA9u"),s(),a(19,"input",12),p("ngModelChange",function(d){return o.password=d}),s(),a(20,"i",13),p("click",function(){return o.togglePassword()}),s(),f(21,"div",8),s(),a(22,"div",5)(23,"div",14)(24,"span",15)(25,"input",16),p("ngModelChange",function(d){return o.rememberMe=d}),s(),a(26,"label",17),c(27," Ghi nh\u1EDB \u0111\u0103ng nh\u1EADp"),s()(),a(28,"a",18),c(29,"Qu\xEAn m\u1EADt kh\u1EA9u"),s()()(),a(30,"div",5)(31,"select",19),p("ngModelChange",function(d){return o.selectedRole=d}),a(32,"option",20),c(33,"Quy\u1EC1n \u0111\u0103ng nh\u1EADp"),s(),gt(34,zc,2,2,"option",27,$c),s()(),a(36,"div",21),w(37,Wc,2,1,"div",22),s(),a(38,"button",23),p("click",function(){return o.login()}),c(39,"\u0110\u0103ng nh\u1EADp"),s(),f(40,"div",24),a(41,"p",25),c(42,"B\u1EA1n ch\u01B0a \u0111\u0103ng k\xFD? "),a(43,"span")(44,"a",26),p("click",function(){return o.createAccount()}),c(45,"T\u1EA1o t\xE0i kho\u1EA3n"),s()()()()()(),f(46,"br")(47,"br")(48,"br"),s(),f(49,"app-footer")),n&2&&(u(13),g("ngModel",o.phoneNumber),u(6),ci("type",o.showPassword?"text":"password"),g("ngModel",o.password),u(1),g("ngClass",o.showPassword?"fa-eye":"fa-eye-slash"),u(5),g("ngModel",o.rememberMe),u(6),g("ngModel",o.selectedRole),u(3),ft(o.roles),u(3),g("ngIf",o.message))},dependencies:[ae,se,F,de,ue,H,tt,nt,z,Un,$e,W,Z],styles:['@charset "UTF-8";.container[_ngcontent-%COMP%]{color:#fff;height:100vh}.login-form[_ngcontent-%COMP%]{background-color:#13172a;border-radius:10px;padding:20px;max-width:500px;border:1px solid rgb(32,34,60);align-items:center;justify-content:center}.login-header[_ngcontent-%COMP%]{text-align:center;color:#69f4b5;margin-bottom:20px}.form-control[_ngcontent-%COMP%]{background-color:transparent;border:none;color:#fff}.form-control[_ngcontent-%COMP%]:focus{color:#fff;background-color:transparent;outline:none;border-color:transparent}.divider-nospace[_ngcontent-%COMP%]{border-top:1px solid white}.password-field[_ngcontent-%COMP%]{position:relative}.password-toggle[_ngcontent-%COMP%]{position:absolute;top:50%;right:10px;transform:translateY(-50%);color:#69f4b5;cursor:pointer}.checkbox-text[_ngcontent-%COMP%]{color:#f3a52a;display:flex;justify-content:space-between;align-items:center;margin-top:10px}.checkbox-text[_ngcontent-%COMP%]   input[type=checkbox][_ngcontent-%COMP%]:checked{border-color:#fff;background-color:#e942b2}.form-check-input[_ngcontent-%COMP%]{margin-right:5px}.register-link[_ngcontent-%COMP%]{color:#69f4b5;text-decoration:none}.access-right[_ngcontent-%COMP%]{margin-top:20px;width:200px;color:#fff;background-color:#13172a!important;border:1px solid rgb(233,66,178)}.access-right[_ngcontent-%COMP%]:focus{border:1px solid rgb(233,66,178)}.form-control[_ngcontent-%COMP%]::placeholder{color:#f3a52a66;opacity:1}.form-control[_ngcontent-%COMP%]:-ms-input-placeholder{color:#f3a52a66}.form-control[_ngcontent-%COMP%]::-ms-input-placeholder{color:#f3a52a66}.login-button[_ngcontent-%COMP%]{background:linear-gradient(to right,rgb(233,66,178),rgb(127,68,255));color:#fff;border-radius:30px;width:100%;padding:10px 0;margin-top:20px;border:none}.divider[_ngcontent-%COMP%]{height:1px;background-color:#f3a52a;margin:20px}.message-container[_ngcontent-%COMP%]{position:fixed;top:20px;right:10px;z-index:1000}.alert-success[_ngcontent-%COMP%]{background-color:red;color:#fff;padding:10px;border-radius:5px;box-shadow:0 4px 8px #0000001a;transition:opacity .3s ease-in-out;opacity:1;position:relative}.alert-success.close[_ngcontent-%COMP%]{opacity:0;transition:opacity .3s ease-in-out}']});let i=e;return i})();var qc=["registerForm"];function Jc(i,e){i&1&&(a(0,"p",32),c(1,"Phone ph\u1EA3i c\xF3 \xEDt nh\u1EA5t 10 k\xFD t\u1EF1"),s())}function Qc(i,e){i&1&&(a(0,"p",32),c(1," M\u1EADt kh\u1EA9u ph\u1EA3i c\xF3 \xEDt nh\u1EA5t 6 k\xFD t\u1EF1 "),s())}function Yc(i,e){i&1&&(a(0,"p",32),c(1," M\u1EADt kh\u1EA9u ph\u1EA3i c\xF3 \xEDt nh\u1EA5t 6 k\xFD t\u1EF1 "),s())}function Kc(i,e){i&1&&(a(0,"p",32),c(1," M\u1EADt kh\u1EA9u kh\xF4ng kh\u1EDBp "),s())}function Zc(i,e){i&1&&(a(0,"p",32),c(1," B\u1EA1n ch\u01B0a \u0111\u1EE7 18 tu\u1ED5i "),s())}var zs=(()=>{let e=class e{constructor(t,n){this.router=t,this.userService=n,this.showPassword=!1;debugger;this.phoneNumber="",this.password="",this.retypePassword="",this.fullName="",this.address="",this.isAccepted=!0,this.dateOfBirth=new Date,this.dateOfBirth.setFullYear(this.dateOfBirth.getFullYear()-18)}onPhoneNumberChange(){console.log(`Phone typed: ${this.phoneNumber}`)}register(){if(!this.registerForm.valid){alert("B\u1EA1n c\u1EA7n nh\u1EADp l\u1EA1i th\xF4ng tin.");return}let t=`phone: ${this.phoneNumber}password: ${this.password}retypePassword: ${this.retypePassword}address: ${this.address}fullName: ${this.fullName}isAccepted: ${this.isAccepted}dateOfBirth: ${this.dateOfBirth}`;debugger;let n={fullname:this.fullName,phone_number:this.phoneNumber,address:this.address,password:this.password,retype_password:this.retypePassword,date_of_birth:this.dateOfBirth,facebook_account_id:0,google_account_id:0,role_id:1};this.userService.register(n).subscribe({next:o=>{debugger;window.confirm('\u0110\u0103ng k\xFD th\xE0nh c\xF4ng, m\u1EDDi b\u1EA1n \u0111\u0103ng nh\u1EADp. B\u1EA5m "OK" \u0111\u1EC3 chuy\u1EC3n \u0111\u1EBFn trang \u0111\u0103ng nh\u1EADp.')&&this.router.navigate(["/login"])},complete:()=>{debugger},error:o=>{debugger;alert(o?.error?.message??"")}})}togglePassword(){this.showPassword=!this.showPassword}checkPasswordsMatch(){this.password!==this.retypePassword?this.registerForm.form.controls.retypePassword.setErrors({passwordMismatch:!0}):this.registerForm.form.controls.retypePassword.setErrors(null)}checkAge(){if(this.dateOfBirth){let t=new Date,n=new Date(this.dateOfBirth),o=t.getFullYear()-n.getFullYear(),l=t.getMonth()-n.getMonth();if((l<0||l===0&&t.getDate()<n.getDate())&&o--,o<18){this.registerForm.form.controls.dateOfBirth.setErrors({invalidAge:!0});return}else this.registerForm.form.controls.dateOfBirth.setErrors(null)}}};e.\u0275fac=function(n){return new(n||e)(m(I),m(re))},e.\u0275cmp=O({type:e,selectors:[["app-register"]],viewQuery:function(n,o){if(n&1&&_n(qc,5),n&2){let l;fn(l=vn())&&(o.registerForm=l.first)}},standalone:!0,features:[k],decls:65,vars:14,consts:[[1,"container"],["registerForm","ngForm"],[1,"row"],[1,"col-md-6","offset-md-3"],[1,"register-form","mx-auto"],[1,"register-header"],[1,"form-group"],["for","phoneNumber"],["type","text","name","phone","placeholder","\xCDt nh\u1EA5t 10 k\xFD t\u1EF1","required","","required","","id","phoneNumber",1,"form-control",3,"ngModel","ngModelChange","input","focus"],[1,"divider-nospace"],["class","text-danger"],[1,"mt-3"],[1,"form-group","password-field"],["for","password"],["type","password","name","password","placeholder","\xCDt nh\u1EA5t 6 k\xFD t\u1EF1","required","","id","password",1,"form-control",3,"ngModel","ngModelChange"],[1,"password-toggle","fas",3,"ngClass","click"],["for","retype-password"],["type","password","placeholder","\xCDt nh\u1EA5t 6 k\xFD t\u1EF1","name","retypePassword","required","","id","retype-password",1,"form-control",3,"ngModel","ngModelChange","input"],["for","full-name"],["type","text","name","fullName","required","","id","full-name",1,"form-control",3,"ngModel","ngModelChange"],["for","date-of-birth"],["type","date","required","","id","date-of-birth","name","dateOfBirth",1,"form-control",3,"ngModel","ngModelChange","input"],["for","address"],["type","text","name","address","id","address",1,"form-control",3,"ngModel","ngModelChange"],[1,"form-check","checkbox-text"],[2,"display","flex"],["type","checkbox","name","isAccepted","id","agree",1,"form-check-input",3,"ngModel","ngModelChange"],["for","agree",1,"form-check-label","text-start"],["type","button",1,"register-button",3,"click"],[1,"divider"],[1,"text-center"],["href","#",1,"register-link"],[1,"text-danger"]],template:function(n,o){if(n&1){let l=P();f(0,"app-header"),a(1,"div",0)(2,"form",null,1)(4,"div",2)(5,"div",3)(6,"div",4)(7,"h2",5),c(8,"\u0110\u0103ng k\xFD"),s(),a(9,"div",6)(10,"label",7),c(11,"Phone's number"),s(),a(12,"input",8),p("ngModelChange",function(h){return o.phoneNumber=h})("input",function(){return o.onPhoneNumberChange()})("focus",function(){C(l);let h=Ae(3);return E(h.form.markAsTouched())}),s(),f(13,"div",9),w(14,Jc,2,0,"p",10),s(),f(15,"div",11),a(16,"div",12)(17,"label",13),c(18,"M\u1EADt kh\u1EA9u"),s(),a(19,"input",14),p("ngModelChange",function(h){return o.password=h}),s(),a(20,"i",15),p("click",function(){return o.togglePassword()}),s(),f(21,"div",9),w(22,Qc,2,0,"p",10),s(),f(23,"div",11),a(24,"div",12)(25,"label",16),c(26,"G\xF5 l\u1EA1i m\u1EADt kh\u1EA9u"),s(),a(27,"input",17),p("ngModelChange",function(h){return o.retypePassword=h})("input",function(){return C(l),Ae(3).form.markAsTouched(),E(o.checkPasswordsMatch())}),s(),a(28,"i",15),p("click",function(){return o.togglePassword()}),s(),f(29,"div",9),w(30,Yc,2,0,"p",10)(31,Kc,2,0,"p",10),s(),f(32,"div",11),a(33,"div",6)(34,"label",18),c(35,"H\u1ECD v\xE0 t\xEAn"),s(),a(36,"input",19),p("ngModelChange",function(h){return o.fullName=h}),s(),f(37,"div",9),s(),a(38,"div",6)(39,"label",20),c(40,"Ng\xE0y th\xE1ng n\u0103m sinh"),s(),a(41,"input",21),p("ngModelChange",function(h){return o.dateOfBirth=h})("input",function(){return C(l),Ae(3).form.markAsTouched(),E(o.checkAge())}),s(),f(42,"div",9),w(43,Zc,2,0,"p",10),s(),f(44,"div",11),a(45,"div",6)(46,"label",22),c(47,"\u0110\u1ECBa ch\u1EC9"),s(),a(48,"input",23),p("ngModelChange",function(h){return o.address=h}),s(),f(49,"div",9),s(),a(50,"div",6)(51,"div",24)(52,"span",25)(53,"input",26),p("ngModelChange",function(h){return o.isAccepted=h}),s(),a(54,"label",27),c(55," T\xF4i \u0111\u1ED3ng \xFD v\u1EDBi c\xE1c \u0111i\u1EC1u kho\u1EA3n v\xE0 \u0111i\u1EC1u ki\u1EC7n"),s()()()(),a(56,"button",28),p("click",function(){return o.register()}),c(57,"\u0110\u0103ng k\xFD"),s(),f(58,"div",29),a(59,"p",30),c(60,"B\u1EA1n \u0111\xE3 c\xF3 t\xE0i kho\u1EA3n? "),a(61,"span")(62,"a",31),c(63,"\u0110\u0103ng nh\u1EADp"),s()()()()()()()(),f(64,"app-footer")}if(n&2){let l=Ae(3);u(12),g("ngModel",o.phoneNumber),u(2),ne(14,o.phoneNumber.length<10&&l.form.touched?14:-1),u(5),g("ngModel",o.password),u(1),g("ngClass",o.showPassword?"fa-eye":"fa-eye-slash"),u(2),ne(22,o.password.length<6&&l.form.touched?22:-1),u(5),g("ngModel",o.retypePassword),u(1),g("ngClass",o.showPassword?"fa-eye":"fa-eye-slash"),u(2),ne(30,o.retypePassword.length<6&&l.form.touched?30:-1),u(1),ne(31,l.controls.retypePassword.hasError("passwordMismatch")&&l.form.touched?31:-1),u(5),g("ngModel",o.fullName),u(5),g("ngModel",o.dateOfBirth),u(2),ne(43,l.controls.dateOfBirth.hasError("invalidAge")&&l.form.touched?43:-1),u(5),g("ngModel",o.address),u(5),g("ngModel",o.isAccepted)}},dependencies:[F,de,H,Re,z,Un,W,Ne,Ue,Z,Qe,se,ae],styles:['@charset "UTF-8";.container[_ngcontent-%COMP%]{color:#fff;height:100vh}.register-form[_ngcontent-%COMP%]{background-color:#13172a;border-radius:10px;padding:20px;max-width:500px;border:1px solid rgb(32,34,60);align-items:center;justify-content:center}.register-header[_ngcontent-%COMP%]{text-align:center;color:#69f4b5;margin-bottom:20px}.label-text[_ngcontent-%COMP%]{color:#f3a52a}.form-control[_ngcontent-%COMP%]{background-color:transparent;border:none;color:#fff}.form-control[_ngcontent-%COMP%]:focus{color:#fff;background-color:transparent;outline:none;box-shadow:none;border-color:transparent;padding-left:0}.password-field[_ngcontent-%COMP%]{position:relative}.password-toggle[_ngcontent-%COMP%]{position:absolute;top:50%;right:10px;transform:translateY(-50%);color:#69f4b5;cursor:pointer}.checkbox-text[_ngcontent-%COMP%]{color:#f3a52a;display:flex;justify-content:space-between;align-items:center;margin-top:10px}.checkbox-text[_ngcontent-%COMP%]   input[type=checkbox][_ngcontent-%COMP%]:checked{border-color:#fff;background-color:#e942b2}.form-check-input[_ngcontent-%COMP%]{margin-right:5px}.register-link[_ngcontent-%COMP%]{color:#69f4b5;text-decoration:none}.register-button[_ngcontent-%COMP%]{background:linear-gradient(to right,rgb(233,66,178),rgb(127,68,255));color:#fff;border-radius:30px;width:100%;padding:10px 0;margin-top:20px;border:none}.divider[_ngcontent-%COMP%]{height:1px;background-color:#f3a52a;margin:20px}.divider-nospace[_ngcontent-%COMP%]{border-top:1px solid white}.form-control[_ngcontent-%COMP%]::placeholder{color:#f3a52a66;opacity:1}.form-control[_ngcontent-%COMP%]:-ms-input-placeholder{color:#f3a52a66}.form-control[_ngcontent-%COMP%]::-ms-input-placeholder{color:#f3a52a66}']});let i=e;return i})();var Bo=i=>({active:i});function Xc(i,e){if(i&1){let r=P();a(0,"div",23)(1,"button",24),p("click",function(n){C(r);let o=v();return E(o.toggleLove(o.ebook,n))}),f(2,"i",25),s(),a(3,"div",26),f(4,"img",27),s()()}if(i&2){let r=e.$implicit,t=e.index,n=v();g("ngClass",Xe(6,Bo,t===n.currentImageIndex)),u(1),J("love",!(n.ebook!=null&&n.ebook.isLoved))("love_red",n.ebook==null?null:n.ebook.isLoved),u(3),g("src",r.image_url,ve)}}function ed(i,e){if(i&1){let r=P();a(0,"div",28),p("click",function(){let o=C(r).index,l=v();return E(l.thumbnailClick(o))}),f(1,"img",29),s()}if(i&2){let r=e.$implicit,t=e.index,n=v();g("ngClass",Xe(2,Bo,t===n.currentImageIndex)),u(1),g("src",r.image_url,ve)}}function td(i,e){if(i&1){let r=P();a(0,"div",30)(1,"div",31)(2,"h2",32),c(3),s(),f(4,"br"),a(5,"p"),c(6),s(),a(7,"div",33)(8,"button",34),p("click",function(){C(r);let n=v();return E(n.prevPage())}),c(9,"Previous"),s(),a(10,"button",34),p("click",function(){C(r);let n=v();return E(n.nextPage())}),c(11,"Next"),s()(),a(12,"button",35),p("click",function(){C(r);let n=v();return E(n.toggleDocumentVisibility())}),c(13,"\u0110\xF3ng"),s()()()}if(i&2){let r=v();u(3),y(r.ebook==null?null:r.ebook.name),u(3),y(r.pages[r.currentPage-1]),u(2),g("disabled",r.currentPage===1),u(2),g("disabled",r.currentPage===r.totalPages)}}var nd=i=>({playing:i});function id(i,e){if(i&1){let r=P();a(0,"div",38)(1,"p"),c(2),s(),a(3,"audio",39),p("play",function(){C(r);let n=v(2);return E(n.onPlay())})("pause",function(){C(r);let n=v(2);return E(n.onPause())}),f(4,"source",40),c(5," Tr\xECnh duy\u1EC7t c\u1EE7a b\u1EA1n kh\xF4ng h\u1ED7 tr\u1EE3 th\u1EBB \xE2m thanh. "),s()()}if(i&2){let r=v(),t=r.index,n=r.$implicit,o=v();g("ngClass",Xe(3,nd,o.isPlaying)),u(2),S("Ph\u1EA7n ",t+1,""),u(2),g("src",n==null?null:n.mp3_url,ve)}}function od(i,e){if(i&1&&(a(0,"div",36),w(1,id,6,5,"div",37),s()),i&2){let r=e.index,t=v();g("ngClass",Xe(2,Bo,r===t.currentMp3Index)),u(1),g("ngIf",t.isAudioVisible)}}var Ws=(()=>{let e=class e{constructor(t,n,o,l,d,h,_,b,D,x){this.ebookService=t,this.cartService=n,this.orderService=o,this.activatedRoute=l,this.token=d,this.role=h,this.userService=_,this.router=b,this.loveService=D,this.route=x,this.ebookId=0,this.currentImageIndex=0,this.currentMp3Index=0,this.quantity=1,this.isPressedAddToCart=!1,this.isDocumentVisible=!1,this.isAudioVisible=!1,this.isPlaying=!1,this.isLoved=!1,this.isPressedAddToLove=!1,this.orderId=0,this.orders=[],this.totalPages=0,this.keyword="",this.tokensv="",this.isComplete=!0,this.cartItemCount=0,this.isEbookPurchased=!1,this.pages=[],this.currentPage=1,this.pageSize=1100,this.allOrdersStatus=[],this.userRole=""}ngOnInit(){let t=this.activatedRoute.snapshot.paramMap.get("id");t!==null&&(this.ebookId=+t),isNaN(this.ebookId)?console.error("Invalid ebookId:",t):this.ebookService.getDetailEbook(this.ebookId).subscribe({next:n=>{n.ebook_images?.length>0&&(n.ebook_images.forEach(o=>{o.image_url.startsWith(T.apiBaseUrl)||(o.image_url=`${T.apiBaseUrl}/ebooks/images/${o.image_url}`)}),n.ebook_mp3s.length>0&&n.ebook_mp3s.forEach(o=>{o.mp3_url.startsWith(T.apiBaseUrl)||(o.mp3_url=`${T.apiBaseUrl}/ebooks/audios/${o.mp3_url}`)})),this.ebook=n,this.showImage(0),this.splitContentIntoPages(),this.ebook&&this.ebook.id!==void 0&&this.loveService.isProductInLove(this.ebook.id)&&(this.ebook.isLoved=!0)},complete:()=>{console.log("Fetch complete")},error:n=>{console.error("Error fetching detail:",n)}})}showImage(t){this.ebook&&this.ebook.ebook_images&&this.ebook.ebook_images.length>0&&(t<0?t=0:t>=this.ebook.ebook_images.length&&(t=this.ebook.ebook_images.length-1),this.currentImageIndex=t)}thumbnailClick(t){this.currentImageIndex=t}nextImage(){this.showImage(this.currentImageIndex+1)}previousImage(){this.showImage(this.currentImageIndex-1)}checkEbookStatus(){this.orderService.getAllOrdersStatus().subscribe(t=>{t.some(o=>o.ebook_id===this.ebookId&&(o.status==="COMPLETE"||o.status==="Ho\xE0n Th\xE0nh"))&&(this.isEbookPurchased=!0)},t=>{console.error("L\u1ED7i khi l\u1EA5y th\xF4ng tin tr\u1EA1ng th\xE1i \u0111\u01A1n h\xE0ng:",t),alert(`\u0110\xE3 x\u1EA3y ra l\u1ED7i khi l\u1EA5y th\xF4ng tin \u0111\u01A1n h\xE0ng. Vui l\xF2ng th\u1EED l\u1EA1i sau. Chi ti\u1EBFt l\u1ED7i: ${t.message}`)})}addToCart(){this.isPressedAddToCart=!0;let t=15;if(!this.token.getUserId()){this.isPlaying=!1,alert("B\u1EA1n c\u1EA7n \u0111\u0103ng nh\u1EADp \u0111\u1EC3 th\xEAm v\xE0o gi\u1ECF h\xE0ng."),this.router.navigate(["/login"]);return}if(this.ebook?.active==!0){alert("Ebook ng\u1EEBng b\xE1n. Kh\xF4ng th\u1EC3 th\xEAm v\xE0o gi\u1ECF");return}if(this.ebook?.price===0){alert("\u0110\xE2y l\xE0 s\xE1ch mi\u1EC5n ph\xED.");return}this.orderService.getAllOrdersStatus().subscribe(n=>{let o=n.filter(_=>_.ebook_id===this.ebookId),l=n.some(_=>_.ebook_id===this.ebookId&&(_.status==="COMPLETE"||_.status==="Ho\xE0n Th\xE0nh")),d=o.some(_=>_.status==="PROCESSING"),h=o.some(_=>_.status==="CANCEL");if(l){alert("B\u1EA1n \u0111\xE3 mua ebook n\xE0y r\u1ED3i.");return}if(this.cartService.getCart().size>=t){alert("Gi\u1ECF h\xE0ng c\u1EE7a b\u1EA1n \u0111\xE3 \u0111\u1EA7y. Vui l\xF2ng x\xF3a s\u1EA3n ph\u1EA9m \u0111\u1EC3 th\xEAm");return}if(d){alert("Ebook \u0111ang x\u1EED l\xFD, vui l\xF2ng h\u1EE7y \u0111\u01A1n h\xE0ng \u0111\u1EC3 th\xEAm v\xE0o gi\u1ECF.");return}h?(this.addEbookToCart(),location.reload()):(this.addEbookToCart(),location.reload())},n=>{console.error("L\u1ED7i khi l\u1EA5y th\xF4ng tin tr\u1EA1ng th\xE1i \u0111\u01A1n h\xE0ng:",n),alert(`\u0110\xE3 x\u1EA3y ra l\u1ED7i khi l\u1EA5y th\xF4ng tin \u0111\u01A1n h\xE0ng. Vui l\xF2ng th\u1EED l\u1EA1i sau. Chi ti\u1EBFt l\u1ED7i: ${n.message}`)})}addEbookToCart(){if(this.ebook){let t=this.cartService.getCart(),n=10;if(this.cartService.isProductInCart(this.ebook.id)){alert("S\u1EA3n ph\u1EA9m \u0111\xE3 t\u1ED3n t\u1EA1i trong gi\u1ECF h\xE0ng.");return}else{this.cartService.addToCart(this.ebook.id,this.quantity),alert("Th\xEAm s\u1EA3n ph\u1EA9m v\xE0o gi\u1ECF th\xE0nh c\xF4ng."),this.updateCartItemCount();return}}else console.error("Kh\xF4ng th\u1EC3 th\xEAm s\u1EA3n ph\u1EA9m v\xE0o gi\u1ECF h\xE0ng v\xEC ebook l\xE0 null.");location.reload()}updateCartItemCount(){this.cartItemCount=this.cartService.getTotalItemCount()}buyNow(){if(!this.token.getUserId()){this.isPlaying=!1,alert("B\u1EA1n c\u1EA7n \u0111\u0103ng nh\u1EADp \u0111\u1EC3 th\u1EF1c hi\u1EC7n mua ngay."),this.router.navigate(["/login"]);return}if(this.ebook?.active==!0){alert("Ebook ng\u1EEBng b\xE1n. Kh\xF4ng th\u1EC3 mua");return}if(this.ebook?.price===0){alert("\u0110\xE2y l\xE0 s\xE1ch mi\u1EC5n ph\xED.");return}this.orderService.getAllOrdersStatus().subscribe(t=>{let n=t.filter(_=>_.ebook_id===this.ebookId),o=t.some(_=>_.ebook_id===this.ebookId&&(_.status==="COMPLETE"||_.status==="Ho\xE0n Th\xE0nh")),l=n.some(_=>_.status==="PROCESSING"),d=n.some(_=>_.status==="CANCEL");if(o){alert("B\u1EA1n \u0111\xE3 mua ebook n\xE0y r\u1ED3i.");return}let h=t.find(_=>_.ebook_id===this.ebookId);if(l){alert("Ebook \u0111ang x\u1EED l\xFD, vui l\xF2ng h\u1EE7y \u0111\u01A1n h\xE0ng \u0111\u1EC3 mua l\u1EA1i.");return}d?(this.addEbookToCart(),this.router.navigate(["/orders"])):(this.addEbookToCart(),this.router.navigate(["/orders"]))},t=>{console.error("Error fetching orders status:",t),alert(`\u0110\xE3 x\u1EA3y ra l\u1ED7i khi l\u1EA5y th\xF4ng tin \u0111\u01A1n h\xE0ng. Vui l\xF2ng th\u1EED l\u1EA1i sau. Chi ti\u1EBFt l\u1ED7i: ${t.message}`)})}toggleDocumentVisibility(){if(this.ebook?.active==!0&&this.ebook.price===0){alert("Ebook ng\u1EEBng ph\xE1t h\xE0nh kh\xF4ng th\u1EC3 \u0111\u1ECDc.");return}if(this.ebook?.document.length===0&&alert("Ebook kh\xF4ng d\u1EEF li\u1EC7u \u0111\u1ECDc"),this.ebook?.price===0){this.isDocumentVisible=!this.isDocumentVisible,this.isDocumentVisible?(this.isAudioVisible=!1,document.querySelector(".container")?.classList.add("hidden"),document.querySelector(".document")?.classList.remove("hidden")):(document.querySelector(".container")?.classList.remove("hidden"),document.querySelector(".document")?.classList.add("hidden"));return}if(this.ebook?.price!==0&&!this.token.getUserId()){this.isPlaying=!1,alert("B\u1EA1n c\u1EA7n \u0111\u0103ng nh\u1EADp \u0111\u1EC3 \u0111\u1ECDc s\xE1ch.");return}this.checkRole().then(()=>{if(this.userRole==="admin"){this.isDocumentVisible=!this.isDocumentVisible,this.isDocumentVisible?(this.isAudioVisible=!1,document.querySelector(".container")?.classList.add("hidden"),document.querySelector(".document")?.classList.remove("hidden")):(document.querySelector(".container")?.classList.remove("hidden"),document.querySelector(".document")?.classList.add("hidden"));return}this.orderService.getAllOrdersStatus().subscribe(t=>{if(this.ebookId){let n=t.some(l=>l.ebook_id===this.ebookId&&l.status==="COMPLETE"),o=t.some(l=>l.ebook_id===this.ebookId&&l.active===!1);if(this.ebook?.active==!0&&!n){alert("Ebook ng\u1EEBng b\xE1n. Kh\xF4ng th\u1EC3 \u0111\u1ECDc.");return}if(o){alert("\u0110\u01A1n h\xE0ng c\u1EE7a b\u1EA1n t\u1EA1m kh\xF3a. Vui l\xF2ng li\xEAn h\u1EC7 admin");return}if(n)this.isDocumentVisible=!this.isDocumentVisible,this.isDocumentVisible?(this.isAudioVisible=!1,document.querySelector(".container")?.classList.add("hidden"),document.querySelector(".document")?.classList.remove("hidden")):(document.querySelector(".container")?.classList.remove("hidden"),document.querySelector(".document")?.classList.add("hidden"));else{let l=t.some(d=>d.ebook_id===this.ebookId&&d.status==="PROCESSING");alert(l?"\u0110\u01A1n h\xE0ng c\u1EE7a b\u1EA1n \u0111ang x\u1EED l\xFD. B\u1EA1n kh\xF4ng th\u1EC3 \u0111\u1ECDc s\xE1ch ngay b\xE2y gi\u1EDD.":"B\u1EA1n ch\u01B0a mua s\xE1ch n\xE0y.")}}else alert("Th\xF4ng tin s\xE1ch kh\xF4ng h\u1EE3p l\u1EC7.")},t=>{console.error("Error fetching orders status:",t),alert("\u0110\xE3 x\u1EA3y ra l\u1ED7i khi l\u1EA5y th\xF4ng tin \u0111\u01A1n h\xE0ng. Vui l\xF2ng th\u1EED l\u1EA1i sau.")})}).catch(t=>{console.error("Error during role check:",t),alert("\u0110\xE3 x\u1EA3y ra l\u1ED7i khi ki\u1EC3m tra vai tr\xF2 ng\u01B0\u1EDDi d\xF9ng. Vui l\xF2ng th\u1EED l\u1EA1i sau."),this.userService.removeUserFromLocalStorage(),this.token.removeToken(),this.userResponse=this.userService.getUserResponseFromLocalStorage(),this.router.navigate(["/"]),location.reload()})}checkRole(){return new Promise((t,n)=>{this.tokensv=this.token.getToken(),this.userService.getUserDetail(this.tokensv).subscribe({next:o=>{this.userResponse=me($({},o),{date_of_birth:new Date(o.date_of_birth)}),this.userRole=this.userResponse?.role.name||"",t()},error:o=>{console.error("Error fetching user details:",o),n(o)}})})}checkBuyEbook(){this.orderService.getAllOrdersStatus().subscribe(t=>{this.ebookId&&(this.isComplete=t.some(n=>n.ebook_id===this.ebookId&&n.status==="COMPLETE"))},t=>{console.error("Error fetching order status",t)})}toggleAudioVisibility(){if(this.ebook?.ebook_mp3s.length===0&&alert("Ebook kh\xF4ng c\xF3 \xE2m thanh"),this.ebook?.price===0){this.isAudioVisible=!this.isAudioVisible;return}if(this.ebook?.active==!0&&this.ebook.price===0){alert("Ebook ng\u1EEBng ph\xE1t h\xE0nh kh\xF4ng th\u1EC3 nghe.");return}if(!this.token.getUserId()){this.isPlaying=!1,alert("B\u1EA1n c\u1EA7n \u0111\u0103ng nh\u1EADp \u0111\u1EC3 nghe s\xE1ch.");return}this.checkRole().then(()=>{if(this.ebook?.price===0){this.isAudioVisible=!this.isAudioVisible;return}if(this.userRole==="admin"){this.isAudioVisible=!this.isAudioVisible;return}this.orderService.getAllOrdersStatus().subscribe(t=>{if(this.ebookId){let n=t.some(l=>l.ebook_id===this.ebookId&&l.active===!1),o=t.some(l=>l.ebook_id===this.ebookId&&l.status==="COMPLETE");if(this.ebook?.active==!0&&!o){alert("Ebook ng\u1EEBng b\xE1n. Kh\xF4ng th\u1EC3 nghe.");return}if(n){alert("\u0110\u01A1n h\xE0ng c\u1EE7a b\u1EA1n t\u1EA1m kh\xF3a. Vui l\xF2ng li\xEAn h\u1EC7 admin");return}if(o)this.isAudioVisible=!this.isAudioVisible;else{let l=t.some(d=>d.ebook_id===this.ebookId&&d.status==="PROCESSING");alert(l?"\u0110\u01A1n h\xE0ng c\u1EE7a b\u1EA1n \u0111ang x\u1EED l\xFD. B\u1EA1n kh\xF4ng th\u1EC3 nghe s\xE1ch ngay b\xE2y gi\u1EDD.":"B\u1EA1n ch\u01B0a mua s\xE1ch n\xE0y.")}}else alert("Th\xF4ng tin s\xE1ch kh\xF4ng h\u1EE3p l\u1EC7.")},t=>{console.error("Error fetching orders status:",t),alert("\u0110\xE3 x\u1EA3y ra l\u1ED7i khi l\u1EA5y th\xF4ng tin \u0111\u01A1n h\xE0ng. Vui l\xF2ng th\u1EED l\u1EA1i sau.")})}).catch(t=>{console.error("Error during role check:",t),alert("\u0110\xE3 x\u1EA3y ra l\u1ED7i khi ki\u1EC3m tra vai tr\xF2 ng\u01B0\u1EDDi d\xF9ng. Vui l\xF2ng th\u1EED l\u1EA1i sau."),this.userService.removeUserFromLocalStorage(),this.token.removeToken(),this.userResponse=this.userService.getUserResponseFromLocalStorage(),this.router.navigate(["/"]),location.reload()})}onPlay(){this.isPlaying=!0}onPause(){this.isPlaying=!1}playAudio(){if(this.ebook?.price!=0&&!this.token.getUserId()){alert("B\u1EA1n c\u1EA7n \u0111\u0103ng nh\u1EADp \u0111\u1EC3 nghe s\xE1ch.");return}this.isPlaying=!0,setTimeout(()=>{let t=document.querySelector("audio");t&&t.play()})}getCurrentThumbnail(){return this.ebook?.ebook_images[this.currentImageIndex]?.image_url||""}formatPrice(t){return t===void 0?"N/A":t===0?"Mi\u1EC5n Ph\xED":t.toLocaleString("vi-VN")+" \u0111"}toggleLove(t,n){if(n.stopPropagation(),!this.token.getUserId()){alert("B\u1EA1n c\u1EA7n \u0111\u0103ng nh\u1EADp \u0111\u1EC3 th\xEAm y\xEAu th\xEDch."),this.router.navigate(["/login"]);return}t.isLoved?confirm("X\xE1c nh\u1EADn x\xF3a y\xEAu th\xEDch?")&&(this.loveService.removeFromLove(t.id),t.isLoved=!1,location.reload()):(this.addToLove(t,n),t.isLoved=!0,location.reload())}addToLove(t,n){if(this.isPressedAddToLove=!0,this.ebook?.active==!0){alert("Ebook ng\u1EEBng b\xE1n. Kh\xF4ng th\u1EC3 th\xEAm v\xE0o y\xEAu th\xEDch");return}this.token.getUserId()?t?this.loveService.getLove().size>=15?(alert("Y\xEAu th\xEDch c\u1EE7a b\u1EA1n \u0111\xE3 \u0111\u1EA7y. Vui l\xF2ng x\xF3a s\u1EA3n ph\u1EA9m \u0111\u1EC3 th\xEAm"),n.stopPropagation()):this.loveService.isProductInLove(t.id)?(t.isLoved=!0,alert("S\u1EA3n ph\u1EA9m \u0111\xE3 t\u1ED3n t\u1EA1i trong y\xEAu th\xEDch c\u1EE7a b\u1EA1n."),n.stopPropagation()):(this.loveService.addToLove(t.id,this.quantity),alert("Th\xEAm v\xE0o y\xEAu th\xEDch th\xE0nh c\xF4ng."),n.stopPropagation(),t.isLoved=!0,location.reload()):(console.error("Kh\xF4ng th\u1EC3 th\xEAm s\u1EA3n ph\u1EA9m v\xE0o gi\u1ECF h\xE0ng v\xEC ebook l\xE0 null."),n.stopPropagation()):(alert("B\u1EA1n c\u1EA7n \u0111\u0103ng nh\u1EADp \u0111\u1EC3 th\xEAm y\xEAu th\xEDch."),this.router.navigate(["/login"]))}prevPage(){this.currentPage>1&&this.currentPage--}nextPage(){this.currentPage<this.totalPages&&this.currentPage++}splitContentIntoPages(){let t=this.ebook?.document||"",n=Math.ceil(t.length/this.pageSize);this.totalPages=n,this.pages=Array.from({length:n},(o,l)=>t.substring(l*this.pageSize,(l+1)*this.pageSize))}};e.\u0275fac=function(n){return new(n||e)(m(Ve),m(bt),m(We),m(G),m(q),m(Gi),m(re),m(I),m(Ht),m(G))},e.\u0275cmp=O({type:e,selectors:[["app-detail-ebook"]],standalone:!0,features:[k],decls:40,vars:9,consts:[[1,"container"],[1,"intro-section"],[1,"row"],[1,"col-md-6"],["id","carouselExample","data-bs-ride","carousel",1,"carousel","slide"],[1,"carousel-inner"],["class","carousel-item",3,"ngClass",4,"ngFor","ngForOf"],["type","button","data-bs-target","#carouselExample","data-bs-slide","prev",1,"carousel-control-prev",3,"click"],["aria-hidden","true",1,"carousel-control-prev-icon"],[1,"visually-hidden"],["type","button","data-bs-target","#carouselExample","data-bs-slide","next",1,"carousel-control-next",3,"click"],["aria-hidden","true",1,"carousel-control-next-icon"],[1,"thumbnail-container"],["class","thumbnail-item",3,"ngClass","click",4,"ngFor","ngForOf"],["class","document-overlay",4,"ngIf"],["class","audio-section",3,"ngClass",4,"ngFor","ngForOf"],[1,"ebook-details"],[1,"ebook-price"],[1,"btn","btn-secondary","listenbook",3,"click"],[1,"btn","btn-document",3,"click"],[1,"ebook-actions"],[1,"btn","btn-primary",3,"disabled","click"],[1,"btn","btn-success",3,"disabled","click"],[1,"carousel-item",3,"ngClass"],[3,"click"],[1,"fa","fa-heart"],[1,"square-image"],["alt","Ebook Image",1,"ebook_image",3,"src"],[1,"thumbnail-item",3,"ngClass","click"],["alt","Thumbnail Image",1,"thumbnail-image",3,"src"],[1,"document-overlay"],[1,"document-content"],[1,"namebook"],[1,"pagination-controls"],[3,"disabled","click"],[1,"close-button",3,"click"],[1,"audio-section",3,"ngClass"],["class","audio-player",3,"ngClass",4,"ngIf"],[1,"audio-player",3,"ngClass"],["controls","","controlsList","nodownload",3,"play","pause"],["type","audio/mpeg",3,"src"]],template:function(n,o){n&1&&(f(0,"app-header"),a(1,"div",0),f(2,"div",1),a(3,"div",2)(4,"div",3)(5,"div",4)(6,"div",5),w(7,Xc,5,8,"div",6),s(),a(8,"button",7),p("click",function(){return o.previousImage()}),f(9,"span",8),a(10,"span",9),c(11,"Previous"),s()(),a(12,"button",10),p("click",function(){return o.nextImage()}),f(13,"span",11),a(14,"span",9),c(15,"Next"),s()()(),a(16,"div",2)(17,"div",12),w(18,ed,2,4,"div",13),s()(),w(19,td,14,4,"div",14)(20,od,2,4,"div",15),s(),a(21,"div",3)(22,"div",16)(23,"h2"),c(24),s(),a(25,"p"),c(26),s(),a(27,"p",17),c(28),s(),a(29,"button",18),p("click",function(){return o.toggleAudioVisibility()}),c(30,"Nghe S\xE1ch"),s(),a(31,"button",19),p("click",function(){return o.toggleDocumentVisibility()}),c(32,"\u0110\u1ECDc S\xE1ch"),s(),a(33,"div",20)(34,"button",21),p("click",function(){return o.addToCart()}),c(35,"Th\xEAm v\xE0o gi\u1ECF h\xE0ng"),s(),a(36,"button",22),p("click",function(){return o.buyNow()}),c(37,"Mua ngay"),s()()()()()(),f(38,"br")(39,"app-footer")),n&2&&(u(7),g("ngForOf",o.ebook==null?null:o.ebook.ebook_images),u(11),g("ngForOf",o.ebook==null?null:o.ebook.ebook_images),u(1),g("ngIf",o.isDocumentVisible),u(1),g("ngForOf",o.ebook==null?null:o.ebook.ebook_mp3s),u(4),y(o.ebook==null?null:o.ebook.name),u(2),y(o.ebook==null?null:o.ebook.title),u(2),S("Gi\xE1: ",o.formatPrice(o.ebook==null?null:o.ebook.price),""),u(6),g("disabled",o.isEbookPurchased||(o.ebook==null?null:o.ebook.active)),u(2),g("disabled",o.isEbookPurchased||(o.ebook==null?null:o.ebook.active)))},dependencies:[ae,se,F,de,ie,ue,Bi],styles:['@charset "UTF-8";.intro-section[_ngcontent-%COMP%]{color:#fff;padding:20px;text-align:center}.ebook_image[_ngcontent-%COMP%]{width:70%;max-width:70%;height:250px;margin-bottom:10px;object-fit:contain;margin-left:15%}.thumbnail-container[_ngcontent-%COMP%]{display:flex;justify-content:center;margin-top:20px;margin-bottom:20px}.thumbnail-item[_ngcontent-%COMP%]{width:120px;height:120px;margin-right:5px}.thumbnail-item[_ngcontent-%COMP%]:last-child{margin-right:0}.thumbnail-item[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%;height:100%;object-fit:cover}.thumbnail-item.active[_ngcontent-%COMP%]{border:4px solid rgb(233,66,178)}.ebook-details[_ngcontent-%COMP%]{color:#fff;padding:20px}.ebook-actions[_ngcontent-%COMP%]{display:flex;justify-content:flex-start;margin-top:20px}.ebook-actions[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{margin-right:10px}.border-wrapper[_ngcontent-%COMP%]{border:1px solid white}.ebook-quantity[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:flex-start;margin-top:10px}.ebook-quantity[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{background-color:transparent;border:none;color:#fff;font-size:16px;cursor:pointer}.ebook-quantity[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{background-color:transparent;border:none;color:#fff;font-size:16px;text-align:center;width:40px;margin:0 10px}.ebook-quantity[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:focus{outline:none}.carousel-control-prev[_ngcontent-%COMP%]{left:10%}.carousel-control-next[_ngcontent-%COMP%]{right:11%}.ebook-price[_ngcontent-%COMP%]{font-size:1.2em;font-weight:700;margin-top:10px}.ebook-price[_ngcontent-%COMP%]{color:#fff}.listenbook[_ngcontent-%COMP%]{width:160px;height:40px;margin-right:0%}.btn-document[_ngcontent-%COMP%]{background-color:#4caf50;width:100px;height:40px;margin-left:2%;color:#fff}.document-overlay[_ngcontent-%COMP%]{position:fixed;top:20%;left:10%;width:80%;height:63%;background-color:#ffffffe6;border-radius:8px;box-shadow:0 4px 8px #0003;z-index:1000;overflow:hidden;padding:30px;text-align:justify;border:2px solid #af4c4c}.document-overlay[_ngcontent-%COMP%]:hover{border:3px solid rgb(0,149,255)}.document-overlay[_ngcontent-%COMP%]   .document-content[_ngcontent-%COMP%]{position:relative;height:calc(100% - 50px);overflow:hidden}.document-overlay[_ngcontent-%COMP%]   .document-content[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:20px;white-space:pre-wrap;text-align:justify;margin:0}.document-overlay[_ngcontent-%COMP%]   .document-content[_ngcontent-%COMP%]   .pagination-controls[_ngcontent-%COMP%]{position:absolute;bottom:10px;left:50%;transform:translate(-50%);display:flex;justify-content:space-between;width:calc(100% - 20px)}.document-overlay[_ngcontent-%COMP%]   .document-content[_ngcontent-%COMP%]   .pagination-controls[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{padding:10px 20px;border:1px solid #ccc;background:#f0f0f0;cursor:pointer}.document-overlay[_ngcontent-%COMP%]   .document-content[_ngcontent-%COMP%]   .pagination-controls[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:disabled{background:#e0e0e0;cursor:not-allowed}.document-overlay[_ngcontent-%COMP%]   .document-content[_ngcontent-%COMP%]   .close-button[_ngcontent-%COMP%]{position:absolute;bottom:20px;right:10px;border:none;margin-top:20px;background-color:#a84caf;color:#fff;cursor:pointer}.document-overlay[_ngcontent-%COMP%]   .document-content[_ngcontent-%COMP%]   .close-button[_ngcontent-%COMP%]:hover{background-color:#8a3f99}.close-button[_ngcontent-%COMP%]{position:absolute;top:10px;right:10px;background:#e74c3c;color:#fff;border:none;border-radius:50%;width:50px;height:50px;display:flex;align-items:center;justify-content:center;cursor:pointer}.close-button[_ngcontent-%COMP%]:hover{background:#c0392b;width:50px;height:50px}.audio-section[_ngcontent-%COMP%]{align-items:center}.love[_ngcontent-%COMP%]{position:absolute;background:url("./media/love3-3BAC2BAM.png") no-repeat center center;background-size:cover;color:#fff;border:none;top:10px;right:10px;cursor:pointer;width:32px;height:32px;filter:invert(100%)}.love_red[_ngcontent-%COMP%]{position:absolute;background:url("./media/love-F3KCJ7XV.png") no-repeat center center;background-size:cover;color:#fff;border:none;top:10px;right:10px;cursor:pointer;width:32px;height:32px;filter:invert(33%) sepia(84%) saturate(4458%) hue-rotate(340deg) brightness(92%) contrast(96%)}audio[_ngcontent-%COMP%]::-webkit-media-controls-enclosure{overflow:hidden}audio[_ngcontent-%COMP%]::-moz-media-controls-enclosure{overflow:hidden}audio[_ngcontent-%COMP%]::-webkit-media-controls-panel{width:calc(100% - 40px)}audio[_ngcontent-%COMP%]::-webkit-media-controls-play-button, audio[_ngcontent-%COMP%]::-webkit-media-controls-pause-button, audio[_ngcontent-%COMP%]::-webkit-media-controls-volume-slider{display:block!important}']});let i=e;return i})();function rd(i,e){i&1&&(a(0,"div",25),c(1," H\u1ECD v\xE0 t\xEAn l\xE0 tr\u01B0\u1EDDng b\u1EAFt bu\u1ED9c. "),s())}function sd(i,e){i&1&&(a(0,"div",25),c(1," S\u1ED1 \u0111i\u1EC7n tho\u1EA1i l\xE0 tr\u01B0\u1EDDng b\u1EAFt bu\u1ED9c v\xE0 \xEDt nh\u1EA5t 6 k\xFD t\u1EF1. "),s())}function ad(i,e){if(i&1){let r=P();a(0,"div",26),p("click",function(){let o=C(r).$implicit,l=v();return E(l.onEbookClick(o.ebook.id))}),a(1,"div",27),f(2,"img",28),s(),a(3,"div",5),f(4,"br"),a(5,"h5"),c(6),s(),a(7,"p"),c(8),s(),a(9,"p"),c(10),s()(),a(11,"div",29)(12,"button",30),p("click",function(){let o=C(r).index,l=v();return E(l.confirmDelete(o))}),c(13,"X\xF3a"),s()()()}if(i&2){let r=e.$implicit,t=v();u(2),g("src",r.ebook.thumbnail,ve),u(4),y(r.ebook.name),u(2),y(r.ebook.title),u(2),S("Gi\xE1: ",t.formatPrice(r.ebook.price),"")}}function ld(i,e){i&1&&(a(0,"div",31)(1,"div",32)(2,"p"),c(3,"Kh\xF4ng c\xF3 s\u1EA3n ph\u1EA9m trong gi\u1ECF h\xE0ng"),s()()())}var qs=(()=>{let e=class e{constructor(){this.cartService=A(bt),this.ebookService=A(Ve),this.orderService=A(We),this.tokenService=A(q),this.formBuilder=A(Oi),this.router=A(I),this.userService=A(re),this.tokensv="",this.cartItems=[],this.totalAmount=0,this.couponDiscount=0,this.cart=new Map,this.orderData={user_id:0,fullname:"",phone_number:"",status:"pending",note:"",total_money:0,payment_method:"VNPay",cart_items:[]},this.defaultImageUrl="uploads/default-image.jpg",this.userRole="",this.orderForm=this.formBuilder.group({fullname:["",Je.required],email:["",[Je.email]],phone_number:["",[Je.required,Je.minLength(6)]],address:["",[Je.required,Je.minLength(5)]],note:[""],couponCode:[""],payment_method:["VNPay"]})}ngOnInit(){debugger;this.cartService.refreshCart(),this.orderData.user_id=this.tokenService.getUserId(),this.populateUserDetails();debugger;this.cart=this.cartService.getCart();let t=Array.from(this.cart.keys());debugger;t.length!==0&&this.ebookService.getEbooksByIds(t).subscribe({next:n=>{debugger;this.cartItems=t.map(o=>{debugger;let l=n.find(d=>d.id===o);return l&&(l.thumbnail=`${T.apiBaseUrl}/ebooks/images/${l.thumbnail}`),{ebook:l,quantity:this.cart.get(o)}}),console.log("haha")},complete:()=>{debugger;this.calculateTotal()},error:n=>{debugger;console.error("Error fetching detail:",n)}})}checkRole(){return new Promise((t,n)=>{this.tokensv=this.tokenService.getToken(),this.userService.getUserDetail(this.tokensv).subscribe({next:o=>{this.userResponse=me($({},o),{date_of_birth:new Date(o.date_of_birth)}),this.userRole=this.userResponse?.role.name||"",t()},error:o=>{console.error("Error fetching user details:",o),n(o)}})})}placeOrder(){if(this.cartItems.length===0){alert("Gi\u1ECF h\xE0ng r\u1ED7ng");return}else if(this.orderForm.errors==null){this.orderData=$($({},this.orderData),this.orderForm.value),this.orderData.cart_items=this.cartItems.map(n=>({ebook_id:n.ebook.id,quantity:n.quantity}));let t=this.cartItems.find(n=>n.ebook.active===!0);if(t){alert("C\xF3 Ebook "+t.ebook.name+" ng\u1EEBng b\xE1n. Kh\xF4ng th\u1EC3 mua ngay b\xE2y gi\u1EDD");return}this.orderData.total_money=this.totalAmount,confirm("X\xE1c nh\u1EADn \u0111\u1EB7t h\xE0ng?")&&this.orderService.placeOrder(this.orderData).subscribe({next:n=>{debugger;this.cartService.clearCart(),this.router.navigate(["/payment-form"],{queryParams:{amount:this.totalAmount,orderInfo:n.id}})},complete:()=>{debugger;this.calculateTotal()},error:n=>{debugger;alert(`L\u1ED7i khi \u0111\u1EB7t h\xE0ng: ${n}`)}})}else alert("D\u1EEF li\u1EC7u kh\xF4ng h\u1EE3p l\u1EC7. Vui l\xF2ng ki\u1EC3m tra l\u1EA1i.")}decreaseQuantity(t){this.cartItems[t].quantity>1&&(this.cartItems[t].quantity--,this.updateCartFromCartItems(),this.calculateTotal())}increaseQuantity(t){this.cartItems[t].quantity++,this.updateCartFromCartItems(),this.calculateTotal(),location.reload()}calculateTotal(){this.totalAmount=this.cartItems.reduce((t,n)=>t+n.ebook.price*n.quantity,0)}confirmDelete(t){if(confirm("B\u1EA1n c\xF3 ch\u1EAFc ch\u1EAFn mu\u1ED1n x\xF3a s\u1EA3n ph\u1EA9m n\xE0y?")){this.cartItems.splice(t,1),this.updateCartFromCartItems(),this.calculateTotal(),location.reload();return}location.reload()}updateCartFromCartItems(){this.cart.clear(),this.cartItems.forEach(t=>{this.cart.set(t.ebook.id,t.quantity)}),this.cartService.setCart(this.cart)}onEbookClick(t){debugger;this.router.navigate(["/ebooks",t])}formatPrice(t){return t.toLocaleString("vi-VN")+" \u0111"}populateUserDetails(){let t=this.tokenService.getToken();this.userService.getUserDetail(t).subscribe({next:n=>{this.orderForm.patchValue({fullname:n.fullname,phone_number:n.phone_number})},error:n=>{console.error("Error fetching user details:",n)}})}};e.\u0275fac=function(n){return new(n||e)},e.\u0275cmp=O({type:e,selectors:[["app-order"]],standalone:!0,features:[k],decls:47,vars:10,consts:[[1,"container"],[1,"intro-section"],[1,"h1"],[3,"formGroup"],[1,"row"],[1,"col-md-5"],[1,"ebook-header"],[1,"mb-3"],["for","fullname",1,"form-label"],["type","text","formControlName","fullname","id","fullname","readonly","",1,"form-control"],["class","invalid-feedback"],["for","phone",1,"form-label"],["type","text","formControlName","phone_number","placeholder","S\u1ED1 \u0111i\u1EC7n tho\u1EA1i","id","phone","readonly","",1,"form-control"],["for","note",1,"form-label"],["formControlName","note","id","note","placeholder","Nh\u1EADp ghi ch\xFA","rows","3",1,"form-control"],["for","payment_method",1,"form-label"],["formControlName","payment_method","id","payment_method",1,"form-select"],["value","VNPay"],[1,"col-md-7"],["class","itemebook row mb-3",3,"click",4,"ngFor","ngForOf"],["class","row mb-3",4,"ngIf"],[1,"col-md-6"],[1,"text-end"],[1,"fw-bold"],["type","submit",1,"btn","btn-success",3,"click"],[1,"invalid-feedback"],[1,"itemebook","row","mb-3",3,"click"],[1,"col-md-3"],["alt","Ebook Image",1,"ebook-image",3,"src"],[1,"col-md-4"],[1,"btn","btn-sm","btn-danger",3,"click"],[1,"row","mb-3"],[1,"col-md-12","count-item"]],template:function(n,o){n&1&&(f(0,"app-header"),a(1,"div",0)(2,"div",1)(3,"h1",2),c(4,"\u0110\xE2y l\xE0 trang Order"),s()(),a(5,"form",3)(6,"div",4)(7,"div",5)(8,"h2",6),c(9,"Th\xF4ng tin ng\u01B0\u1EDDi mua"),s(),a(10,"div",7)(11,"label",8),c(12,"H\u1ECD v\xE0 t\xEAn"),s(),f(13,"input",9),w(14,rd,2,0,"div",10),s(),a(15,"div",7)(16,"label",11),c(17,"S\u1ED1 \u0111i\u1EC7n tho\u1EA1i"),s(),f(18,"input",12),w(19,sd,2,0,"div",10),s(),a(20,"div",7)(21,"label",13),c(22,"Ghi ch\xFA"),s(),f(23,"textarea",14),s(),a(24,"div",7)(25,"label",15),c(26,"Ph\u01B0\u01A1ng th\u1EE9c thanh to\xE1n"),s(),a(27,"select",16)(28,"option",17),c(29,"VN Pay"),s()()()(),a(30,"div",18),f(31,"br"),w(32,ad,14,4,"div",19)(33,ld,4,0,"div",20),f(34,"hr"),a(35,"div",4)(36,"div",21)(37,"div",22)(38,"p",23),c(39),s()()(),a(40,"div",22)(41,"button",24),p("click",function(){return o.placeOrder()}),c(42,"Mua h\xE0ng"),s()()(),f(43,"hr"),s()()()(),f(44,"br")(45,"br")(46,"app-footer")),n&2&&(u(5),g("formGroup",o.orderForm),u(8),J("is-invalid",o.orderForm.get("fullname").invalid&&o.orderForm.get("fullname").touched),u(1),ne(14,o.orderForm.get("fullname").invalid&&o.orderForm.get("fullname").touched?14:-1),u(4),J("is-invalid",o.orderForm.get("phone_number").invalid&&o.orderForm.get("phone_number").touched),u(1),ne(19,o.orderForm.get("phone_number").invalid&&o.orderForm.get("phone_number").touched?19:-1),u(13),g("ngForOf",o.cartItems),u(1),g("ngIf",!o.cartItems||o.cartItems.length===0),u(6),S("T\u1ED5ng c\u1ED9ng: ",o.formatPrice(o.totalAmount-o.couponDiscount),""))},dependencies:[ae,se,F,ie,ue,H,Re,tt,nt,z,$e,W,Ne,ki,zn,Wn],styles:[".container[_ngcontent-%COMP%]{color:#fff}.intro-section[_ngcontent-%COMP%]{color:#fff;padding:20px;text-align:center}.count-item[_ngcontent-%COMP%]{color:#fff;font-size:20px}.form-control[_ngcontent-%COMP%]{background-color:#13172a;border:1px solid rgb(29,33,54);color:#fff}.h1[_ngcontent-%COMP%]{color:#fff}.form-control[_ngcontent-%COMP%]:focus{border-color:#fff;background-color:#13172a}.form-label[_ngcontent-%COMP%]{color:#fff}.ebook-header[_ngcontent-%COMP%]{color:#e942b2}.ebook-order[_ngcontent-%COMP%]{color:#69f4b5}table[_ngcontent-%COMP%]{width:100%;border-radius:10px;border:none;border-collapse:separate;border:1px solid white;border-spacing:0;background-color:#13172a}th[_ngcontent-%COMP%], td[_ngcontent-%COMP%]{padding:10px;text-align:center}.ebook-info[_ngcontent-%COMP%]{display:flex;align-items:center}.ebook-image[_ngcontent-%COMP%]{width:100px;height:100px;border-radius:5px;margin-right:10px}.ebook-name[_ngcontent-%COMP%]{color:#fff;margin-right:10px;text-align:left}.btn-gradient[_ngcontent-%COMP%]{background:linear-gradient(to right,rgb(233,66,178),rgb(127,68,255));color:red;border-radius:30px;width:200px}.border-wrapper[_ngcontent-%COMP%]{border:1px solid white}.ebook-quantity[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:flex-start;margin-top:10px}.ebook-quantity[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{background-color:transparent;border:none;color:#fff;font-size:16px;cursor:pointer}.ebook-quantity[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{background-color:transparent;border:none;color:#fff;font-size:16px;text-align:center;width:40px;margin:0 10px}.ebook-quantity[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:focus{outline:none}.note[_ngcontent-%COMP%]{color:#fff}.itemebook[_ngcontent-%COMP%]{background-color:#2a8958;align-items:center}.itemebook[_ngcontent-%COMP%]:hover{border:2px solid rgb(255,0,200)}.btn-danger[_ngcontent-%COMP%]{position:absolute}"]});let i=e;return i})();function cd(i,e){i&1&&(a(0,"div",18),c(1," H\u1ECD v\xE0 t\xEAn l\xE0 tr\u01B0\u1EDDng b\u1EAFt bu\u1ED9c. "),s())}function dd(i,e){i&1&&(a(0,"div",18),c(1," M\u1EADt kh\u1EA9u \xEDt nh\u1EA5t 3 k\xFD t\u1EF1. "),s())}function ud(i,e){i&1&&(a(0,"div",18),c(1," M\u1EADt kh\u1EA9u kh\xF4ng kh\u1EDBp. "),s())}var Js=(()=>{let e=class e{constructor(t,n,o,l,d){this.formBuilder=t,this.activatedRoute=n,this.userService=o,this.router=l,this.tokenService=d,this.token="",this.userProfileForm=this.formBuilder.group({fullname:[""],address:["",[Je.minLength(3)]],password:["",[Je.minLength(3)]],retype_password:["",[Je.minLength(3)]],date_of_birth:[Date.now()]},{validators:this.passwordMatchValidator})}ngOnInit(){debugger;this.token=this.tokenService.getToken(),this.userService.getUserDetail(this.token).subscribe({next:t=>{debugger;this.userResponse=me($({},t),{date_of_birth:new Date(t.date_of_birth)}),this.userProfileForm.patchValue({fullname:this.userResponse?.fullname??"",address:this.userResponse?.address??"",date_of_birth:this.userResponse?.date_of_birth.toISOString().substring(0,10)}),this.userService.saveUserResponseToLocalStorage(this.userResponse)},complete:()=>{debugger},error:t=>{debugger;alert(t.error.message)}})}passwordMatchValidator(){return t=>{let n=t.get("password")?.value,o=t.get("retype_password")?.value;return n!==o?{passwordMismatch:!0}:null}}save(){debugger;if(this.userProfileForm.valid){let t={fullname:this.userProfileForm.get("fullname")?.value,address:this.userProfileForm.get("address")?.value,password:this.userProfileForm.get("password")?.value,retype_password:this.userProfileForm.get("retype_password")?.value,date_of_birth:this.userProfileForm.get("date_of_birth")?.value};this.userService.updateUserDetail(this.token,t).subscribe({next:n=>{this.userService.removeUserFromLocalStorage(),this.tokenService.removeToken(),this.router.navigate(["/login"]),alert("Th\xF4ng tin \u0111\xE3 \u0111\u01B0\u1EE3c c\u1EADp nh\u1EADt"),location.reload()},error:n=>{alert("M\u1EADt kh\u1EA9u v\xE0 m\u1EADt kh\u1EA9u g\xF5 l\u1EA1i ch\u01B0a ch\xEDnh x\xE1c"),alert(n.error.message)}})}else this.userProfileForm.hasError("passwordMismatch")&&alert("M\u1EADt kh\u1EA9u v\xE0 m\u1EADt kh\u1EA9u g\xF5 l\u1EA1i ch\u01B0a ch\xEDnh x\xE1c")}};e.\u0275fac=function(n){return new(n||e)(m(Oi),m(G),m(re),m(I),m(q))},e.\u0275cmp=O({type:e,selectors:[["user-profile"]],standalone:!0,features:[k],decls:41,vars:12,consts:[[3,"formGroup"],[1,"row"],[1,"col-md-3","mx-auto"],[1,"product-header"],[1,"mb-3"],["for","fullname",1,"form-label"],["type","text","formControlName","fullname","id","fullname",1,"form-control"],["class","invalid-feedback"],["for","address",1,"form-label"],["type","text","formControlName","address","id","address",1,"form-control"],["for","date_of_birth",1,"form-label"],["type","date","formControlName","date_of_birth","id","date_of_birth",1,"form-control"],["for","password",1,"form-label"],["type","password","formControlName","password","placeholder","M\u1EADt kh\u1EA9u","required","","id","password",1,"form-control"],["for","retype_password",1,"form-label"],["type","password","formControlName","retype_password","placeholder","Nh\u1EADp l\u1EA1i m\u1EADt kh\u1EA9u","required","","id","retype_password",1,"form-control"],[1,"text-center"],["type","button",1,"btn","btn-primary",3,"click"],[1,"invalid-feedback"]],template:function(n,o){n&1&&(f(0,"app-header")(1,"br")(2,"br"),a(3,"form",0)(4,"div",1)(5,"div",2)(6,"h2",3),c(7,"Th\xF4ng tin ng\u01B0\u1EDDi d\xF9ng"),s(),f(8,"br"),a(9,"div",4)(10,"label",5),c(11,"H\u1ECD v\xE0 t\xEAn"),s(),f(12,"input",6),w(13,cd,2,0,"div",7),s(),a(14,"div",4)(15,"label",8),c(16,"Address"),s(),f(17,"input",9),s(),a(18,"div",4)(19,"label",10),c(20,"Ng\xE0y sinh"),s(),f(21,"input",11),s(),a(22,"div",4)(23,"label",12),c(24,"M\u1EADt kh\u1EA9u"),s(),f(25,"input",13),w(26,dd,2,0,"div",7),s(),a(27,"div",4)(28,"label",14),c(29,"Nh\u1EADp l\u1EA1i m\u1EADt kh\u1EA9u"),s(),f(30,"input",15),w(31,ud,2,0,"div",7),s(),f(32,"br"),a(33,"div",16)(34,"button",17),p("click",function(){return o.save()}),c(35,"L\u01B0u thay \u0111\u1ED5i"),s()()()()(),f(36,"br")(37,"br")(38,"br")(39,"br")(40,"app-footer")),n&2&&(u(3),g("formGroup",o.userProfileForm),u(9),J("is-invalid",o.userProfileForm.get("fullname").invalid&&o.userProfileForm.get("fullname").touched),u(1),ne(13,o.userProfileForm.get("fullname").invalid&&o.userProfileForm.get("fullname").touched?13:-1),u(4),J("is-invalid",o.userProfileForm.get("address").invalid&&o.userProfileForm.get("address").touched),u(8),J("is-invalid",o.userProfileForm.get("password").invalid&&o.userProfileForm.get("password").touched),u(1),ne(26,o.userProfileForm.get("password").invalid&&o.userProfileForm.get("password").touched?26:-1),u(4),J("is-invalid",o.userProfileForm.get("retype_password").invalid&&o.userProfileForm.get("retype_password").touched),u(1),ne(31,o.userProfileForm.hasError("passwordMismatch")?31:-1))},dependencies:[ae,se,F,H,Re,z,W,Ne,Ue,ki,zn,Wn],styles:[".container[_ngcontent-%COMP%]{color:#fff;height:700px}.intro-section[_ngcontent-%COMP%]{color:#fff;padding:20px;text-align:center}.form-control[_ngcontent-%COMP%]{background-color:#13172a;border:1px solid rgb(29,33,54);color:#fff}.form-control[_ngcontent-%COMP%]:focus{border-color:#fff;background-color:#13172a}.form-label[_ngcontent-%COMP%]{color:#fff}.product-header[_ngcontent-%COMP%]{color:#e942b2}.product-order[_ngcontent-%COMP%]{color:#69f4b5}"]});let i=e;return i})();function hd(i,e){if(i&1&&(a(0,"li",8)(1,"div",19)(2,"a",20),c(3),s()()()),i&2){let r=v();u(3),S(" Hi! ",r.userResponse.fullname," ")}}var $i=(()=>{let e=class e{constructor(t,n,o){this.userService=t,this.tokenService=n,this.router=o}ngOnInit(){this.userResponse=this.userService.getUserResponseFromLocalStorage();debugger;this.router.url==="/admin"&&this.router.navigate(["/admin/users"])}logout(){this.userService.removeUserFromLocalStorage(),this.tokenService.removeToken(),this.userResponse=this.userService.getUserResponseFromLocalStorage(),this.router.navigate(["/"])}showAdminComponent(t){t==="orders"?this.router.navigate(["/admin/orders"]):t==="categories"?this.router.navigate(["/admin/categories"]):t==="products"?this.router.navigate(["/admin/products"]):t==="users"&&this.router.navigate(["/admin/users"])}};e.\u0275fac=function(n){return new(n||e)(m(re),m(q),m(I))},e.\u0275cmp=O({type:e,selectors:[["app-admin"]],standalone:!0,features:[k],decls:35,vars:1,consts:[[1,"container-fluid"],[1,"header","bg-light","text-white","d-flex","justify-content-between"],[1,"header-title"],["class","nav-item",4,"ngIf"],[1,"btn","btn-danger","btn-sm",3,"click"],[1,"row"],["id","sidebar",1,"col-md-2","col-lg-2","d-md-block","bg-light","sidebar"],[1,"nav","flex-column"],[1,"nav-item"],["routerLink","/admin/users","routerLinkActive","active",1,"nav-link",3,"click"],[1,"fab","fa-user","icon"],["routerLink","/admin/orders","routerLinkActive","active",1,"nav-link",3,"click"],[1,"fab","fa-first-order","icon"],["routerLink","/admin/categories","routerLinkActive","active",1,"nav-link",3,"click"],[1,"fab","fa-canadian-maple-leaf","icon"],["routerLink","/admin/products","routerLinkActive","active",1,"nav-link",3,"click"],[1,"fab","fa-codepen","icon"],["routerLink","/admin/comments","routerLinkActive","active",1,"nav-link",3,"click"],[1,"main-content","col-md-10","col-lg-10","overflow-auto"],[1,"notification"],[1,"nav-link","user"]],template:function(n,o){n&1&&(a(0,"div",0)(1,"header",1),f(2,"h1",2),w(3,hd,4,1,"li",3),a(4,"button",4),p("click",function(){return o.logout()}),c(5,"Logout"),s()(),a(6,"div",5)(7,"nav",6)(8,"ul",7),f(9,"br")(10,"br"),a(11,"h3"),c(12,"Management"),s(),a(13,"li",8)(14,"a",9),p("click",function(){return o.showAdminComponent("users")}),f(15,"i",10),c(16," Users "),s()(),a(17,"li",8)(18,"a",11),p("click",function(){return o.showAdminComponent("orders")}),f(19,"i",12),c(20," Orders "),s()(),a(21,"li",8)(22,"a",13),p("click",function(){return o.showAdminComponent("categories")}),f(23,"i",14),c(24," Categories "),s()(),a(25,"li",8)(26,"a",15),p("click",function(){return o.showAdminComponent("products")}),f(27,"i",16),c(28," Ebook "),s()(),a(29,"li",8)(30,"a",17),p("click",function(){return o.showAdminComponent("comments")}),f(31,"i",10),c(32," Comments "),s()()()(),a(33,"div",18),f(34,"router-outlet"),s()()()),n&2&&(u(3),g("ngIf",o.userResponse))},dependencies:[F,ue,et,pi,Ft,mi],styles:['.container-fluid[_ngcontent-%COMP%]{background-color:#fff;padding-left:0!important;padding-right:0!important}.header[_ngcontent-%COMP%]{background-color:#3e3e3e;color:#fff;padding:20px;text-align:center}.user[_ngcontent-%COMP%]{margin-left:90px;color:#639;font-size:25px;font-weight:700}.btn-sm[_ngcontent-%COMP%]{font-size:18px}#sidebar[_ngcontent-%COMP%]{background-color:#007bff!important;color:#fff;height:100vh;width:250px;position:fixed;top:0;left:0;overflow-y:auto;z-index:1000}#sidebar[_ngcontent-%COMP%]   .position-sticky[_ngcontent-%COMP%]{position:relative}#sidebar[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{list-style-type:none;padding:0;margin:0}#sidebar[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{position:relative}#sidebar[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{color:#fff;border-top:1px solid rgba(255,255,255,.2);padding:10px 15px;display:block;text-decoration:none}#sidebar[_ngcontent-%COMP%]   a.active[_ngcontent-%COMP%]{font-weight:700;background-color:#0056b3}#sidebar[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{background-color:#0056b3}.icon[_ngcontent-%COMP%]{padding:5px}li[_ngcontent-%COMP%]::marker{content:""}.main-content[_ngcontent-%COMP%]{margin-left:250px;padding:20px}']});let i=e;return i})();var Xn=(()=>{let e=class e{constructor(t,n){this.tokenService=t,this.router=n}canActivate(t,n){let o=this.tokenService.isTokenExpired(),l=this.tokenService.getUserId()>0;debugger;return!o&&l?!0:(this.router.navigate(["/login"]),!1)}};e.\u0275fac=function(n){return new(n||e)(B(q),B(I))},e.\u0275prov=R({token:e,factory:e.\u0275fac,providedIn:"root"});let i=e;return i})(),Sn=(i,e)=>{debugger;return A(Xn).canActivate(i,e)};var pd=(()=>{let e=class e{constructor(t,n,o){this.tokenService=t,this.router=n,this.userService=o}canActivate(t,n){let o=this.tokenService.isTokenExpired(),l=this.tokenService.getUserId()>0;this.userResponse=this.userService.getUserResponseFromLocalStorage();let d=this.userResponse?.role.name=="admin";debugger;return!o&&l&&d?!0:(this.router.navigate(["/login"]),!1)}};e.\u0275fac=function(n){return new(n||e)(B(q),B(I),B(re))},e.\u0275prov=R({token:e,factory:e.\u0275fac,providedIn:"root"});let i=e;return i})(),Qs=(i,e)=>{debugger;return A(pd).canActivate(i,e)};function md(i,e){if(i&1){let r=P();a(0,"button",20),p("click",function(){C(r);let n=v().$implicit,o=v();return E(o.CancelOrder(n))}),c(1,"H\u1EE7y"),s()}}var gd=(i,e,r)=>({processing:i,complete:e,cancel:r}),fd=(i,e)=>({"active-true":i,"active-false":e});function _d(i,e){if(i&1){let r=P();a(0,"tr",15)(1,"td"),c(2),s(),a(3,"td"),c(4),s(),a(5,"td"),c(6),s(),a(7,"td"),c(8),s(),a(9,"td"),c(10),dt(11,"date"),s(),a(12,"td"),c(13),s(),a(14,"td")(15,"p",16),c(16),s()(),a(17,"td"),c(18),s(),a(19,"td")(20,"p",17),c(21),s()(),a(22,"td")(23,"div",18)(24,"button",6),p("click",function(){let o=C(r).$implicit,l=v();return E(l.viewDetails(o))}),c(25,"Xem chi ti\u1EBFt"),s(),w(26,md,2,0,"button",19),s()()()}if(i&2){let r=e.$implicit,t=v();u(2),y(r.id),u(2),y(r.phone_number),u(2),y(r.fullname),u(2),y(r.note),u(2),y(_t(11,12,r.order_date,"dd/MM/yyyy")),u(3),y(t.formatPrice(r.total_money)),u(2),g("ngClass",Mt(15,gd,r.status==="PROCESSING",r.status==="COMPLETE",r.status==="CANCEL")),u(1),S(" ",r.status==="PROCESSING"?"\u0110ang x\u1EED l\xFD":r.status==="COMPLETE"?"Ho\xE0n Th\xE0nh":"\u0110\xE3 H\u1EE7y"," "),u(2),y(r.payment_method),u(2),g("ngClass",Nn(19,fd,r.active===!0,r.active===!1)),u(1),S(" ",r.active===!0?"\u0110ang m\u1EDF":"T\u1EA1m kh\xF3a"," "),u(5),g("ngIf",r.status==="PROCESSING")}}function vd(i,e){if(i&1){let r=P();a(0,"li",12)(1,"a",13),p("click",function(){let o=C(r).$implicit,l=v();return E(l.onPageChange(o-1))}),c(2),s()()}if(i&2){let r=e.$implicit,t=v();J("active",r===t.currentPage+1),u(2),y(r)}}var Ys=(()=>{let e=class e{constructor(t,n,o,l,d,h,_){this.orderService=t,this.router=n,this.route=o,this.location=l,this.userService=d,this.tokenService=h,this.document=_,this.orders=[],this.totalPages=0,this.keyword="",this.currentPage=0,this.totalAmount=0,this.itemsPerPage=12,this.ebookId=293,this.visiblePages=[],this.localStorage=_.defaultView?.localStorage}ngOnInit(){this.currentPage=Number(this.localStorage?.getItem("currentOrderUserPage"))||0;let t=this.tokenService.getUserIdFromLocalStorage();t&&!isNaN(t)?this.getOrdersByUserId(t,this.keyword,this.currentPage,this.itemsPerPage):(console.error("Invalid userId:",t),this.router.navigate(["/login"]))}searchOrders(){this.currentPage=0;let t=this.tokenService.getUserId(),n=this.keyword.trim();switch(n){case"Ho\xE0n Th\xE0nh":n="COMPLETE";break;case"\u0110ang x\u1EED l\xFD":n="PROCESSING";break;case"\u0110\xE3 H\u1EE7y":n="CANCEL";break;case"T\u1EA1m kh\xF3a":n="false";break;case"\u0110ang m\u1EDF":n="true";break;default:n=this.keyword.trim()}t&&!isNaN(t)&&this.getOrdersByUserId(t,n,this.currentPage,this.itemsPerPage)}getOrdersByUserId(t,n,o,l){this.orderService.getAllOrdersByUserId(t,n,o,l).subscribe({next:d=>{this.orders=d.content||[],this.totalPages=d.totalPages||1,this.visiblePages=this.generateVisiblePageArray(this.currentPage,this.totalPages)},error:d=>{console.error("Error fetching orders:",d),d.status===401&&this.router.navigate(["/login"])}})}onPageChange(t){this.currentPage=t<0?0:t;let n=this.tokenService.getUserId();n&&!isNaN(n)&&(this.localStorage?.setItem("currentOrderUserPage",String(this.currentPage)),this.getOrdersByUserId(n,this.keyword,this.currentPage,this.itemsPerPage))}generateVisiblePageArray(t,n){let l=Math.floor(2.5),d=Math.max(t-l,1),h=Math.min(d+5-1,n);h-d+1<5&&(d=Math.max(h-5+1,1)),d=Math.max(d,1),h=Math.min(h,n);let _=h-d+1;if(_<=0)return[];debugger;return new Array(_).fill(0).map((b,D)=>d+D)}viewDetails(t){if(t.active===!1){alert("\u0110\u01A1n mua h\xE0ng t\u1EA1m kh\xF3a. Vui l\xF2ng li\xEAn h\u1EC7 admin");return}this.router.navigate(["/orders/order-user",t.id])}buyment(t){this.orderService.getAllOrdersStatus().subscribe({next:n=>{this.ebookId&&(n.some(l=>l.ebook_id===this.ebookId&&l.status==="COMPLETE")?alert("T\u1ED3n t\u1EA1i ebook \u0111\xE3 mua h\xE3y nh\u1EA5n H\u1EE7y \u0111\u01A1n"):this.router.navigate(["/payment-form"],{queryParams:{amount:t.total_money,orderInfo:t.id}}))},error:n=>{console.error("Error fetching orders status:",n)}})}trackByOrderId(t,n){return n.id}formatPrice(t){return t===void 0?"N/A":t===0?"Mi\u1EC5n Ph\xED":t.toLocaleString("vi-VN")+" \u0111"}CancelOrder(t){if(t.status!=="PROCESSING"){console.error("Only orders with status PROCESSING can be canceled.");return}confirm("X\xE1c nh\u1EADn H\u1EE7y?")&&(this.orderService.cancelOrder(t.id).subscribe({next:n=>{t.status="CANCEL"},error:n=>{console.error("Error canceling order:",n)}}),alert("B\u1EA1n \u0111\xE3 h\u1EE7y th\xE0nh c\xF4ng"),location.reload())}};e.\u0275fac=function(n){return new(n||e)(m(We),m(I),m(G),m(vt),m(re),m(q),m(K))},e.\u0275cmp=O({type:e,selectors:[["app-order-user"]],standalone:!0,features:[k],decls:61,vars:8,consts:[[1,"container"],[1,"h1"],[1,"row","mb-3"],[1,"col-md-8"],["type","text","placeholder","T\xECm \u0111\u01A1n h\xE0ng",1,"form-control","search-input",3,"ngModel","ngModelChange"],[1,"col-md-4"],[1,"btn","btn-primary",3,"click"],[1,"table"],["class","order-user",4,"ngFor","ngForOf","ngForTrackBy"],[1,"pagination-container"],["aria-label","Page navigation example"],[1,"pagination"],[1,"page-item"],[1,"page-link",3,"click"],["class","page-item",3,"active",4,"ngFor","ngForOf"],[1,"order-user"],[1,"status",3,"ngClass"],[1,"active",3,"ngClass"],[2,"display","flex","gap","10px"],["class","btn btn-danger",3,"click",4,"ngIf"],[1,"btn","btn-danger",3,"click"]],template:function(n,o){n&1&&(f(0,"app-header"),a(1,"div",0),f(2,"br"),a(3,"h1",1),c(4,"Orders User Page"),s(),f(5,"br"),a(6,"div",2)(7,"div",3)(8,"input",4),p("ngModelChange",function(d){return o.keyword=d}),s()(),a(9,"div",5)(10,"button",6),p("click",function(){return o.searchOrders()}),c(11,"T\xECm ki\u1EBFm"),s()()(),f(12,"br"),a(13,"table",7)(14,"thead")(15,"tr",7)(16,"th"),c(17,"ID"),s(),a(18,"th"),c(19,"S\u1ED1 \u0111i\u1EC7n tho\u1EA1i"),s(),a(20,"th"),c(21,"T\xEAn"),s(),a(22,"th"),c(23,"Ghi ch\xFA"),s(),a(24,"th"),c(25,"Ng\xE0y \u0111\u1EB7t"),s(),a(26,"th"),c(27,"T\u1ED5ng ti\u1EC1n"),s(),a(28,"th"),c(29,"tr\u1EA1ng th\xE1i TT"),s(),a(30,"th"),c(31,"Ph\u01B0\u01A1ng th\u1EE9c TT"),s(),a(32,"th"),c(33,"Tr\u1EA1ng th\xE1i \u0111\u01A1n h\xE0ng"),s(),a(34,"th"),c(35,"T\xF9y ch\u1ECDn"),s()()(),a(36,"tbody"),w(37,_d,27,22,"tr",8),s()(),a(38,"div",9)(39,"nav",10)(40,"ul",11)(41,"li",12)(42,"a",13),p("click",function(){return o.onPageChange(o.currentPage-1)}),c(43,"Previous"),s()(),w(44,vd,3,3,"li",14),a(45,"li",12)(46,"a",13),p("click",function(){return o.onPageChange(o.currentPage+1)}),c(47,"Next"),s()()()()()(),f(48,"br")(49,"br")(50,"br")(51,"br")(52,"br")(53,"br")(54,"br")(55,"br")(56,"br")(57,"br")(58,"br")(59,"br")(60,"app-footer")),n&2&&(u(8),g("ngModel",o.keyword),u(29),g("ngForOf",o.orders)("ngForTrackBy",o.trackByOrderId),u(4),J("disabled",o.currentPage===0),u(3),g("ngForOf",o.visiblePages),u(1),J("disabled",o.currentPage+1===o.totalPages))},dependencies:[F,de,ie,ue,Ee,H,z,W,Z,se,ae],styles:[".page-number[_ngcontent-%COMP%]{cursor:pointer;padding:5px 10px;border:1px solid #ccc;margin:0 2px;border-radius:3px}.page-number.active[_ngcontent-%COMP%]{background-color:#7f44ff!important;color:#fff;border-color:#7f44ff!important}.btn.btn-primary[_ngcontent-%COMP%]{margin-left:10px}.container-fluid[_ngcontent-%COMP%]{background-color:#fff;padding-left:0!important;padding-right:0!important;height:100vh}.button-primary[_ngcontent-%COMP%]{white-space:nowrap}.pagination-container[_ngcontent-%COMP%]{display:flex;justify-content:center;margin-top:20px}.pagination[_ngcontent-%COMP%]{list-style:none;padding:0;display:flex;justify-content:center}.pagination[_ngcontent-%COMP%]   .page-item[_ngcontent-%COMP%]{margin:0 5px}.pagination[_ngcontent-%COMP%]   .page-item.disabled[_ngcontent-%COMP%]   .page-link[_ngcontent-%COMP%]{pointer-events:none;opacity:.6}.pagination[_ngcontent-%COMP%]   .page-item.active[_ngcontent-%COMP%]   .page-link[_ngcontent-%COMP%]{background-color:#007bff;border-color:#007bff;color:#fff}.pagination[_ngcontent-%COMP%]   .page-item[_ngcontent-%COMP%]   .page-link[_ngcontent-%COMP%]{display:block;padding:.5rem .75rem;background-color:#fff;border:1px solid #dee2e6;color:#007bff;text-decoration:none;border-radius:.25rem;cursor:pointer}.pagination[_ngcontent-%COMP%]   .page-item[_ngcontent-%COMP%]   .page-link[_ngcontent-%COMP%]:hover{background-color:#e9ecef;border-color:#dee2e6}.status.processing[_ngcontent-%COMP%]{color:orange}.status.complete[_ngcontent-%COMP%]{color:green}.status.cancel[_ngcontent-%COMP%]{color:red}.order-user[_ngcontent-%COMP%]:hover{border:2px solid rgb(255,0,200)}.active-true[_ngcontent-%COMP%]{color:green}.active-false[_ngcontent-%COMP%]{color:red}.table[_ngcontent-%COMP%]{background-color:#1f1f1e}.h1[_ngcontent-%COMP%]{color:#fff}"]});let i=e;return i})();function bd(i,e){if(i&1){let r=P();a(0,"tr")(1,"td"),c(2),s(),a(3,"td"),c(4),s(),a(5,"td"),f(6,"img",11),s(),a(7,"td"),c(8),s(),a(9,"td")(10,"Button",12),p("click",function(){let o=C(r).$implicit,l=v();return E(l.onEbookClick(o.ebook.id))}),c(11," \u0110\u1ECDc Ebook"),s()()()}if(i&2){let r=e.$implicit,t=v();u(2),y(r.ebook.id),u(2),y(r.ebook.name),u(2),g("src",r.ebook.thumbnail,ve),u(2),y(t.formatPrice(r.price))}}var yd=(i,e,r)=>({processing:i,complete:e,cancel:r}),Ho=(()=>{let e=class e{constructor(t,n,o){this.route=t,this.router=n,this.orderId=0,this.isPlaying=!1,this.currentMp3Index=0,this.orderResponse={id:0,user_id:0,fullname:"",phone_number:"",note:"",order_date:new Date,status:"",total_money:0,payment_method:"",order_details:[],tracking_number:"",active:!1},this.orderService=o}ngOnInit(){this.getOrderDetails()}getOrderDetails(){this.orderId=Number(this.route.snapshot.paramMap.get("id")),this.orderService.getOrderByUserId(this.orderId).subscribe({next:t=>{debugger;this.orderResponse.id=t.id,this.orderResponse.user_id=t.user_id,this.orderResponse.fullname=t.fullname,this.orderResponse.phone_number=t.phone_number,this.orderResponse.note=t.note,t.order_date&&(this.orderResponse.order_date=new Date(t.order_date[0],t.order_date[1]-1,t.order_date[2])),this.orderResponse.status=t.status,this.orderResponse.total_money=t.total_money,this.orderResponse.payment_method=t.payment_method,this.orderResponse.order_details=t.order_details.map(n=>(n.ebook.thumbnail=`${T.apiBaseUrl}/ebooks/images/${n.ebook.thumbnail}`,n.ebook.audioUrl=`${T.apiBaseUrl}/ebooks/audios/${n.ebook.audioUrl}`,n));debugger},error:t=>{console.error("L\u1ED7i khi l\u1EA5y chi ti\u1EBFt \u0111\u01A1n h\xE0ng:",t)}})}back(){this.router.navigate(["/order-user"],{relativeTo:this.route})}trackByEbookName(t,n){return n.ebook.name}onEbookClick(t){if(this.order?.active===!0){alert("\u0110\u01A1n mua h\xE0ng t\u1EA1m kh\xF3a. Vui l\xF2ng li\xEAn h\u1EC7 admin");return}this.router.navigate(["/ebooks",t])}onPlay(){this.isPlaying=!0}onPause(){this.isPlaying=!1}playAudio(){this.isPlaying=!0,setTimeout(()=>{let t=document.querySelector("audio");t&&t.play()},0)}formatPrice(t){return t===void 0?"N/A":t===0?"Mi\u1EC5n Ph\xED":t.toLocaleString("vi-VN")+" \u0111"}CancelOrder(t){if(t.status!=="PROCESSING"){console.error("Only orders with status PROCESSING can be canceled.");return}this.orderService.cancelOrder(t.id).subscribe({next:n=>{t.status="CANCEL"},error:n=>{console.error("Error canceling order:",n)}}),alert("B\u1EA1n \u0111\xE3 h\u1EE7y th\xE0nh c\xF4ng"),location.reload()}};e.\u0275fac=function(n){return new(n||e)(m(G),m(I),m(We))},e.\u0275cmp=O({type:e,selectors:[["app-detail-order-user"]],standalone:!0,features:[k],decls:71,vars:19,consts:[["appDisableKeys",""],[1,"container"],[1,"row"],[1,"col-md-6"],[1,"h3"],[1,"info-pair"],[1,"status",3,"ngClass"],[1,"table"],[1,"body"],[4,"ngFor","ngForOf","ngForTrackBy"],[1,"back",3,"click"],["alt","Ebook Image",1,"ebook-image",3,"src"],[1,"btn","btn-primary",3,"click"]],template:function(n,o){n&1&&(a(0,"div",0),f(1,"app-header")(2,"br"),a(3,"div",1)(4,"div",2)(5,"div",3)(6,"h3",4),c(7,"Th\xF4ng Tin \u0110\u01A1n H\xE0ng"),s(),f(8,"br"),a(9,"div",5)(10,"p")(11,"strong"),c(12,"M\xE3 \u0110\u01A1n H\xE0ng:"),s(),c(13),s(),a(14,"p")(15,"strong"),c(16,"M\xE3 Ng\u01B0\u1EDDi D\xF9ng:"),s(),c(17),s()(),a(18,"div",5)(19,"p")(20,"strong"),c(21,"H\u1ECD T\xEAn:"),s(),c(22),s(),a(23,"p")(24,"strong"),c(25,"S\u1ED1 \u0110i\u1EC7n Tho\u1EA1i:"),s(),c(26),s()(),a(27,"div",5)(28,"p")(29,"strong"),c(30,"Ghi Ch\xFA:"),s(),c(31),s(),a(32,"p")(33,"strong"),c(34,"Ng\xE0y \u0110\u1EB7t H\xE0ng:"),s(),c(35),dt(36,"date"),s()(),a(37,"div",5)(38,"p")(39,"strong"),c(40,"T\u1ED5ng Ti\u1EC1n:"),s(),c(41),s(),a(42,"p")(43,"strong"),c(44,"Ph\u01B0\u01A1ng Th\u1EE9c Thanh To\xE1n:"),s(),c(45),s()(),a(46,"div",5)(47,"p",6)(48,"strong"),c(49,"Tr\u1EA1ng Th\xE1i:"),s(),c(50),s()()()(),f(51,"br"),a(52,"h3",4),c(53,"Chi Ti\u1EBFt \u0110\u01A1n H\xE0ng"),s(),a(54,"table",7)(55,"thead")(56,"tr")(57,"th"),c(58,"ID"),s(),a(59,"th"),c(60,"S\xE1ch"),s(),a(61,"th"),c(62,"\u1EA2nh b\xECa"),s(),a(63,"th"),c(64,"Gi\xE1"),s(),f(65,"th"),s()(),a(66,"tbody",8),w(67,bd,12,4,"tr",9),s()(),a(68,"button",10),p("click",function(){return o.back()}),c(69," Tr\u1EDF l\u1EA1i"),s()()(),f(70,"app-footer")),n&2&&(u(13),S(" ",o.orderResponse.id,""),u(4),S(" ",o.orderResponse.user_id,""),u(5),S(" ",o.orderResponse.fullname,""),u(4),S(" ",o.orderResponse.phone_number,""),u(5),S(" ",o.orderResponse.note,""),u(4),S(" ",_t(36,12,o.orderResponse.order_date,"dd/MM/yyyy"),""),u(6),S(" ",o.formatPrice(o.orderResponse.total_money),""),u(4),S(" ",o.orderResponse.payment_method,""),u(2),g("ngClass",Mt(15,yd,o.orderResponse.status==="PROCESSING",o.orderResponse.status==="COMPLETE",o.orderResponse.status==="CANCEL")),u(3),S(" ",o.orderResponse.status==="PROCESSING"?"\u0110ang x\u1EED l\xFD":o.orderResponse.status==="COMPLETE"?"Ho\xE0n Th\xE0nh":"\u0110\xE3 H\u1EE7y"," "),u(17),g("ngForOf",o.orderResponse.order_details)("ngForTrackBy",o.trackByEbookName))},dependencies:[F,de,ie,Ee,H,se,ae],styles:['@charset "UTF-8";.back[_ngcontent-%COMP%]{margin-right:80%}.ebook-image[_ngcontent-%COMP%]{width:50%;max-width:50%;height:110px;margin-bottom:10px;object-fit:contain}.h3[_ngcontent-%COMP%]{color:#fff}.container[_ngcontent-%COMP%]   .row[_ngcontent-%COMP%]   .col-md-6[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{text-align:center}.container[_ngcontent-%COMP%]   .row[_ngcontent-%COMP%]   .info-pair[_ngcontent-%COMP%]{display:flex;justify-content:space-between;margin-bottom:10px;color:#fff}.container[_ngcontent-%COMP%]   .row[_ngcontent-%COMP%]   .info-pair[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{flex:1;margin:0}.container[_ngcontent-%COMP%]   .row[_ngcontent-%COMP%]   .info-pair[_ngcontent-%COMP%]   p[_ngcontent-%COMP%] + p[_ngcontent-%COMP%]{margin-left:20px}.container[_ngcontent-%COMP%]   .ebook-image[_ngcontent-%COMP%]{width:50%;max-width:50%;height:110px;margin-bottom:10px;object-fit:contain}.container[_ngcontent-%COMP%]   .back[_ngcontent-%COMP%]{margin-right:80%}.status.processing[_ngcontent-%COMP%]{color:orange}.status.complete[_ngcontent-%COMP%]{color:green}.status.cancel[_ngcontent-%COMP%]{color:red}.active-true[_ngcontent-%COMP%]{color:green}.active-false[_ngcontent-%COMP%]{color:red}']});let i=e;return i})();function Cd(i,e){i&1&&(a(0,"div",5)(1,"div",6),f(2,"br")(3,"br"),a(4,"p"),c(5,"Kh\xF4ng c\xF3 s\u1EA3n ph\u1EA9m trong ph\u1EA7n y\xEAu th\xEDch"),s()()())}var Ed=(i,e)=>({love:i,love_red:e});function Md(i,e){if(i&1){let r=P();a(0,"div",7)(1,"div",8)(2,"button",9),p("click",function(n){let l=C(r).$implicit,d=v();return E(d.toggleLove(l,n))}),f(3,"i",10),s(),a(4,"div",11),p("click",function(){let o=C(r).$implicit,l=v();return E(l.onEbookClick(o.id))}),f(5,"img",12),a(6,"h4",13),c(7),s(),a(8,"p",14),c(9),s(),a(10,"div",15),c(11),s()()()()}if(i&2){let r=e.$implicit,t=v();u(2),g("ngClass",Nn(5,Ed,!r.isLoved,r.isLoved)),u(3),g("src",r.thumbnail,ve),u(2),y(r.name),u(2),y(r.title),u(2),S(" Gi\xE1: ",t.formatPrice(r.price)," ")}}var Ks=(()=>{let e=class e{constructor(t,n,o){this.loveService=t,this.ebookService=n,this.tokenService=o,this.lovedItems=[],this.router=A(I)}ngOnInit(){this.loveService.refreshLove(),this.loadLovedItems()}loadLovedItems(){let t=Array.from(this.loveService.getLove().keys());t.length>0&&this.ebookService.getEbooksByIds(t).subscribe({next:n=>{this.lovedItems=n.map(o=>me($({},o),{isLoved:!0,thumbnail:`${T.apiBaseUrl}/ebooks/images/${o.thumbnail}`}))},error:n=>{console.error("Error fetching loved ebooks:",n)}})}formatPrice(t){return t===void 0?"N/A":t===0?"Mi\u1EC5n Ph\xED":t.toLocaleString("vi-VN")+" \u0111"}toggleLove(t,n){n.stopPropagation(),this.loveService.isProductInLove(t.id)?confirm("X\xE1c nh\u1EADn x\xF3a y\xEAu th\xEDch?")&&(this.loveService.removeFromLove(t.id),t.isLoved=!1,location.reload()):(this.loveService.addToLove(t.id),this.lovedItems.unshift(t))}onEbookClick(t){debugger;this.router.navigate(["/ebooks",t])}};e.\u0275fac=function(n){return new(n||e)(m(Ht),m(Ve),m(q))},e.\u0275cmp=O({type:e,selectors:[["app-love"]],standalone:!0,features:[k],decls:13,vars:2,consts:[[1,"container"],[1,"text-center","text-header"],[1,"row"],["class","row mb-3",4,"ngIf"],["class","col-lg-3 col-md-4 col-sm-6 mb-4",4,"ngFor","ngForOf"],[1,"row","mb-3"],[1,"text-center","count-item"],[1,"col-lg-3","col-md-4","col-sm-6","mb-4"],[1,"ebook-item","position-relative"],[3,"ngClass","click"],[1,"fa","fa-heart"],[1,"love-container",3,"click"],["alt","Ebook Image",1,"ebook-image",3,"src"],[1,"ebook-name"],[1,"ebook-title"],[1,"ebook-price"]],template:function(n,o){n&1&&(f(0,"app-header"),a(1,"div",0)(2,"h2",1),c(3,"S\u1EA3n ph\u1EA9m y\xEAu th\xEDch c\u1EE7a t\xF4i"),s(),a(4,"div",2),w(5,Cd,6,0,"div",3)(6,Md,12,8,"div",4),s()(),f(7,"br")(8,"br")(9,"br")(10,"br")(11,"br")(12,"app-footer")),n&2&&(u(5),g("ngIf",!o.lovedItems||o.lovedItems.length===0),u(1),g("ngForOf",o.lovedItems))},dependencies:[F,de,ie,ue,se,ae],styles:[".container[_ngcontent-%COMP%]{margin-top:20px;display:flex;flex-wrap:wrap;justify-content:center;height:500px}.text-header[_ngcontent-%COMP%]{color:#fff}.count-item[_ngcontent-%COMP%]{color:#fff;font-size:20px}.row[_ngcontent-%COMP%]{width:100%;display:flex;flex-wrap:wrap;justify-content:flex-start}.col-lg-3[_ngcontent-%COMP%], .col-md-4[_ngcontent-%COMP%], .col-sm-6[_ngcontent-%COMP%]{flex:1 1 20%;max-width:20%;box-sizing:border-box;padding:10px}.ebook-item[_ngcontent-%COMP%]{background-color:#13172a;border:3px solid rgb(0,38,255);border-radius:20px;padding:10px;text-align:center;max-width:100%;max-height:750px;box-sizing:border-box}.ebook-item[_ngcontent-%COMP%]:hover{border:3px solid rgb(255,0,200)}.ebook-image[_ngcontent-%COMP%]{max-width:100%;height:auto;border-radius:4px}.ebook-name[_ngcontent-%COMP%]{color:#fff;font-size:1.3rem;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}@media screen and (max-width: 1200px){.col-lg-3[_ngcontent-%COMP%]{max-width:25%}.ebook-name[_ngcontent-%COMP%]{font-size:1.1rem}}@media screen and (max-width: 992px){.col-md-4[_ngcontent-%COMP%]{max-width:33.33%}.ebook-name[_ngcontent-%COMP%]{font-size:1rem}}@media screen and (max-width: 768px){.col-sm-6[_ngcontent-%COMP%]{max-width:50%}.ebook-name[_ngcontent-%COMP%]{font-size:.9rem}}@media screen and (max-width: 576px){.col-sm-6[_ngcontent-%COMP%]{max-width:100%}.ebook-name[_ngcontent-%COMP%]{font-size:.8rem}}.ebook-title[_ngcontent-%COMP%]{font-size:1rem;white-space:nowrap;overflow:hidden;text-overflow:ellipsis;color:#fff}@media screen and (max-width: 1200px){.ebook-title[_ngcontent-%COMP%]{font-size:1.1rem}}@media screen and (max-width: 992px){.ebook-title[_ngcontent-%COMP%]{font-size:1rem}}@media screen and (max-width: 768px){.ebook-title[_ngcontent-%COMP%]{font-size:.9rem}}@media screen and (max-width: 576px){.ebook-title[_ngcontent-%COMP%]{font-size:.8rem}}.ebook-price[_ngcontent-%COMP%]{color:#fff;font-size:1.2em;font-weight:700;margin-top:10px}.love[_ngcontent-%COMP%], .love_red[_ngcontent-%COMP%]{position:absolute;top:10px;right:10px;background:transparent;border:none;cursor:pointer}.love[_ngcontent-%COMP%]:hover, .love_red[_ngcontent-%COMP%]:hover{border:3px solid rgb(203,203,203)}.love[_ngcontent-%COMP%]{color:#fff}.love_red[_ngcontent-%COMP%]{color:red}.love_red[_ngcontent-%COMP%]:hover{border:3px solid rgb(0,128,255)}.love[_ngcontent-%COMP%]   i[_ngcontent-%COMP%], .love_red[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:1.5em}.ebook-image[_ngcontent-%COMP%]{width:70%;max-width:70%;height:250px;margin-bottom:10px;object-fit:contain}"]});let i=e;return i})();var wd=()=>["/"],Zs=(()=>{let e=class e{constructor(t,n){this.route=t,this.datePipe=n,this.orderInfo="",this.paymentTime="",this.transactionId="",this.totalPrice="",this.currentDateTime=""}ngOnInit(){this.currentDateTime=this.datePipe.transform(new Date,"dd/MM/yyyy HH:mm"),this.route.queryParams.subscribe(t=>{this.orderInfo=t.orderInfo||"",this.paymentTime=t.paymentTime||"",this.transactionId=t.transactionId||"",this.totalPrice=t.totalPrice||"",this.totalPrice&&this.totalPrice.length>=2&&this.totalPrice.endsWith("00")&&(this.totalPrice=this.totalPrice.slice(0,-2))})}formatPrice(t){return t===void 0?"N/A":t===0?"Mi\u1EC5n Ph\xED":t.toLocaleString("vi-VN")+" \u0111"}getFormattedPrice(){let t=this.totalPrice?Number(this.totalPrice):void 0;return this.formatPrice(t)}getFormattedPaymentTime(){return this.paymentTime&&this.datePipe.transform(this.paymentTime,"dd/MM/yyyy HH:mm")||""}};e.\u0275fac=function(n){return new(n||e)(m(G),m(Ee))},e.\u0275cmp=O({type:e,selectors:[["app-payment-success"]],standalone:!0,features:[Ie([Ee]),k],decls:32,vars:6,consts:[[1,"container","success"],[1,"row","justify-content-center","mt-5"],[1,"col-md-6"],[1,"card"],[1,"card-body"],[1,"card-title"],[1,"form-group"],[1,"btn","btn-primary",3,"routerLink"]],template:function(n,o){n&1&&(f(0,"app-header"),a(1,"div",0)(2,"div",1)(3,"div",2)(4,"div",3)(5,"div",4)(6,"h2",5),c(7,"Thanh to\xE1n th\xE0nh c\xF4ng!"),s(),a(8,"div",6)(9,"label"),c(10,"Th\xF4ng tin \u0111\u01A1n h\xE0ng:"),s(),a(11,"p"),c(12),s()(),a(13,"div",6)(14,"label"),c(15,"T\u1ED5ng ti\u1EC1n:"),s(),a(16,"p"),c(17),s()(),a(18,"div",6)(19,"label"),c(20,"Th\u1EDDi gian thanh to\xE1n:"),s(),a(21,"p"),c(22),s()(),a(23,"div",6)(24,"label"),c(25,"M\xE3 giao d\u1ECBch:"),s(),a(26,"p"),c(27),s()(),a(28,"a",7),c(29,"V\u1EC1 trang ch\u1EE7"),s()()()()()(),f(30,"br")(31,"app-footer")),n&2&&(u(12),y(o.orderInfo),u(5),y(o.getFormattedPrice()),u(5),y(o.currentDateTime),u(5),y(o.transactionId),u(1),g("routerLink",gn(5,wd)))},dependencies:[et,Ft,se,ae],styles:[".container[_ngcontent-%COMP%]{max-width:1200px;margin:0 auto;padding:20px}.container[_ngcontent-%COMP%]   .row[_ngcontent-%COMP%]{justify-content:center}.container[_ngcontent-%COMP%]   .col-md-6[_ngcontent-%COMP%]{margin-top:20px;display:flex;justify-content:center}.container[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]{border:none;border-radius:10px;box-shadow:0 4px 8px #0000001a;overflow:hidden;max-width:100%;width:100%;background:#ffffff}.container[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]{padding:30px;text-align:center}.container[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]   h2.card-title[_ngcontent-%COMP%]{font-size:24px;margin-bottom:20px;font-weight:600}.container[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]{margin-bottom:20px;display:flex;flex-direction:column;align-items:flex-start}.container[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{font-size:16px;font-weight:500;color:#555;display:block;margin-bottom:5px}.container[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:16px;color:#333;margin:0;white-space:nowrap;overflow:hidden;text-overflow:ellipsis;max-width:100%}.container[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]   .btn-primary[_ngcontent-%COMP%]{background-color:#007bff;border:none;color:#fff;padding:10px 20px;border-radius:5px;font-size:16px;cursor:pointer;transition:background-color .3s ease}.container[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]   .btn-primary[_ngcontent-%COMP%]:hover{background-color:#0056b3}.success[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]   h2.card-title[_ngcontent-%COMP%]{color:#28a745}.failure[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]   h2.card-title[_ngcontent-%COMP%]{color:#dc3545}"]});let i=e;return i})();var xd=()=>["/"],Xs=(()=>{let e=class e{constructor(t,n){this.route=t,this.datePipe=n,this.orderInfo="",this.paymentTime="",this.transactionId="",this.totalPrice="",this.currentDateTime=""}ngOnInit(){this.currentDateTime=this.datePipe.transform(new Date,"dd/MM/yyyy HH:mm"),this.route.queryParams.subscribe(t=>{this.orderInfo=t.orderInfo||"",this.paymentTime=t.paymentTime||"",this.transactionId=t.transactionId||"",this.totalPrice=t.totalPrice||"",this.totalPrice&&this.totalPrice.length>=2&&this.totalPrice.endsWith("00")&&(this.totalPrice=this.totalPrice.slice(0,-2))})}formatPrice(t){return t===void 0?"N/A":t===0?"Mi\u1EC5n Ph\xED":t.toLocaleString("vi-VN")+" \u0111"}getFormattedPrice(){let t=this.totalPrice?Number(this.totalPrice):void 0;return this.formatPrice(t)}};e.\u0275fac=function(n){return new(n||e)(m(G),m(Ee))},e.\u0275cmp=O({type:e,selectors:[["app-payment-failure"]],standalone:!0,features:[Ie([Ee]),k],decls:31,vars:6,consts:[[1,"container","failure"],[1,"row","justify-content-center","mt-5"],[1,"col-md-6"],[1,"card"],[1,"card-body"],[1,"card-title"],[1,"form-group"],[1,"btn","btn-primary",3,"routerLink"]],template:function(n,o){n&1&&(f(0,"app-header"),a(1,"div",0)(2,"div",1)(3,"div",2)(4,"div",3)(5,"div",4)(6,"h2",5),c(7,"Thanh to\xE1n th\u1EA5t b\u1EA1i!"),s(),a(8,"div",6)(9,"label"),c(10,"Th\xF4ng tin \u0111\u01A1n h\xE0ng:"),s(),a(11,"p"),c(12),s()(),a(13,"div",6)(14,"label"),c(15,"T\u1ED5ng ti\u1EC1n:"),s(),a(16,"p"),c(17),s()(),a(18,"div",6)(19,"label"),c(20,"Th\u1EDDi gian thanh to\xE1n:"),s(),a(21,"p"),c(22),s()(),a(23,"div",6)(24,"label"),c(25,"M\xE3 giao d\u1ECBch:"),s(),a(26,"p"),c(27),s()(),a(28,"a",7),c(29,"V\u1EC1 trang ch\u1EE7"),s()()()()()(),f(30,"app-footer")),n&2&&(u(12),y(o.orderInfo),u(5),y(o.getFormattedPrice()),u(5),y(o.currentDateTime),u(5),y(o.transactionId),u(1),g("routerLink",gn(5,xd)))},dependencies:[et,Ft,se,ae],styles:[".container[_ngcontent-%COMP%]{max-width:1200px;margin:0 auto;padding:20px}.container[_ngcontent-%COMP%]   .row[_ngcontent-%COMP%]{justify-content:center}.container[_ngcontent-%COMP%]   .col-md-6[_ngcontent-%COMP%]{margin-top:20px;display:flex;justify-content:center}.container[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]{border:none;border-radius:10px;box-shadow:0 4px 8px #0000001a;overflow:hidden;max-width:100%;width:100%;background:#ffffff}.container[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]{padding:30px;text-align:center}.container[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]   h2.card-title[_ngcontent-%COMP%]{font-size:24px;margin-bottom:20px;font-weight:600}.container[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]{margin-bottom:20px;display:flex;flex-direction:column;align-items:flex-start}.container[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{font-size:16px;font-weight:500;color:#555;display:block;margin-bottom:5px}.container[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:16px;color:#333;margin:0;white-space:nowrap;overflow:hidden;text-overflow:ellipsis;max-width:100%}.container[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]   .btn-primary[_ngcontent-%COMP%]{background-color:#007bff;border:none;color:#fff;padding:10px 20px;border-radius:5px;font-size:16px;cursor:pointer;transition:background-color .3s ease}.container[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]   .btn-primary[_ngcontent-%COMP%]:hover{background-color:#0056b3}.success[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]   h2.card-title[_ngcontent-%COMP%]{color:#28a745}.failure[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]   h2.card-title[_ngcontent-%COMP%]{color:#dc3545}"]});let i=e;return i})();var ea=(()=>{let e=class e{constructor(t){this.http=t,this.apiUrl="http://localhost:8088/api/v1"}createOrder(t,n){let o={amount:t,orderInfo:n};return this.http.post(`${this.apiUrl}/submitOrder`,o,{responseType:"text"})}};e.\u0275fac=function(n){return new(n||e)(B(Fe))},e.\u0275prov=R({token:e,factory:e.\u0275fac,providedIn:"root"});let i=e;return i})();var ta=(()=>{let e=class e{constructor(t,n){this.vnpayService=t,this.route=n,this.amount=0,this.orderInfo=""}ngOnInit(){this.route.queryParams.subscribe(t=>{this.amount=+t.amount||0,this.orderInfo=t.orderInfo||""})}onSubmit(){this.orderInfo?this.vnpayService.createOrder(this.amount,this.orderInfo).subscribe(t=>{window.location.href=t},t=>{console.error("Failed to create order",t)}):console.error("OrderInfo is missing")}formatPrice(t){return t===void 0?"N/A":t===0?"Mi\u1EC5n Ph\xED":t.toLocaleString("vi-VN")+" \u0111"}};e.\u0275fac=function(n){return new(n||e)(m(ea),m(G))},e.\u0275cmp=O({type:e,selectors:[["app-payment-form"]],standalone:!0,features:[k],decls:23,vars:3,consts:[[1,"container"],[1,"row","justify-content-center","mt-5"],[1,"col-md-6"],[1,"card"],[1,"card-body"],["src","assets/poster/vnpay-logo.png","alt","VNPay Logo","width","150","height","80"],[1,"card-title"],[3,"ngSubmit"],[1,"form-group"],["for","amount"],["id","amount",1,"form-control"],["type","hidden","name","amount",3,"ngModel","ngModelChange"],["for","orderInfo"],["type","text","id","orderInfo","name","orderInfo","required","","readonly","",1,"form-control",3,"ngModel","ngModelChange"],["type","submit",1,"btn","btn-primary"]],template:function(n,o){n&1&&(f(0,"app-header"),a(1,"div",0)(2,"div",1)(3,"div",2)(4,"div",3)(5,"div",4),f(6,"img",5),a(7,"h2",6),c(8,"Thanh To\xE1n \u0110\u01A1n H\xE0ng"),s(),a(9,"form",7),p("ngSubmit",function(){return o.onSubmit()}),a(10,"div",8)(11,"label",9),c(12,"S\u1ED1 ti\u1EC1n:"),s(),a(13,"div",10),c(14),s(),a(15,"input",11),p("ngModelChange",function(d){return o.amount=d}),s()(),a(16,"div",8)(17,"label",12),c(18,"Th\xF4ng tin \u0111\u01A1n h\xE0ng:"),s(),a(19,"input",13),p("ngModelChange",function(d){return o.orderInfo=d}),s()(),a(20,"button",14),c(21,"Thanh to\xE1n"),s()()()()()()(),f(22,"app-footer")),n&2&&(u(14),y(o.formatPrice(o.amount)),u(1),g("ngModel",o.amount),u(4),g("ngModel",o.orderInfo))},dependencies:[H,Re,z,W,Ne,Ue,Z,Qe,ae,se],styles:[".container[_ngcontent-%COMP%]{max-width:1200px;margin:0 auto;padding:20px}.container[_ngcontent-%COMP%]   .row[_ngcontent-%COMP%]{justify-content:center}.container[_ngcontent-%COMP%]   .col-md-6[_ngcontent-%COMP%]{margin-top:20px;display:flex;justify-content:center}.container[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]{border:none;border-radius:10px;box-shadow:0 4px 8px #0000001a;overflow:hidden;max-width:100%;width:100%;background:#ffffff}.container[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]{padding:30px;text-align:center}.container[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:150px;margin-bottom:20px}.container[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]   h2.card-title[_ngcontent-%COMP%]{font-size:24px;color:#333;margin-bottom:20px;font-weight:600}.container[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]{margin-bottom:20px;text-align:left}.container[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{font-size:16px;font-weight:500;color:#555;display:block;margin-bottom:5px}.container[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   input.form-control[_ngcontent-%COMP%]{border-radius:5px;border:1px solid #ddd;padding:10px;font-size:16px}.container[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .btn-primary[_ngcontent-%COMP%]{background-color:#007bff;border:none;color:#fff;padding:10px 20px;border-radius:5px;font-size:16px;cursor:pointer;transition:background-color .3s ease}.container[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .btn-primary[_ngcontent-%COMP%]:hover{background-color:#0056b3}"]});let i=e;return i})();var na=[{path:"",component:js},{path:"login",component:$s},{path:"register",component:zs},{path:"ebooks/:id",component:Ws},{path:"orders",component:qs,canActivate:[Sn]},{path:"loves",component:Ks,canActivate:[Sn]},{path:"user-profile",component:Js,canActivate:[Sn]},{path:"order-user",component:Ys,canActivate:[Sn]},{path:"order-user-detail",component:Ho,canActivate:[Sn]},{path:"orders/order-user/:id",component:Ho},{path:"payment-success",component:Zs},{path:"payment-failure",component:Xs},{path:"payment-form",component:ta},{path:"admin",component:$i,canActivate:[Qs]}];var ia=(()=>{let e=class e{constructor(t){this.tokenService=t}intercept(t,n){debugger;let o=this.tokenService.getToken();return o&&(t=t.clone({setHeaders:{Authorization:`Bearer ${o}`}})),n.handle(t)}};e.\u0275fac=function(n){return new(n||e)(B(q))},e.\u0275prov=R({token:e,factory:e.\u0275fac});let i=e;return i})();function kd(i,e){if(i&1&&(a(0,"div",14),c(1),s()),i&2){let r=v();u(1),y(r.errorMessage)}}function Sd(i,e){if(i&1){let r=P();a(0,"button",20),p("click",function(){C(r);let n=v().$implicit,o=v();return E(o.CancelOrder(n))}),c(1,"H\u1EE7y"),s()}}var Pd=(i,e,r)=>({processing:i,complete:e,cancel:r});function Dd(i,e){if(i&1){let r=P();a(0,"tr",15)(1,"td"),c(2),s(),a(3,"td"),c(4),s(),a(5,"td"),c(6),s(),a(7,"td"),c(8),s(),a(9,"td"),c(10),s(),a(11,"td"),c(12),dt(13,"date"),s(),a(14,"td"),c(15),s(),a(16,"td",16),c(17),s(),a(18,"td"),c(19),s(),a(20,"td")(21,"div",17)(22,"button",5),p("click",function(){let o=C(r).$implicit,l=v();return E(l.viewDetails(o))}),c(23,"Xem chi ti\u1EBFt"),s(),a(24,"button",18),p("click",function(){let o=C(r).$implicit,l=v();return E(l.updateActiveStatus(o))}),c(25),s(),w(26,Sd,2,0,"button",19),s()()()}if(i&2){let r=e.$implicit,t=v();u(2),y(r.id),u(2),y(r.user_id),u(2),y(r.phone_number),u(2),y(r.fullname),u(2),y(r.note),u(2),y(_t(13,12,r.order_date,"dd/MM/yyyy")),u(3),y(t.formatPrice(r.total_money)),u(1),g("ngClass",Mt(15,Pd,r.status==="PROCESSING",r.status==="COMPLETE",r.status==="CANCEL")),u(1),S(" ",r.status==="PROCESSING"?"\u0110ang x\u1EED l\xFD":r.status==="COMPLETE"?"Ho\xE0n Th\xE0nh":"\u0110\xE3 H\u1EE7y"," "),u(2),y(r.payment_method),u(6),S(" ",r.active==!1?"M\u1EDF kh\xF3a":"Kh\xF3a"," "),u(1),g("ngIf",r.status==="PROCESSING")}}function Td(i,e){if(i&1){let r=P();a(0,"li",11)(1,"a",12),p("click",function(){let o=C(r).$implicit,l=v();return E(l.onPageChange(o-1))}),c(2),s()()}if(i&2){let r=e.$implicit,t=v();J("active",r===t.currentPage+1),u(2),y(r)}}var oa=(()=>{let e=class e{constructor(t,n,o,l,d){this.orderService=t,this.router=n,this.route=o,this.location=l,this.document=d,this.orders=[],this.currentPage=0,this.itemsPerPage=10,this.pages=[],this.totalPages=0,this.keyword="",this.visiblePages=[],this.errorMessage="",this.localStorage=d.defaultView?.localStorage}ngOnInit(){debugger;this.getAllOrders(this.keyword,this.currentPage,this.itemsPerPage),this.currentPage=Number(this.localStorage?.getItem("currentOrderAdminPage"))||0}searchOrders(){this.currentPage=0,this.itemsPerPage=5;debugger;this.getAllOrders(this.keyword.trim(),this.currentPage,this.itemsPerPage)}getAllOrders(t,n,o){this.orderService.getAllOrders(t,n,o).subscribe({next:l=>{this.orders=l.orders.map(d=>me($({},d),{active:d.active===!0})),this.totalPages=l.totalPages,this.visiblePages=this.generateVisiblePageArray(this.currentPage,this.totalPages)},error:l=>{console.error("Error fetching orders:",l)}})}onPageChange(t){debugger;this.currentPage=t<0?0:t,this.localStorage?.setItem("currentOrderAdminPage",String(this.currentPage)),this.getAllOrders(this.keyword,this.currentPage,this.itemsPerPage)}generateVisiblePageArray(t,n){let l=Math.floor(2.5),d=Math.max(t-l,1),h=Math.min(d+5-1,n);return h-d+1<5&&(d=Math.max(h-5+1,1)),new Array(h-d+1).fill(0).map((_,b)=>d+b)}deleteOrder(t){if(window.confirm("B\u1EA1n c\xF3 ch\u1EAFc ch\u1EAFn mu\u1ED1n x\xF3a \u0111\u01A1n h\xE0ng n\xE0y kh\xF4ng?")){debugger;this.orderService.deleteOrder(t).subscribe({next:o=>{this.getAllOrders(this.keyword,this.currentPage,this.itemsPerPage);debugger;alert("X\xF3a Order th\xE0nh c\xF4ng"),location.reload()},complete:()=>{debugger},error:o=>{this.handleError(o,"deleting order")}})}}updateActiveStatus(t){this.orderService.updateActiveStatus(t.id).subscribe({next:n=>{t.active=!t.active,alert(t.active===!0?"M\u1EDF kh\xF3a th\xE0nh c\xF4ng.":"Kh\xF3a th\xE0nh c\xF4ng.")},error:n=>{alert("Failed to update status."),console.error("Update status error:",n)}})}handleError(t,n){switch(console.error(`Error in ${n}:`,t),t.status){case 401:alert("B\u1EA1n c\u1EA7n \u0111\u0103ng nh\u1EADp quy\u1EC1n qu\u1EA3n tr\u1ECB \u0111\u1EC3 thao t\xE1c v\xE0o t\xE0i nguy\xEAn n\xE0y.");break;case 404:alert("Kh\xF4ng t\xECm th\u1EA5y t\xE0i nguy\xEAn.");break;case 500:alert("\u0110\xE3 x\u1EA3y ra l\u1ED7i m\xE1y ch\u1EE7. Vui l\xF2ng th\u1EED l\u1EA1i sau.");break;default:alert("\u0110\xE3 x\u1EA3y ra l\u1ED7i. Vui l\xF2ng th\u1EED l\u1EA1i.");break}}viewDetails(t){debugger;this.router.navigate(["/admin/orders",t.id])}formatPrice(t){return t===void 0?"N/A":t===0?"Mi\u1EC5n Ph\xED":t.toLocaleString("vi-VN")+" \u0111"}CancelOrder(t){if(t.status!=="PROCESSING"){console.error("Only orders with status PROCESSING can be canceled.");return}confirm("X\xE1c nh\u1EADn H\u1EE7y?")&&(this.orderService.cancelOrder(t.id).subscribe({next:n=>{t.status="CANCEL"},error:n=>{console.error("Error canceling order:",n)}}),alert("B\u1EA1n \u0111\xE3 h\u1EE7y th\xE0nh c\xF4ng"),location.reload())}};e.\u0275fac=function(n){return new(n||e)(m(We),m(I),m(G),m(vt),m(K))},e.\u0275cmp=O({type:e,selectors:[["app-order-admin"]],standalone:!0,features:[k],decls:44,vars:8,consts:[[1,"container-fluid"],[1,"row","mb-3"],[1,"col-md-8"],["type","text","placeholder","T\xECm \u0111\u01A1n h\xE0ng",1,"form-control","search-input",3,"ngModel","ngModelChange"],[1,"col-md-4"],[1,"btn","btn-primary",3,"click"],["class","error-message",4,"ngIf"],[1,"table"],["class","row-1",4,"ngFor","ngForOf"],["aria-label","Page navigation example"],[1,"pagination"],[1,"page-item"],[1,"page-link",3,"click"],["class","page-item",3,"active",4,"ngFor","ngForOf"],[1,"error-message"],[1,"row-1"],[1,"status",3,"ngClass"],[2,"display","flex","gap","10px"],[1,"btn","btn-warning",3,"click"],["class","btn btn-danger",3,"click",4,"ngIf"],[1,"btn","btn-danger",3,"click"]],template:function(n,o){n&1&&(a(0,"div",0)(1,"h1"),c(2,"Orders Admin Page"),s(),a(3,"div",1)(4,"div",2)(5,"input",3),p("ngModelChange",function(d){return o.keyword=d}),s()(),a(6,"div",4)(7,"button",5),p("click",function(){return o.searchOrders()}),c(8,"T\xECm ki\u1EBFm"),s()()(),w(9,kd,2,1,"div",6),a(10,"table",7)(11,"thead")(12,"tr")(13,"th"),c(14,"ID"),s(),a(15,"th"),c(16,"ID User"),s(),a(17,"th"),c(18,"S\u1ED1 \u0111i\u1EC7n tho\u1EA1i"),s(),a(19,"th"),c(20,"T\xEAn"),s(),a(21,"th"),c(22,"Ghi ch\xFA"),s(),a(23,"th"),c(24,"Ng\xE0y \u0111\u1EB7t"),s(),a(25,"th"),c(26,"T\u1ED5ng ti\u1EC1n"),s(),a(27,"th"),c(28,"Tr\u1EA1ng th\xE1i TT"),s(),a(29,"th"),c(30,"Ph\u01B0\u01A1ng th\u1EE9c TT"),s(),a(31,"th"),c(32,"T\xF9y ch\u1ECDn"),s()()(),a(33,"tbody"),w(34,Dd,27,19,"tr",8),s()(),a(35,"nav",9)(36,"ul",10)(37,"li",11)(38,"a",12),p("click",function(){return o.onPageChange(o.currentPage-1)}),c(39,"Previous"),s()(),w(40,Td,3,3,"li",13),a(41,"li",11)(42,"a",12),p("click",function(){return o.onPageChange(o.currentPage+1)}),c(43,"Next"),s()()()()()),n&2&&(u(5),g("ngModel",o.keyword),u(4),g("ngIf",o.errorMessage),u(25),g("ngForOf",o.orders),u(3),J("disabled",o.currentPage===0),u(3),g("ngForOf",o.visiblePages),u(1),J("disabled",o.currentPage+1===o.totalPages))},dependencies:[F,de,ie,ue,Ee,H,z,W,Z],styles:['@charset "UTF-8";.page-number[_ngcontent-%COMP%]{cursor:pointer;padding:5px 10px;border:1px solid #ccc;margin:0 2px;border-radius:3px}.page-number.active[_ngcontent-%COMP%]{background-color:#7f44ff!important;color:#fff;border-color:#7f44ff!important}.btn.btn-primary[_ngcontent-%COMP%]{margin-left:10px}.container-fluid[_ngcontent-%COMP%]{background-color:#fff;padding-left:0!important;padding-right:0!important;height:100vh}.button-primary[_ngcontent-%COMP%]{white-space:nowrap}.pagination[_ngcontent-%COMP%]{display:flex;justify-content:center;margin-top:20px}.page-item.disabled[_ngcontent-%COMP%]   .page-link[_ngcontent-%COMP%]{pointer-events:none;opacity:.5}.page-item.active[_ngcontent-%COMP%]   .page-link[_ngcontent-%COMP%]{background-color:#007bff;border-color:#007bff;color:#fff}.page-link[_ngcontent-%COMP%]{cursor:pointer}.error-message[_ngcontent-%COMP%]{color:red;font-weight:700;margin-bottom:10px}.status.processing[_ngcontent-%COMP%]{color:orange}.status.complete[_ngcontent-%COMP%]{color:green}.status.cancel[_ngcontent-%COMP%]{color:red}.row-1[_ngcontent-%COMP%]:hover{border:1.5px solid rgb(255,111,0)}']});let i=e;return i})();var zi=class{constructor(e){this.user_id=e.user_id,this.fullname=e.fullname,this.status=e.status,this.phone_number=e.phone_number,this.note=e.note,this.order_date=e.order_date,this.total_money=e.total_money,this.payment_method=e.payment_method,this.cart_items=e.cart_items}};function Ad(i,e){if(i&1&&(a(0,"tr")(1,"td"),c(2),s(),a(3,"td"),c(4),s(),a(5,"td"),f(6,"img",13),s(),a(7,"td"),c(8),s()()),i&2){let r=e.$implicit,t=v();u(2),y(r.ebook.id),u(2),y(r.ebook.name),u(2),g("src",r.ebook.thumbnail,ve),u(2),y(t.formatPrice(r.price))}}var Id=(i,e,r)=>({"status-processing":i,"status-complete":e,"status-cancel":r}),ra=(()=>{let e=class e{constructor(t,n,o){this.route=t,this.router=n,this.orderId=0,this.currentMp3Index=0,this.isAudioVisible=!1,this.isPlaying=!1,this.orderResponse={id:0,user_id:0,fullname:"",phone_number:"",note:"",order_date:new Date,status:"",total_money:0,payment_method:"",tracking_number:"",active:!1,order_details:[]},this.orderService=o}ngOnInit(){this.getOrderDetails()}getOrderDetails(){this.orderId=Number(this.route.snapshot.paramMap.get("id")),this.orderService.getOrderById(this.orderId).subscribe({next:t=>{debugger;this.orderResponse.id=t.id,this.orderResponse.user_id=t.user_id,this.orderResponse.fullname=t.fullname,this.orderResponse.phone_number=t.phone_number,this.orderResponse.note=t.note,t.order_date&&(this.orderResponse.order_date=new Date(t.order_date[0],t.order_date[1]-1,t.order_date[2])),this.orderResponse.status=t.status,this.orderResponse.total_money=t.total_money,this.orderResponse.payment_method=t.payment_method,this.orderResponse.order_details=t.order_details.map(n=>(n.ebook.thumbnail=`${T.apiBaseUrl}/ebooks/images/${n.ebook.thumbnail}`,n));debugger},error:t=>{console.error("L\u1ED7i khi l\u1EA5y chi ti\u1EBFt \u0111\u01A1n h\xE0ng:",t)}})}saveOrder(){this.orderService.updateOrder(this.orderId,new zi(this.orderResponse)).subscribe({next:()=>{alert("C\u1EADp nh\u1EADt tr\u1EA1ng th\xE1i \u0111\u01A1n h\xE0ng th\xE0nh c\xF4ng"),this.router.navigate(["../"],{relativeTo:this.route})},error:t=>{console.error("L\u1ED7i khi c\u1EADp nh\u1EADt \u0111\u01A1n h\xE0ng:",t),this.handleError(t)}})}handleError(t){switch(console.error("Error:",t),t.status){case 401:alert("B\u1EA1n kh\xF4ng c\xF3 quy\u1EC1n truy c\u1EADp v\xE0o t\xE0i nguy\xEAn n\xE0y ho\u1EB7c c\u1EA7n \u0111\u0103ng nh\u1EADp qu\u1EA3n tr\u1ECB vi\xEAn \u0111\u1EC3 th\u1EF1c hi\u1EC7n h\xE0nh \u0111\u1ED9ng n\xE0y."),location.reload();break;case 403:alert("B\u1EA1n kh\xF4ng c\xF3 quy\u1EC1n c\u1EADp nh\u1EADt \u0111\u01A1n h\xE0ng n\xE0y. Ch\u1EC9 c\xF3 qu\u1EA3n tr\u1ECB vi\xEAn m\u1EDBi c\xF3 quy\u1EC1n th\u1EF1c hi\u1EC7n h\xE0nh \u0111\u1ED9ng n\xE0y.");break;case 404:alert("Kh\xF4ng t\xECm th\u1EA5y t\xE0i nguy\xEAn.");break;default:this.router.navigate(["../"],{relativeTo:this.route});break}}cancel(){this.router.navigate(["../"],{relativeTo:this.route})}trackByEbookName(t,n){return n.ebook.name}onPlay(){this.isPlaying=!0}onPause(){this.isPlaying=!1}formatPrice(t){return t===void 0?"N/A":t===0?"Mi\u1EC5n Ph\xED":t.toLocaleString("vi-VN")+" \u0111"}CancelOrder(t){if(t.status!=="PROCESSING"){console.error("Only orders with status PROCESSING can be canceled.");return}this.orderService.cancelOrder(t.id).subscribe({next:n=>{t.status="CANCEL"},error:n=>{console.error("Error canceling order:",n)}}),alert("B\u1EA1n \u0111\xE3 h\u1EE7y th\xE0nh c\xF4ng"),location.reload()}};e.\u0275fac=function(n){return new(n||e)(m(G),m(I),m(We))},e.\u0275cmp=O({type:e,selectors:[["app-detail-order-admin"]],standalone:!0,features:[k],decls:70,vars:20,consts:[[1,"container"],[1,"row"],[1,"col-md-6"],[1,"form-group"],["for","statusSelect"],["id","statusSelect",1,"form-control",3,"ngModel","ngClass","ngModelChange"],["value","PROCESSING"],["value","COMPLETE"],["value","CANCEL"],[1,"table"],[4,"ngFor","ngForOf","ngForTrackBy"],[1,"btn","btn-primary",3,"click"],[1,"btn","btn-secondary",3,"click"],["alt","Ebook Image",1,"ebook-image",3,"src"]],template:function(n,o){n&1&&(a(0,"h1"),c(1,"Chi Ti\u1EBFt \u0110\u01A1n H\xE0ng"),s(),a(2,"div",0)(3,"div",1)(4,"div",2)(5,"h3"),c(6,"Th\xF4ng Tin \u0110\u01A1n H\xE0ng"),s(),a(7,"p")(8,"strong"),c(9,"M\xE3 \u0110\u01A1n H\xE0ng:"),s(),c(10),s(),a(11,"p")(12,"strong"),c(13,"M\xE3 Ng\u01B0\u1EDDi D\xF9ng:"),s(),c(14),s(),a(15,"p")(16,"strong"),c(17,"H\u1ECD T\xEAn:"),s(),c(18),s(),a(19,"p")(20,"strong"),c(21,"S\u1ED1 \u0110i\u1EC7n Tho\u1EA1i:"),s(),c(22),s(),a(23,"p")(24,"strong"),c(25,"Ghi Ch\xFA:"),s(),c(26),s(),a(27,"p")(28,"strong"),c(29,"Ng\xE0y \u0110\u1EB7t H\xE0ng:"),s(),c(30),dt(31,"date"),s(),a(32,"p")(33,"strong"),c(34,"T\u1ED5ng Ti\u1EC1n:"),s(),c(35),s(),a(36,"p")(37,"strong"),c(38,"Ph\u01B0\u01A1ng Th\u1EE9c Thanh To\xE1n:"),s(),c(39),s(),a(40,"div",3)(41,"label",4)(42,"strong"),c(43,"Tr\u1EA1ng Th\xE1i:"),s()(),a(44,"select",5),p("ngModelChange",function(d){return o.orderResponse.status=d}),a(45,"option",6),c(46,"\u0110ang x\u1EED l\xFD"),s(),a(47,"option",7),c(48,"Ho\xE0n Th\xE0nh"),s(),a(49,"option",8),c(50,"\u0110\xE3 H\u1EE7y"),s()()()()(),a(51,"h3"),c(52,"Chi Ti\u1EBFt \u0110\u01A1n H\xE0ng"),s(),a(53,"table",9)(54,"thead")(55,"tr")(56,"th"),c(57,"ID"),s(),a(58,"th"),c(59,"S\xE1ch"),s(),a(60,"th"),c(61,"\u1EA2nh b\xECa"),s(),a(62,"th"),c(63,"Gi\xE1"),s()()(),a(64,"tbody"),w(65,Ad,9,4,"tr",10),s()(),a(66,"button",11),p("click",function(){return o.saveOrder()}),c(67,"L\u01B0u"),s(),a(68,"button",12),p("click",function(){return o.cancel()}),c(69,"H\u1EE7y"),s()()),n&2&&(u(10),S(" ",o.orderResponse.id,""),u(4),S(" ",o.orderResponse.user_id,""),u(4),S(" ",o.orderResponse.fullname,""),u(4),S(" ",o.orderResponse.phone_number,""),u(4),S(" ",o.orderResponse.note,""),u(4),S(" ",_t(31,13,o.orderResponse.order_date,"dd/MM/yyyy"),""),u(5),S(" ",o.formatPrice(o.orderResponse.total_money),""),u(4),S(" ",o.orderResponse.payment_method,""),u(5),g("ngModel",o.orderResponse.status)("ngClass",Mt(16,Id,o.orderResponse.status==="PROCESSING",o.orderResponse.status==="COMPLETE",o.orderResponse.status==="CANCEL")),mn("disabled",o.orderResponse.status==="COMPLETE"||o.orderResponse.status==="CANCEL"?!0:null),u(21),g("ngForOf",o.orderResponse.order_details)("ngForTrackBy",o.trackByEbookName))},dependencies:[F,de,ie,Ee,H,tt,nt,$e,W,Z],styles:[".container[_ngcontent-%COMP%]{height:750px}.back[_ngcontent-%COMP%]{margin-right:80%}.ebook-image[_ngcontent-%COMP%]{width:50%;max-width:50%;height:110px;margin-bottom:10px;object-fit:contain}.status-processing[_ngcontent-%COMP%]{color:orange}.status-complete[_ngcontent-%COMP%]{color:green}.status-cancel[_ngcontent-%COMP%]{color:red}.active-true[_ngcontent-%COMP%]{color:green}.active-false[_ngcontent-%COMP%]{color:red}"]});let i=e;return i})();var Be=function(i){return i.FREE="Mi\u1EC5n Ph\xED",i.FOR_SALE="B\xE1n",i.MEMBERSHIP="H\u1ED9i Vi\xEAn",i}(Be||{});var Fd=(i,e)=>e.id;function Nd(i,e){if(i&1){let r=P();a(0,"tr",13)(1,"td"),c(2),s(),a(3,"td",14),p("click",function(){let o=C(r).$implicit,l=v();return E(l.onProductClick(o.id))}),c(4),s(),a(5,"td"),c(6),s(),a(7,"td",15)(8,"div",16),c(9),s()(),a(10,"td"),c(11),s(),a(12,"td"),c(13),s(),a(14,"td"),f(15,"img",17),s(),a(16,"td")(17,"div",18)(18,"button",5),p("click",function(){let o=C(r).$implicit,l=v();return E(l.updateEbook(o.id))}),c(19,"Update"),s(),a(20,"button",19),p("click",function(){let o=C(r).$implicit,l=v();return E(l.updateActiveStatus(o))}),c(21),s()()()()}if(i&2){let r=e.$implicit,t=v();u(2),y(r.id),u(2),y(r.name),u(2),y(r.title),u(3),S(" ",r.document," "),u(2),y(t.formatPrice(r.price)),u(2),S("",r.kindofbook," "),u(2),ci("src",r.url,ve),u(6),S(" ",r.active==!0?"M\u1EDF kh\xF3a":"Kh\xF3a"," ")}}function Rd(i,e){if(i&1){let r=P();a(0,"li",20)(1,"a",21),p("click",function(){C(r);let n=v();return E(n.onPageChange(0))}),c(2,"First"),s()(),a(3,"li",20)(4,"a",21),p("click",function(){C(r);let n=v();return E(n.onPageChange(n.currentPage-1))}),f(5,"i",22),s()()}}var Vd=i=>({active:i});function Bd(i,e){if(i&1){let r=P();Ct(0),a(1,"li",23)(2,"a",21),p("click",function(){let o=C(r).$implicit,l=v();return E(l.onPageChange(o-1))}),c(3),s()(),Et()}if(i&2){let r=e.$implicit,t=v();u(1),g("ngClass",Xe(2,Vd,r===t.currentPage+1)),u(2),y(r)}}function Hd(i,e){if(i&1){let r=P();a(0,"li",20)(1,"a",21),p("click",function(){C(r);let n=v();return E(n.onPageChange(n.currentPage+1))}),f(2,"i",24),s()(),a(3,"li",20)(4,"a",21),p("click",function(){C(r);let n=v();return E(n.onPageChange(n.totalPages-1))}),c(5,"Last"),s()()}}var sa=(()=>{let e=class e{constructor(t,n,o){this.ebookService=t,this.router=n,this.location=o,this.ebooks=[],this.selectedCategoryId=0,this.currentPage=0,this.itemsPerPage=12,this.pages=[],this.totalPages=0,this.visiblePages=[],this.keyword="",this.kindOfBookKeys=Object.keys(Be),this.kindOfBookValues=Be,this.localStorage=document.defaultView?.localStorage}ngOnInit(){this.currentPage=Number(this.localStorage?.getItem("currentEbookAdminPage"))||0,this.getEbooks(this.keyword,this.selectedCategoryId,this.currentPage,this.itemsPerPage)}searchEbooks(){this.currentPage=0,this.itemsPerPage=12;debugger;this.getEbooks(this.keyword.trim(),this.selectedCategoryId,this.currentPage,this.itemsPerPage)}getEbooks(t,n,o,l){debugger;this.ebookService.getEbooks(t,n,o,l).subscribe({next:d=>{debugger;d.ebooks.forEach(h=>{h&&(h.url=`${T.apiBaseUrl}/ebooks/images/${h.thumbnail}`)}),this.ebooks=d.ebooks,this.totalPages=d.totalPages,this.visiblePages=this.generateVisiblePageArray(this.currentPage,this.totalPages)},complete:()=>{debugger},error:d=>{debugger;console.error("Error fetching products:",d)}})}onPageChange(t){debugger;this.currentPage=t<0?0:t,this.localStorage?.setItem("currentProductAdminPage",String(this.currentPage)),this.getEbooks(this.keyword,this.selectedCategoryId,this.currentPage,this.itemsPerPage)}generateVisiblePageArray(t,n){let l=Math.floor(2.5),d=Math.max(t-l,1),h=Math.min(d+5-1,n);return h-d+1<5&&(d=Math.max(h-5+1,1)),new Array(h-d+1).fill(0).map((_,b)=>d+b)}insertEbook(){debugger;this.router.navigate(["/admin/products/insert"])}updateEbook(t){debugger;this.router.navigate(["/admin/products/update",t])}deleteEbook(t){if(window.confirm("B\u1EA1n c\xF3 ch\u1EAFc ch\u1EAFn mu\u1ED1n x\xF3a ebook n\xE0y kh\xF4ng?")){debugger;this.ebookService.deleteEbook(t.id).subscribe({next:o=>{debugger;alert("X\xF3a th\xE0nh c\xF4ng"),location.reload()},complete:()=>{debugger;location.reload()},error:o=>{debugger;console.error("Error fetching ebooks:",o),alert(o.error),this.handleError(o)}}),location.reload()}}updateActiveStatus(t){this.ebookService.updateActiveStatus(t.id).subscribe({next:n=>{t.active=!t.active,alert("\u0110\xE3 thay \u0111\u1ED5i tr\u1EA1ng th\xE1i th\xE0nh c\xF4ng.")},error:n=>{alert("kh\xF4ng th\u1EC3 thay \u0111\u1ED5i tr\u1EA1ng th\xE1i."),console.error("C\u1EADp nh\u1EADt tr\u1EA1ng th\xE1i th\u1EA5t b\u1EA1i:",n)}})}onProductClick(t){debugger;this.router.navigate(["/ebooks",t])}formatPrice(t){return t===void 0?"N/A":t===0?"Mi\u1EC5n Ph\xED":t.toLocaleString("vi-VN")+" \u0111"}handleError(t){switch(console.error("Error:",t),t.status){case 401:alert("B\u1EA1n kh\xF4ng c\xF3 quy\u1EC1n truy c\u1EADp v\xE0o t\xE0i nguy\xEAn n\xE0y ho\u1EB7c c\u1EA7n \u0111\u0103ng nh\u1EADp qu\u1EA3n tr\u1ECB vi\xEAn \u0111\u1EC3 th\u1EF1c hi\u1EC7n h\xE0nh \u0111\u1ED9ng n\xE0y.");break;case 403:alert("B\u1EA1n kh\xF4ng c\xF3 quy\u1EC1n c\u1EADp nh\u1EADt \u0111\u01A1n h\xE0ng n\xE0y. Ch\u1EC9 c\xF3 qu\u1EA3n tr\u1ECB vi\xEAn m\u1EDBi c\xF3 quy\u1EC1n th\u1EF1c hi\u1EC7n h\xE0nh \u0111\u1ED9ng n\xE0y.");break;case 404:alert("Kh\xF4ng t\xECm th\u1EA5y t\xE0i nguy\xEAn.");break}}};e.\u0275fac=function(n){return new(n||e)(m(Ve),m(I),m(vt))},e.\u0275cmp=O({type:e,selectors:[["app-product-admin"]],standalone:!0,features:[k],decls:42,vars:3,consts:[[1,"container"],[1,"row","mb-3"],[1,"col-md-8"],["type","text","placeholder","T\xECm s\u1EA3n ph\u1EA9m",1,"form-control","search-input",3,"ngModel","ngModelChange"],[1,"col-md-4"],[1,"btn","btn-primary",3,"click"],[1,"row"],[1,"btn","btn-success",3,"click"],[1,"table"],[1,"table-light"],[1,"d-flex","justify-content-center"],["aria-label","Page navigation"],[1,"pagination"],[1,"item"],[2,"cursor","pointer",3,"click"],[1,"document-cell"],[1,"document-content"],["alt","Thumbnail","width","90","height","85",1,"rounded-square",3,"src"],[2,"display","flex","gap","10px"],[1,"btn","btn-warning",3,"click"],[1,"page-item"],[1,"page-link",3,"click"],[1,"fa","fa-chevron-left"],[1,"page-item",3,"ngClass"],[1,"fa","fa-chevron-right"],["class","item"]],template:function(n,o){n&1&&(a(0,"div",0)(1,"h1"),c(2,"Product Admin"),s(),a(3,"div",1)(4,"div",2)(5,"input",3),p("ngModelChange",function(d){return o.keyword=d}),s()(),a(6,"div",4)(7,"button",5),p("click",function(){return o.searchEbooks()}),c(8,"T\xECm ki\u1EBFm"),s()()(),a(9,"div",6)(10,"div",2)(11,"button",7),p("click",function(){return o.insertEbook()}),c(12,"Th\xEAm s\u1EA3n ph\u1EA9m m\u1EDBi"),s()()(),a(13,"table",8)(14,"thead",9)(15,"tr")(16,"th"),c(17,"ID"),s(),a(18,"th"),c(19,"T\xEAn"),s(),a(20,"th"),c(21,"M\xF4 t\u1EA3"),s(),a(22,"th"),c(23,"V\u0103n b\u1EA3n"),s(),a(24,"th"),c(25,"Gi\xE1 ti\u1EC1n"),s(),a(26,"th"),c(27,"Th\u1EC3 lo\u1EA1i"),s(),a(28,"th"),c(29,"\u1EA2nh b\xECa"),s(),a(30,"th"),c(31,"T\xF9y ch\u1ECDn"),s()()(),a(32,"tbody"),gt(33,Nd,22,8,"tr",25,Fd),s()(),a(35,"div",10)(36,"nav",11)(37,"ul",12),w(38,Rd,6,0),gt(39,Bd,4,4,"ng-container",null,Fn),w(41,Hd,6,0),s()()()()),n&2&&(u(5),g("ngModel",o.keyword),u(28),ft(o.ebooks),u(5),ne(38,o.currentPage>0?38:-1),u(1),ft(o.visiblePages),u(2),ne(41,o.currentPage<o.totalPages-1?41:-1))},dependencies:[F,de,H,z,W,Z],styles:[".page-number[_ngcontent-%COMP%]{cursor:pointer;padding:5px 10px;border:1px solid #ccc;margin:0 2px;border-radius:3px}.page-number.active[_ngcontent-%COMP%]{background-color:#7f44ff!important;color:#fff;border-color:#7f44ff!important}.btn.btn-primary[_ngcontent-%COMP%]{margin-left:10px}.container[_ngcontent-%COMP%]{background-color:#fff;padding-left:0!important;padding-right:0!important;height:900px;align-items:center}.rounded-square[_ngcontent-%COMP%]{border-radius:10px}.document-content[_ngcontent-%COMP%]{max-height:100px;overflow-y:auto;text-align:justify}.document-cell[_ngcontent-%COMP%]{max-width:150px;overflow:hidden}.readbook[_ngcontent-%COMP%]{color:#7fffd4}.item[_ngcontent-%COMP%]:hover{border:2px solid rgb(255,111,0)}"]});let i=e;return i})();var Ld=(i,e)=>e.id;function Ud(i,e){if(i&1){let r=P();a(0,"tr",6)(1,"td"),c(2),s(),a(3,"td"),c(4),s(),a(5,"td")(6,"div",7)(7,"button",8),p("click",function(){let o=C(r).$implicit,l=v();return E(l.updateCategory(o.id))}),c(8," C\u1EADp nh\u1EADt "),s(),a(9,"button",9),p("click",function(){let o=C(r).$implicit,l=v();return E(l.deleteCategory(o))}),c(10,"X\xF3a danh m\u1EE5c "),s()()()()}if(i&2){let r=e.$implicit;u(2),y(r.id),u(2),y(r.name)}}function jd(i,e){i&1&&(a(0,"h2"),c(1,"No categories found"),s())}var aa=(()=>{let e=class e{constructor(t,n){this.categoryService=t,this.router=n,this.categories=[]}ngOnInit(){this.getCategories(0,10)}getCategories(t,n){this.categoryService.getCategories(t,n).subscribe({next:o=>{debugger;this.categories=o},complete:()=>{debugger},error:o=>{console.error("Error fetching categories:",o)}})}insertCategory(){debugger;this.router.navigate(["/admin/categories/insert"])}updateCategory(t){debugger;this.router.navigate(["/admin/categories/update",t])}deleteCategory(t){if(window.confirm("B\u1EA1n c\xF3 ch\u1EAFc ch\u1EAFn mu\u1ED1n x\xF3a danh m\u1EE5c n\xE0y?")){debugger;this.categoryService.deleteCategory(t.id).subscribe({next:o=>{debugger;alert("X\xF3a th\xE0nh c\xF4ng"),location.reload()},complete:()=>{debugger},error:o=>{debugger}})}location.reload()}handleError(t){switch(console.error("Error:",t),t.status){case 401:alert("B\u1EA1n kh\xF4ng c\xF3 quy\u1EC1n truy c\u1EADp v\xE0o t\xE0i nguy\xEAn n\xE0y ho\u1EB7c c\u1EA7n \u0111\u0103ng nh\u1EADp qu\u1EA3n tr\u1ECB vi\xEAn \u0111\u1EC3 th\u1EF1c hi\u1EC7n h\xE0nh \u0111\u1ED9ng n\xE0y.");break;case 403:alert("B\u1EA1n kh\xF4ng c\xF3 quy\u1EC1n c\u1EADp nh\u1EADt \u0111\u01A1n h\xE0ng n\xE0y. Ch\u1EC9 c\xF3 qu\u1EA3n tr\u1ECB vi\xEAn m\u1EDBi c\xF3 quy\u1EC1n th\u1EF1c hi\u1EC7n h\xE0nh \u0111\u1ED9ng n\xE0y.");break;case 404:alert("Kh\xF4ng t\xECm th\u1EA5y t\xE0i nguy\xEAn.");break}}};e.\u0275fac=function(n){return new(n||e)(m(st),m(I))},e.\u0275cmp=O({type:e,selectors:[["app-category-admin"]],standalone:!0,features:[k],decls:20,vars:1,consts:[[1,"container"],[1,"row"],[1,"col-md-8"],[1,"btn","btn-success",3,"click"],[1,"table"],[1,"table-light"],[1,"row-1"],[2,"display","flex","gap","10px"],[1,"btn","btn-primary",3,"click"],[1,"btn","btn-danger",3,"click"],["class","row-1"]],template:function(n,o){n&1&&(a(0,"div",0)(1,"h1"),c(2,"Category Admin"),s(),a(3,"div",1)(4,"div",2)(5,"button",3),p("click",function(){return o.insertCategory()}),c(6,"Th\xEAm danh m\u1EE5c m\u1EDBi"),s()()(),a(7,"table",4)(8,"thead",5)(9,"tr")(10,"th"),c(11,"ID"),s(),a(12,"th"),c(13,"T\xEAn danh m\u1EE5c"),s(),a(14,"th"),c(15,"T\xF9y ch\u1ECDn"),s()()(),a(16,"tbody"),gt(17,Ud,11,2,"tr",10,Ld,!1,jd,2,0),s()()()),n&2&&(u(17),ft(o.categories))},dependencies:[F,H],styles:[".container[_ngcontent-%COMP%]{background-color:#fff;padding:20px;min-height:100vh;display:flex;flex-direction:column}.row-1[_ngcontent-%COMP%]:hover{border:1.5px solid rgb(255,111,0)}"]});let i=e;return i})();var Gd=["class","product admin"];function $d(i,e){if(i&1){let r=P();a(0,"div")(1,"input",35),p("change",function(n){let l=C(r).$implicit,d=v(2);return E(d.onCategoryChange(n,l.id))}),s(),c(2),s()}if(i&2){let r=e.$implicit;u(1),g("checked",r.selected),u(1),S(" ",r.name," ")}}function zd(i,e){if(i&1&&(a(0,"option",36),c(1),s()),i&2){let r=e.$implicit,t=v(2);g("value",r),u(1),y(t.kindOfBookValues[r])}}function Wd(i,e){if(i&1){let r=P();a(0,"div",37)(1,"p"),c(2),s(),f(3,"audio",38),a(4,"button",39),p("click",function(){let o=C(r).$implicit,l=v(2);return E(l.deleteMp3(o))}),f(5,"i",40),c(6," X\xF3a "),s()()}if(i&2){let r=e.$implicit,t=e.index;u(2),S("Ph\u1EA7n ",t+1,""),u(1),g("src",r.mp3_url,ve)}}var qd=i=>({active:i});function Jd(i,e){if(i&1){let r=P();a(0,"div",41),p("click",function(){let o=C(r).index,l=v(2);return E(l.thumbnailClick(o))}),f(1,"img",42),a(2,"button",43),p("click",function(){let o=C(r).$implicit,l=v(2);return E(l.deleteImage(o))}),f(3,"i",40),s()()}if(i&2){let r=e.$implicit,t=e.index,n=v(2);g("ngClass",Xe(2,qd,t===n.currentImageIndex)),u(1),g("src",r.image_url,ve)}}function Qd(i,e){i&1&&(Ct(0),a(1,"h2"),c(2,"No images found"),s(),Et())}function Yd(i,e){if(i&1){let r=P();a(0,"div")(1,"div",1)(2,"div",2)(3,"div",3)(4,"h3"),c(5,"Update Product"),s(),a(6,"form",4),p("ngSubmit",function(){C(r);let n=v();return E(n.updateProduct())}),a(7,"div",5)(8,"div",6)(9,"div",7)(10,"label",8),c(11,"T\xEAn Ebook:"),s(),a(12,"input",9),p("ngModelChange",function(n){C(r);let o=v();return E(o.updatedEbook.name=n)}),s()()(),a(13,"div",6)(14,"div",7)(15,"label",10),c(16,"M\xF4 t\u1EA3:"),s(),a(17,"textarea",11),p("ngModelChange",function(n){C(r);let o=v();return E(o.updatedEbook.title=n)}),s()()()(),a(18,"div",5)(19,"div",12)(20,"div",7)(21,"label",13),c(22,"V\u0103n b\u1EA3n:"),s(),a(23,"textarea",14),p("ngModelChange",function(n){C(r);let o=v();return E(o.updatedEbook.document=n)}),s()()()(),a(24,"label",13),c(25,"Danh m\u1EE5c:"),s(),w(26,$d,3,2,"div",15),a(27,"div",5)(28,"div",16)(29,"div",7)(30,"label",17),c(31,"\u0110i\u1EC3m ebook:"),s(),a(32,"input",18),p("ngModelChange",function(n){C(r);let o=v();return E(o.updatedEbook.evaluate=n)}),s()()(),a(33,"div",16)(34,"div",7)(35,"label",19),c(36,"Th\u1EC3 lo\u1EA1i kinh doanh:"),s(),a(37,"select",20),p("ngModelChange",function(n){C(r);let o=v();return E(o.updatedEbook.kindofbook=n)}),w(38,zd,2,2,"option",21),s()()(),a(39,"div",16)(40,"div",7)(41,"label",22),c(42,"Gi\xE1 ti\u1EC1n:"),s(),a(43,"input",23),p("ngModelChange",function(n){C(r);let o=v();return E(o.updatedEbook.price=n)}),s()()()(),a(44,"div",24)(45,"div",25),w(46,Wd,7,2,"div",26),s()(),a(47,"div",27)(48,"label",28),c(49,"\xC2m thanh:"),s(),a(50,"input",29),p("change",function(n){C(r);let o=v();return E(o.onMp3FileChange(n))}),s()(),a(51,"div",24)(52,"div",30),w(53,Jd,4,4,"div",31)(54,Qd,3,0,"ng-container",0),s()(),a(55,"div",27)(56,"label",32),c(57,"H\xECnh \u1EA3nh (t\u1ED1i \u0111a 5):"),s(),a(58,"input",33),p("change",function(n){C(r);let o=v();return E(o.onFileChange(n))}),s()(),a(59,"button",34),c(60,"L\u01B0u c\u1EADp nh\u1EADt"),s()()()()()()}if(i&2){let r=v();u(12),g("ngModel",r.updatedEbook.name),u(5),g("ngModel",r.updatedEbook.title),u(6),g("ngModel",r.updatedEbook.document),u(3),g("ngForOf",r.categories),u(6),g("ngModel",r.updatedEbook.evaluate),u(5),g("ngModel",r.updatedEbook.kindofbook),u(1),g("ngForOf",r.kindOfBookKeys),u(5),g("ngModel",r.updatedEbook.price),u(3),g("ngForOf",r.ebook.ebook_mp3s),u(7),g("ngForOf",r.ebook.ebook_images),u(1),g("ngIf",r.ebook.ebook_images.length===0)}}var la=(()=>{let e=class e{constructor(t,n,o,l,d){this.ebookService=t,this.route=n,this.router=o,this.categoryService=l,this.location=d,this.categories=[],this.currentImageIndex=0,this.images=[],this.newimage=[],this.mp3s=[],this.newimp3=[],this.selectedCategoryIds=[],this.kindOfBookKeys=Object.keys(Be),this.kindOfBookValues=Be,this.ebookId=0,this.ebook={},this.updatedEbook={}}ngOnInit(){this.route.paramMap.subscribe(t=>{this.ebookId=Number(t.get("id")),this.getEbookDetails()}),this.getCategories(1,100)}getCategories(t,n){this.categoryService.getCategories(t,n).subscribe({next:o=>{debugger;this.categories=o,this.preselectCategories()},complete:()=>{debugger},error:o=>{console.error("Error fetching categories:",o)}})}getEbookDetails(){this.ebookService.getDetailEbook(this.ebookId).subscribe({next:t=>{this.ebook=t,this.updatedEbook=$({},t),this.preselectCategories(),this.selectedCategoryIds=this.ebook.category_id||[],this.preselectCategories(),this.updatedEbook.ebook_images.forEach(n=>{n.image_url.startsWith(T.apiBaseUrl)||(n.image_url=`${T.apiBaseUrl}/ebooks/images/${n.image_url}`)}),this.updatedEbook.ebook_mp3s.forEach(n=>{n.mp3_url.startsWith(T.apiBaseUrl)||(n.mp3_url=`${T.apiBaseUrl}/ebooks/audios/${n.mp3_url}`)})},complete:()=>{},error:t=>{}})}isCategorySelected(t){return this.selectedCategoryIds.includes(t)}onCategoryChange(t,n){if(t.target.checked)this.selectedCategoryIds.push(n);else{let o=this.selectedCategoryIds.indexOf(n);o!==-1&&this.selectedCategoryIds.splice(o,1)}}preselectCategories(){this.categories.forEach(t=>{t.selected=this.selectedCategoryIds.includes(t.id)})}showImage(t){debugger;this.ebook&&this.ebook.ebook_images&&this.ebook.ebook_images.length>0&&(t<0?t=0:t>=this.ebook.ebook_images.length&&(t=this.ebook.ebook_images.length-1),this.currentImageIndex=t)}thumbnailClick(t){debugger;this.currentImageIndex=t}nextImage(){debugger;this.showImage(this.currentImageIndex+1)}previousImage(){debugger;this.showImage(this.currentImageIndex-1)}updateProduct(){if((this.updatedEbook.kindofbook===Be.FREE||this.updatedEbook.kindofbook===Be.MEMBERSHIP)&&(this.updatedEbook.price=0),this.updatedEbook.kindofbook===Be.FOR_SALE&&this.updatedEbook.price<=0){alert("Ebook b\xE1n gi\xE1 ti\u1EC1n ph\u1EA3i l\u1EDBn h\u01A1n 0");return}if(this.updatedEbook.name.length===0){alert("T\xEAn ebook kh\xF4ng \u0111\u1EC3 tr\u1ED1ng");return}if(this.updatedEbook.title.length===0){alert("Title ebook kh\xF4ng \u0111\u1EC3 tr\u1ED1ng");return}if(this.updatedEbook.document.length===0){alert("V\u0103n b\u1EA3n ebook kh\xF4ng \u0111\u1EC3 tr\u1ED1ng");return}let t={name:this.updatedEbook.name,price:this.updatedEbook.price,title:this.updatedEbook.title,kindofbook:this.updatedEbook.kindofbook,evaluate:this.updatedEbook.evaluate,audioUrl:this.updatedEbook.audioUrl,thumbnail:this.updatedEbook.thumbnail,document:this.updatedEbook.document,category_id:this.selectedCategoryIds};this.ebookService.updateEbook(this.ebook.id,t).subscribe({next:()=>{this.router.navigate(["/admin/ebooks"]),alert("C\u1EADp nh\u1EADt th\xE0nh c\xF4ng"),location.reload()},error:n=>{console.error("Error updating ebook:",n),n.status===400&&n.error.message.includes("Ebook b\xE1n gi\xE1 ti\u1EC1n ph\u1EA3i l\u1EDBn h\u01A1n 0")?alert(n.error.message):this.handleError(n)}})}onFileChange(t){let n=t.target.files;if(n.length>5){alert("Vui l\xF2ng ch\u1ECDn t\u1ED1i \u0111a 5 h\xECnh \u1EA3nh..");return}this.newimage=Array.from(n),this.newimage.length>0&&(this.updatedEbook.thumbnail=this.newimage[0].name),this.images=n,this.ebookService.uploadImages(this.ebookId,this.images).subscribe({next:o=>{this.images=[],this.getEbookDetails(),location.reload()},error:o=>{alert(o.error),console.error("Error uploading images:",o),this.handleError(o)}})}onMp3FileChange(t){let n=t.target.files;if(n.length>5){alert("Vui l\xF2ng ch\u1ECDn t\u1ED1i \u0111a 5 mp3.");return}this.newimp3=Array.from(n),this.mp3s=n,this.ebookService.uploadmp3s(this.ebookId,this.mp3s).subscribe({next:o=>{this.images=[],this.getEbookDetails(),location.reload()},error:o=>{alert(o.error),console.error("Error uploading images:",o),this.handleError(o),location.reload()}})}deleteImage(t){confirm("B\u1EA1n c\xF3 ch\u1EAFc ch\u1EAFn mu\u1ED1n x\xF3a h\xECnh \u1EA3nh n\xE0y kh\xF4ng?")&&this.ebookService.deleteEbookImage(t.id).subscribe({next:n=>{location.reload()},error:n=>{alert(n.error),console.error("L\u1ED7i khi x\xF3a h\xECnh \u1EA3nh:",n)}})}deleteMp3(t){confirm("B\u1EA1n c\xF3 ch\u1EAFc ch\u1EAFn mu\u1ED1n x\xF3a t\u1EC7p MP3 n\xE0y kh\xF4ng?")&&this.ebookService.deleteEbookMp3(t.id).subscribe({next:n=>{location.reload()},error:n=>{alert(n.error),console.error("L\u1ED7i x\xF3a mp3s:",n)}})}uploadAudio(t){this.audioFile&&(this.ebookService.uploadAudio(t,this.audioFile).subscribe({next:n=>{console.log("\u0110\xE3 t\u1EA3i \xE2m thanh th\xE0nh c\xF4ng:",n),location.reload()},error:n=>{console.error("L\u1ED7i khi t\u1EA3i \xE2m thanh l\xEAn:",n),alert(`L\u1ED7i khi t\u1EA3i \xE2m thanh l\xEAn: ${n.error?.message||n.message}`),location.reload()}}),location.reload())}trackByMp3Url(t,n){return n.mp3_url}handleError(t){switch(console.error("Error:",t),t.status){case 401:alert("B\u1EA1n kh\xF4ng c\xF3 quy\u1EC1n truy c\u1EADp v\xE0o t\xE0i nguy\xEAn n\xE0y ho\u1EB7c c\u1EA7n \u0111\u0103ng nh\u1EADp qu\u1EA3n tr\u1ECB vi\xEAn \u0111\u1EC3 th\u1EF1c hi\u1EC7n h\xE0nh \u0111\u1ED9ng n\xE0y.");break;case 403:alert("B\u1EA1n kh\xF4ng c\xF3 quy\u1EC1n c\u1EADp nh\u1EADt \u0111\u01A1n h\xE0ng n\xE0y. Ch\u1EC9 c\xF3 qu\u1EA3n tr\u1ECB vi\xEAn m\u1EDBi c\xF3 quy\u1EC1n th\u1EF1c hi\u1EC7n h\xE0nh \u0111\u1ED9ng n\xE0y.");break;case 404:alert("Kh\xF4ng t\xECm th\u1EA5y t\xE0i nguy\xEAn.");break}}formatPrice(t){return t===void 0?"N/A":t===0?"Mi\u1EC5n Ph\xED":t.toLocaleString("vi-VN")+" \u0111"}};e.\u0275fac=function(n){return new(n||e)(m(Ve),m(G),m(I),m(st),m(vt))},e.\u0275cmp=O({type:e,selectors:[["app-detail",8,"product","admin"]],standalone:!0,features:[k],attrs:Gd,decls:1,vars:1,consts:[[4,"ngIf"],[1,"container"],[1,"row"],[1,"col-md-8","offset-md-2"],[3,"ngSubmit"],[1,"form-row","mb-3"],[1,"col-md-6"],[1,"form-group"],["for","name"],["type","text","id","name","name","name","required","",1,"form-control",3,"ngModel","ngModelChange"],["for","title"],["id","title","name","title","required","",1,"form-control",3,"ngModel","ngModelChange"],[1,"col-md-12"],["for","document"],["id","document","name","document","required","",1,"form-control",3,"ngModel","ngModelChange"],[4,"ngFor","ngForOf"],[1,"col-md-4"],["for","evaluate"],["type","number","id","evaluate","name","evaluate","placeholder","0-10",1,"form-control",3,"ngModel","ngModelChange"],["for","kindofbook"],["id","kindofbook","name","kindofbook","required","",1,"form-control",3,"ngModel","ngModelChange"],[3,"value",4,"ngFor","ngForOf"],["for","price"],["type","text","id","price","name","price","required","",1,"form-control",3,"ngModel","ngModelChange"],[1,"row","mb-3"],[1,"mp3-container"],["class","mp3-item",4,"ngFor","ngForOf"],[1,"form-group","mb-3"],["for","mp3s"],["type","file","id","mp3s","name","mp3s","multiple","","accept","audio/*",1,"form-control",3,"change"],[1,"thumbnail-container"],["class","thumbnail-item",3,"ngClass","click",4,"ngFor","ngForOf"],["for","images"],["type","file","id","images","name","images","multiple","","accept","image/*",3,"change"],["type","submit",1,"btn","btn-primary"],["type","checkbox",3,"checked","change"],[3,"value"],[1,"mp3-item"],["controls","",3,"src"],["type","button",1,"btn","btn-sm","remove-mp3",3,"click"],[1,"fa","fa-times-circle","text-danger"],[1,"thumbnail-item",3,"ngClass","click"],["alt","Thumbnail Image",1,"thumbnail-image",3,"src"],["type","button",1,"btn","btn-sm","remove-image",3,"click"]],template:function(n,o){n&1&&w(0,Yd,61,11,"div",0),n&2&&g("ngIf",o.ebook)},dependencies:[F,de,ie,ue,H,Re,tt,nt,z,$n,$e,W,Ne,Ue,Z,Qe],styles:[".form-row[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;margin-bottom:1rem}.form-row[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]{flex:1;margin-right:1rem}.thumbnail-container[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;gap:10px;margin-top:20px;margin-bottom:20px}.thumbnail-item[_ngcontent-%COMP%]{position:relative;width:120px;height:120px;overflow:hidden;border:2px solid transparent;transition:border-color .3s}.thumbnail-item[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%;height:100%;object-fit:cover}.thumbnail-item.active[_ngcontent-%COMP%]{border-color:green}.remove-image[_ngcontent-%COMP%]{position:absolute;top:5px;right:5px;display:none}.thumbnail-item[_ngcontent-%COMP%]:hover   .remove-image[_ngcontent-%COMP%]{display:block}"]});let i=e;return i})();var Wi=class{constructor(e){this.images=[],this.mp3s=[],this.name=e.name,this.price=e.price,this.title=e.title,this.document=e.document,this.thumbnail=e.thumbnail,this.kindofbook=e.kindofbook,this.evaluate=e.evaluate,this.audio_url=e.audio_url,this.category_id=e.category_id}};var Kd=["class","product admin"];function Zd(i,e){i&1&&(a(0,"div"),c(1,"T\xEAn ebook kh\xF4ng \u0111\u01B0\u1EE3c b\u1ECF tr\u1ED1ng."),s())}function Xd(i,e){if(i&1&&(a(0,"div",32),w(1,Zd,2,0,"div",33),s()),i&2){v();let r=Ae(11);u(1),g("ngIf",r.errors==null?null:r.errors.required)}}function eu(i,e){i&1&&(a(0,"div"),c(1,"M\xF4 t\u1EA3 ebook kh\xF4ng \u0111\u01B0\u1EE3c b\u1ECF tr\u1ED1ng."),s())}function tu(i,e){if(i&1&&(a(0,"div",32),w(1,eu,2,0,"div",33),s()),i&2){v();let r=Ae(17);u(1),g("ngIf",r.errors==null?null:r.errors.required)}}function nu(i,e){i&1&&(a(0,"div"),c(1,"V\u0103n b\u1EA3n ebook kh\xF4ng \u0111\u01B0\u1EE3c b\u1ECF tr\u1ED1ng."),s())}function iu(i,e){if(i&1&&(a(0,"div",32),w(1,nu,2,0,"div",33),s()),i&2){v();let r=Ae(23);u(1),g("ngIf",r.errors==null?null:r.errors.required)}}function ou(i,e){if(i&1){let r=P();a(0,"div")(1,"label",34)(2,"input",35),p("change",function(){let o=C(r).$implicit,l=v();return E(l.onCategoryChange(o.id))}),s(),c(3),s()()}if(i&2){let r=e.$implicit,t=v();u(2),g("checked",t.insertEbookDTO.category_id.includes(r.id)),u(1),S(" ",r.name," ")}}function ru(i,e){if(i&1&&(a(0,"option",36),c(1),s()),i&2){let r=e.$implicit,t=v();g("value",r),u(1),y(t.kindOfBookValues[r])}}var ca=(()=>{let e=class e{constructor(t,n,o,l){this.route=t,this.router=n,this.categoryService=o,this.ebookService=l,this.insertEbookDTO=new Wi({name:"",price:0,title:"",document:"",thumbnail:"",kindofbook:"FREE",evaluate:4,audio_url:"",category_id:[],mp3s:[],images:[]}),this.categories=[],this.kindOfBookKeys=Object.keys(Be),this.kindOfBookValues=Be}ngOnInit(){this.getCategories(1,100)}getCategories(t,n){this.categoryService.getCategories(t,n).subscribe({next:o=>{this.categories=o},error:o=>{console.error("L\u1ED7i khi t\xECm danh m\u1EE5c:",o)}})}onFileChange(t){let n=t.target.files;if(n.length>5){alert("T\u1ED1i \u0111a ch\u1EC9 c\xF3 5 h\xECnh \u1EA3nh.");return}this.insertEbookDTO.images=Array.from(n),this.insertEbookDTO.images.length>0&&(this.insertEbookDTO.thumbnail=this.insertEbookDTO.images[0].name)}onMp3FileChange(t){let n=t.target.files;if(n.length>5){alert("T\u1ED1i \u0111a ch\u1EC9 c\xF3 5 file mp3s.");return}else this.insertEbookDTO.mp3s=Array.from(n)}onCategoryChange(t){let n=this.insertEbookDTO.category_id.indexOf(t);n===-1?this.insertEbookDTO.category_id.push(t):this.insertEbookDTO.category_id.splice(n,1)}insertProduct(){if(this.insertEbookDTO.kindofbook===Be.FREE||this.insertEbookDTO.kindofbook===Be.MEMBERSHIP){this.insertEbookDTO.price=0;return}else if(this.insertEbookDTO.kindofbook===Be.FOR_SALE&&this.insertEbookDTO.price<=0){alert("Ebook b\xE1n gi\xE1 ti\u1EC1n ph\u1EA3i l\u1EDBn h\u01A1n 0");return}this.insertEbookDTO.name.length===0&&alert("T\xEAn ebook kh\xF4ng \u0111\u1EC3 tr\u1ED1ng"),this.insertEbookDTO.title.length===0&&alert("Title ebook kh\xF4ng \u0111\u1EC3 tr\u1ED1ng"),this.insertEbookDTO.document.length===0?alert("V\u0103n b\u1EA3n ebook kh\xF4ng \u0111\u1EC3 tr\u1ED1ng"):this.ebookService.insertEbook(this.insertEbookDTO).subscribe({next:t=>{console.log("Insert response:",t);let n=t.id;this.insertEbookDTO.images.length>0&&this.uploadImages(n),this.insertEbookDTO.mp3s.length>0&&this.uploadMp3s(n),alert("Th\xEAm s\u1EA3n ph\u1EA9m th\xE0nh c\xF4ng"),this.router.navigate(["../"],{relativeTo:this.route})},error:t=>{this.handleError(t),console.error("Error inserting ebook:",t);let n=t.error?.message||t.message||"Unknown error";alert(`Error inserting ebook: ${n}`)}})}uploadImages(t){let n=new FormData;this.insertEbookDTO.images.forEach((o,l)=>{n.append("images",o,o.name)}),this.ebookService.uploadImages(t,this.insertEbookDTO.images).subscribe({next:o=>{},error:o=>{console.error("L\u1ED7i khi t\u1EA3i h\xECnh \u1EA3nh l\xEAn:",o),alert(`L\u1ED7i khi t\u1EA3i h\xECnh \u1EA3nh l\xEAn: ${o.error?.message||o.message}`)}})}uploadMp3s(t){let n=new FormData;this.insertEbookDTO.mp3s.forEach(o=>{n.append("audio",o,o.name)}),this.ebookService.uploadmp3s(t,this.insertEbookDTO.mp3s).subscribe({next:o=>{}})}handleError(t){switch(console.error("Error:",t),t.status){case 401:alert("B\u1EA1n kh\xF4ng c\xF3 quy\u1EC1n truy c\u1EADp v\xE0o t\xE0i nguy\xEAn n\xE0y ho\u1EB7c c\u1EA7n \u0111\u0103ng nh\u1EADp qu\u1EA3n tr\u1ECB vi\xEAn \u0111\u1EC3 th\u1EF1c hi\u1EC7n h\xE0nh \u0111\u1ED9ng n\xE0y.");break;case 403:alert("B\u1EA1n kh\xF4ng c\xF3 quy\u1EC1n c\u1EADp nh\u1EADt \u0111\u01A1n h\xE0ng n\xE0y. Ch\u1EC9 c\xF3 qu\u1EA3n tr\u1ECB vi\xEAn m\u1EDBi c\xF3 quy\u1EC1n th\u1EF1c hi\u1EC7n h\xE0nh \u0111\u1ED9ng n\xE0y.");break;case 409:alert("Danh m\u1EE5c \u0111\xE3 t\u1ED3n t\u1EA1i. Vui l\xF2ng ch\u1ECDn m\u1ED9t t\xEAn kh\xE1c.");break;case 404:alert("Kh\xF4ng t\xECm th\u1EA5y t\xE0i nguy\xEAn.");break}}};e.\u0275fac=function(n){return new(n||e)(m(G),m(I),m(st),m(Ve))},e.\u0275cmp=O({type:e,selectors:[["app-insert",8,"product","admin"]],standalone:!0,features:[k],attrs:Kd,decls:53,vars:11,consts:[[1,"container"],[1,"row"],[1,"col-md-6","offset-md-3"],["enctype","multipart/form-data",3,"ngSubmit"],[1,"form-row"],[1,"form-group","col-md-6","name-title-group"],["for","name"],["type","text","id","name","name","name","required","",1,"form-control",3,"ngModel","ngModelChange"],["name","ngModel"],["class","text-danger",4,"ngIf"],["for","title"],["id","title","name","title","required","",1,"form-control",3,"ngModel","ngModelChange"],["title","ngModel"],[1,"form-group","mb-3"],["for","document"],["id","document","name","document","required","",1,"form-control",3,"ngModel","ngModelChange"],["document","ngModel"],["for","categories"],[4,"ngFor","ngForOf"],[1,"form-group","col-md-4"],["for","evaluate"],["type","number","id","evaluate","name","evaluate",1,"form-control",3,"ngModel","ngModelChange"],["for","kindofbook"],["id","kindofbook","name","kindofbook","required","",1,"form-control",3,"ngModel","ngModelChange"],[3,"value",4,"ngFor","ngForOf"],["for","price"],["type","number","id","price","name","price",1,"form-control",3,"ngModel","ngModelChange"],["for","audios"],["type","file","id","audios","name","audios","multiple","","accept","audio/*",1,"form-control",3,"change"],["for","images"],["type","file","id","images","name","images","multiple","","accept","image/*",1,"form-control",3,"change"],["type","submit",1,"btn","btn-primary"],[1,"text-danger"],[4,"ngIf"],[1,"form-check-label"],["type","checkbox",3,"checked","change"],[3,"value"]],template:function(n,o){if(n&1&&(a(0,"div",0)(1,"div",1)(2,"div",2)(3,"h3"),c(4,"Insert Product"),s(),a(5,"form",3),p("ngSubmit",function(){return o.insertProduct()}),a(6,"div",4)(7,"div",5)(8,"label",6),c(9,"T\xEAn:"),s(),a(10,"input",7,8),p("ngModelChange",function(d){return o.insertEbookDTO.name=d}),s(),w(12,Xd,2,1,"div",9),s(),a(13,"div",5)(14,"label",10),c(15,"M\xF4 t\u1EA3:"),s(),a(16,"textarea",11,12),p("ngModelChange",function(d){return o.insertEbookDTO.title=d}),s(),w(18,tu,2,1,"div",9),s()(),a(19,"div",13)(20,"label",14),c(21,"V\u0103n b\u1EA3n:"),s(),a(22,"textarea",15,16),p("ngModelChange",function(d){return o.insertEbookDTO.document=d}),s(),w(24,iu,2,1,"div",9),s(),a(25,"div",13)(26,"label",17),c(27,"Danh m\u1EE5c:"),s(),w(28,ou,4,2,"div",18),s(),a(29,"div",4)(30,"div",19)(31,"label",20),c(32,"\u0110i\u1EC3m ebook:"),s(),a(33,"input",21),p("ngModelChange",function(d){return o.insertEbookDTO.evaluate=d}),s()(),a(34,"div",19)(35,"label",22),c(36,"Th\u1EC3 lo\u1EA1i kinh doanh:"),s(),a(37,"select",23),p("ngModelChange",function(d){return o.insertEbookDTO.kindofbook=d}),w(38,ru,2,2,"option",24),s()(),a(39,"div",19)(40,"label",25),c(41,"Gi\xE1 ti\u1EC1n:"),s(),a(42,"input",26),p("ngModelChange",function(d){return o.insertEbookDTO.price=d}),s()()(),a(43,"div",13)(44,"label",27),c(45,"\xC2m thanh:"),s(),a(46,"input",28),p("change",function(d){return o.onMp3FileChange(d)}),s()(),a(47,"div",13)(48,"label",29),c(49,"H\xECnh \u1EA3nh (t\u1ED1i \u0111a 5):"),s(),a(50,"input",30),p("change",function(d){return o.onFileChange(d)}),s()(),a(51,"button",31),c(52,"Insert"),s()()()()()),n&2){let l=Ae(11),d=Ae(17),h=Ae(23);u(10),g("ngModel",o.insertEbookDTO.name),u(2),g("ngIf",l.invalid&&(l.dirty||l.touched)),u(4),g("ngModel",o.insertEbookDTO.title),u(2),g("ngIf",d.invalid&&(d.dirty||d.touched)),u(4),g("ngModel",o.insertEbookDTO.document),u(2),g("ngIf",h.invalid&&(h.dirty||h.touched)),u(4),g("ngForOf",o.categories),u(5),g("ngModel",o.insertEbookDTO.evaluate),u(4),g("ngModel",o.insertEbookDTO.kindofbook),u(1),g("ngForOf",o.kindOfBookKeys),u(4),g("ngModel",o.insertEbookDTO.price)}},dependencies:[F,ie,ue,H,Re,tt,nt,z,$n,$e,W,Ne,Ue,Z,Qe],styles:["body[_ngcontent-%COMP%]{font-family:Arial,sans-serif;line-height:1.6}.container[_ngcontent-%COMP%]{max-width:1000px;margin:0 auto;padding:20px}.container[_ngcontent-%COMP%]   .row[_ngcontent-%COMP%]{display:flex;justify-content:center}.container[_ngcontent-%COMP%]   .row[_ngcontent-%COMP%]   .col-md-6[_ngcontent-%COMP%]{width:100%;padding:15px;box-sizing:border-box}.container[_ngcontent-%COMP%]   .row[_ngcontent-%COMP%]   .col-md-6[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{text-align:center;margin-bottom:20px;font-size:24px}.container[_ngcontent-%COMP%]   .row[_ngcontent-%COMP%]   .col-md-6[_ngcontent-%COMP%]   .form-row[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;justify-content:space-between}.container[_ngcontent-%COMP%]   .row[_ngcontent-%COMP%]   .col-md-6[_ngcontent-%COMP%]   .form-row[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]{flex:0 0 32%;margin-bottom:15px}.container[_ngcontent-%COMP%]   .row[_ngcontent-%COMP%]   .col-md-6[_ngcontent-%COMP%]   .form-row[_ngcontent-%COMP%]   .form-group.name-title-group[_ngcontent-%COMP%]{flex:0 0 50%;max-width:50%}.container[_ngcontent-%COMP%]   .row[_ngcontent-%COMP%]   .col-md-6[_ngcontent-%COMP%]   .form-row[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{display:block;margin-bottom:5px;font-weight:700}.container[_ngcontent-%COMP%]   .row[_ngcontent-%COMP%]   .col-md-6[_ngcontent-%COMP%]   .form-row[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   input[_ngcontent-%COMP%], .container[_ngcontent-%COMP%]   .row[_ngcontent-%COMP%]   .col-md-6[_ngcontent-%COMP%]   .form-row[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%], .container[_ngcontent-%COMP%]   .row[_ngcontent-%COMP%]   .col-md-6[_ngcontent-%COMP%]   .form-row[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]{width:100%;padding:10px;margin-bottom:5px;border:1px solid #ccc;border-radius:4px;box-sizing:border-box}.container[_ngcontent-%COMP%]   .row[_ngcontent-%COMP%]   .col-md-6[_ngcontent-%COMP%]   .form-row[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   .text-danger[_ngcontent-%COMP%]{color:#d9534f;font-size:.875rem}.container[_ngcontent-%COMP%]   .row[_ngcontent-%COMP%]   .col-md-6[_ngcontent-%COMP%]   .form-group.mb-3[_ngcontent-%COMP%]{margin-bottom:1rem}.container[_ngcontent-%COMP%]   .row[_ngcontent-%COMP%]   .col-md-6[_ngcontent-%COMP%]   .btn-primary[_ngcontent-%COMP%]{background-color:#007bff;border-color:#007bff;color:#fff;padding:10px 20px;border-radius:4px;cursor:pointer;transition:background-color .3s ease}.container[_ngcontent-%COMP%]   .row[_ngcontent-%COMP%]   .col-md-6[_ngcontent-%COMP%]   .btn-primary[_ngcontent-%COMP%]:hover{background-color:#0056b3}"]});let i=e;return i})();var su=["class","category admin"],da=(()=>{let e=class e{constructor(t,n,o,l){this.route=t,this.router=n,this.categoryService=o,this.ebookService=l,this.insertCategoryDTO={name:""},this.categories=[]}ngOnInit(){}insertCategory(){this.categoryService.insertCategory(this.insertCategoryDTO).subscribe({next:t=>{debugger;alert("Th\xEAm danh m\u1EE5c m\u1EDBi th\xE0nh c\xF4ng"),this.router.navigate(["/admin/categories"])},error:t=>{debugger;this.handleError(t)}})}handleError(t){switch(console.error("Error:",t),t.status){case 401:alert("B\u1EA1n kh\xF4ng c\xF3 quy\u1EC1n truy c\u1EADp v\xE0o t\xE0i nguy\xEAn n\xE0y ho\u1EB7c c\u1EA7n \u0111\u0103ng nh\u1EADp qu\u1EA3n tr\u1ECB vi\xEAn \u0111\u1EC3 th\u1EF1c hi\u1EC7n h\xE0nh \u0111\u1ED9ng n\xE0y.");break;case 403:alert("B\u1EA1n kh\xF4ng c\xF3 quy\u1EC1n c\u1EADp nh\u1EADt \u0111\u01A1n h\xE0ng n\xE0y. Ch\u1EC9 c\xF3 qu\u1EA3n tr\u1ECB vi\xEAn m\u1EDBi c\xF3 quy\u1EC1n th\u1EF1c hi\u1EC7n h\xE0nh \u0111\u1ED9ng n\xE0y.");break;case 409:alert("Danh m\u1EE5c \u0111\xE3 t\u1ED3n t\u1EA1i. Vui l\xF2ng ch\u1ECDn m\u1ED9t t\xEAn kh\xE1c.");break;case 404:alert("Kh\xF4ng t\xECm th\u1EA5y t\xE0i nguy\xEAn.");break}}};e.\u0275fac=function(n){return new(n||e)(m(G),m(I),m(st),m(Ve))},e.\u0275cmp=O({type:e,selectors:[["app-insert",8,"category","admin"]],standalone:!0,features:[k],attrs:su,decls:14,vars:1,consts:[[1,"container"],[1,"row"],[1,"col-md-6","offset-md-3"],[1,"row","mb-3"],[3,"ngSubmit"],[1,"form-group","mb-3"],["for","name"],["type","text","id","name","name","name","required","",1,"form-control",3,"ngModel","ngModelChange"],["type","submit",1,"btn","btn-primary"]],template:function(n,o){n&1&&(a(0,"div",0)(1,"div",1)(2,"div",2)(3,"h3"),c(4,"Th\xEAm danh m\u1EE5c"),s(),f(5,"br"),a(6,"div",3)(7,"form",4),p("ngSubmit",function(){return o.insertCategory()}),a(8,"div",5)(9,"label",6),c(10,"T\xEAn danh m\u1EE5c:"),s(),a(11,"input",7),p("ngModelChange",function(d){return o.insertCategoryDTO.name=d}),s()(),a(12,"button",8),c(13,"L\u01B0u danh m\u1EE5c"),s()()()()()()),n&2&&(u(11),g("ngModel",o.insertCategoryDTO.name))},dependencies:[F,H,Re,z,W,Ne,Ue,Z,Qe],styles:[".container[_ngcontent-%COMP%]{background-color:#fff;padding:20px;min-height:100vh;display:flex;flex-direction:column}"]});let i=e;return i})();var au=["class","category admin"];function lu(i,e){if(i&1){let r=P();a(0,"div")(1,"div",0)(2,"div",1)(3,"div",2)(4,"h3"),c(5,"C\u1EADp nh\u1EADt danh m\u1EE5c"),s(),a(6,"form",3),p("ngSubmit",function(){C(r);let n=v();return E(n.updateCategory())}),a(7,"div",4)(8,"label",5),c(9,"T\xEAn danh m\u1EE5c:"),s(),a(10,"input",6),p("ngModelChange",function(n){C(r);let o=v();return E(o.updatedCategory.name=n)}),s()(),a(11,"button",7),c(12,"L\u01B0u c\u1EADp nh\u1EADt"),s()()()()()()}if(i&2){let r=v();u(10),g("ngModel",r.updatedCategory.name)}}var ua=(()=>{let e=class e{constructor(t,n,o){this.categoryService=t,this.route=n,this.router=o,this.categoryId=0,this.updatedCategory={}}ngOnInit(){this.route.paramMap.subscribe(t=>{debugger;this.categoryId=Number(t.get("id")),this.getCategoryDetails()})}getCategoryDetails(){this.categoryService.getDetailCategory(this.categoryId).subscribe({next:t=>{this.updatedCategory=$({},t)},complete:()=>{},error:t=>{}})}updateCategory(){let t={name:this.updatedCategory.name};this.categoryService.updateCategory(this.updatedCategory.id,t).subscribe({next:n=>{debugger},complete:()=>{debugger;alert("C\u1EADp nh\u1EADt danh m\u1EE5c th\xE0nh c\xF4ng"),location.reload()},error:n=>{debugger;alert("C\u1EADp nh\u1EADt danh m\u1EE5c kh\xF4ng th\xE0nh c\xF4ng. Danh m\u1EE5c \u0111\xE3 t\u1ED3n t\u1EA1i"),this.handleError(n)}})}handleError(t){switch(console.error("Error:",t),t.status){case 401:break;case 403:alert("B\u1EA1n kh\xF4ng c\xF3 quy\u1EC1n c\u1EADp nh\u1EADt \u0111\u01A1n h\xE0ng n\xE0y. Ch\u1EC9 c\xF3 qu\u1EA3n tr\u1ECB vi\xEAn m\u1EDBi c\xF3 quy\u1EC1n th\u1EF1c hi\u1EC7n h\xE0nh \u0111\u1ED9ng n\xE0y.");break;case 409:alert("Danh m\u1EE5c \u0111\xE3 t\u1ED3n t\u1EA1i. Vui l\xF2ng ch\u1ECDn m\u1ED9t t\xEAn kh\xE1c.");break;case 404:alert("Kh\xF4ng t\xECm th\u1EA5y t\xE0i nguy\xEAn.");break}}};e.\u0275fac=function(n){return new(n||e)(m(st),m(G),m(I))},e.\u0275cmp=O({type:e,selectors:[["app-detail",8,"category","admin"]],standalone:!0,features:[k],attrs:au,decls:1,vars:1,consts:[[1,"container"],[1,"row"],[1,"col-md-6","offset-md-3"],[3,"ngSubmit"],[1,"form-group","mb-3"],["for","name"],["type","text","id","name","name","name","required","",1,"form-control",3,"ngModel","ngModelChange"],["type","submit",1,"btn","btn-primary"]],template:function(n,o){n&1&&w(0,lu,13,1,"div"),n&2&&ne(0,o.updatedCategory?0:-1)},dependencies:[F,H,Re,z,W,Ne,Ue,Z,Qe],styles:[".container[_ngcontent-%COMP%]{background-color:#fff;padding:20px;min-height:100vh;display:flex;flex-direction:column}"]});let i=e;return i})();function cu(i,e){if(i&1){let r=P();a(0,"tr",8)(1,"li"),c(2),s(),a(3,"td"),c(4),s(),a(5,"td"),c(6),s(),a(7,"td"),c(8),s(),a(9,"td"),c(10),s(),a(11,"td"),c(12),dt(13,"date"),s(),a(14,"td"),c(15),s(),a(16,"td"),c(17," \xA0\xA0\xA0\xA0\xA0\xA0 "),a(18,"button",9),p("click",function(){let o=C(r).$implicit,l=v();return E(l.toggleUserStatus(o))}),c(19),s()()()}if(i&2){let r=e.$implicit;u(2),S(" ",r.id,""),u(2),y(r.fullname),u(2),y(r.role.name),u(2),y(r.phone_number),u(2),y(r.address),u(2),y(_t(13,8,r.date_of_birth,"dd/MM/yyyy")),u(3),y(r.is_active?"Ho\u1EA1t \u0111\u1ED9ng":"T\u1EA1m kh\xF3a"),u(4),S(" ",r.is_active?"Kh\xF3a":"M\u1EDF kh\xF3a"," ")}}var ha=(()=>{let e=class e{constructor(t,n,o,l,d,h,_,b){this.http=t,this.httpUtilService=n,this.userService=o,this.tokenService=l,this.router=d,this.route=h,this.location=_,this.document=b,this.users=[],this.selectedUser=null,this.currentPage=0,this.itemsPerPage=10,this.totalPages=0,this.keyword="",this.tokensv="",this.userRole="",this.localStorage=b.defaultView?.localStorage}ngOnInit(){this.currentPage=Number(this.localStorage?.getItem("currentUserAdminPage"))||0,this.getUsers(this.keyword,this.currentPage,this.itemsPerPage)}searchUsers(){this.currentPage=0,this.itemsPerPage=10,this.getUsers(this.keyword.trim(),this.currentPage,this.itemsPerPage)}getUsers(t,n,o){this.userService.getUsers(t,n,o).subscribe({next:l=>{this.users=l.users,this.totalPages=l.totalPages},error:l=>{l.status===401?alert("B\u1EA1n c\u1EA7n \u0111\u0103ng nh\u1EADp \u0111\u1EC3 truy c\u1EADp v\xE0o t\xE0i nguy\xEAn n\xE0y."):console.error("Error fetching users:",l)}})}onPageChange(t){this.currentPage=t<0?0:t,this.localStorage?.setItem("currentUserAdminPage",String(this.currentPage)),this.getUsers(this.keyword,this.currentPage,this.itemsPerPage)}navigateToAddUser(){this.router.navigate(["/admin/users/add"])}navigateToEditUser(t){this.router.navigate(["/admin/users/update",t])}checkRole(){return new Promise((t,n)=>{this.tokensv=this.tokenService.getToken(),this.userService.getUserDetail(this.tokensv).subscribe({next:o=>{this.userRole=o?.role?.name||"",t()},error:o=>{console.error("Error fetching user details:",o),n(o)}})})}toggleUserStatus(t){if(t.role.name==="admin"){alert("\u0110\xE2y l\xE0 t\xE0i kho\u1EA3n admin. B\u1EA1n kh\xF4ng th\u1EC3 thay \u0111\u1ED5i tr\u1EA1ng th\xE1i c\u1EE7a t\xE0i kho\u1EA3n n\xE0y.");return}if(window.confirm(`B\u1EA1n c\xF3 ch\u1EAFc ch\u1EAFn mu\u1ED1n ${t.is_active?"kh\xF3a":"m\u1EDF kh\xF3a"} ng\u01B0\u1EDDi d\xF9ng ${t.fullname}?`)){let o=!t.is_active;this.userService.blockOrEnableUser(t.id,o).subscribe({next:()=>{alert(`User ${t.fullname} \u0111\xE3 \u0111\u01B0\u1EE3c ${o?"m\u1EDF kh\xF3a":"kh\xF3a"} th\xE0nh c\xF4ng`),o||this.tokenService.removeToken(),this.getUsers(this.keyword,this.currentPage,this.itemsPerPage)}}),location.reload()}}};e.\u0275fac=function(n){return new(n||e)(m(Fe),m(Hi),m(re),m(q),m(I),m(G),m(vt),m(K))},e.\u0275cmp=O({type:e,selectors:[["app-user-admin"]],standalone:!0,features:[k],decls:38,vars:6,consts:[[1,"container"],[1,"search-bar","mb-3"],["type","text","placeholder","Search by keyword",1,"form-control",3,"ngModel","ngModelChange"],[1,"btn","btn-primary",3,"click"],[1,"table","table-bordered"],["class","item-user",4,"ngFor","ngForOf"],[1,"pagination"],[1,"btn","btn-secondary",3,"disabled","click"],[1,"item-user"],[1,"btn","btn-danger","btn-sm",3,"click"]],template:function(n,o){n&1&&(a(0,"div",0)(1,"h2"),c(2,"User Management"),s(),a(3,"div",1)(4,"input",2),p("ngModelChange",function(d){return o.keyword=d}),s(),f(5,"br"),a(6,"button",3),p("click",function(){return o.searchUsers()}),c(7,"Search"),s()(),a(8,"table",4)(9,"thead")(10,"tr")(11,"th"),c(12,"ID"),s(),a(13,"th"),c(14,"T\xEAn"),s(),a(15,"th"),c(16,"Quy\u1EC1n"),s(),a(17,"th"),c(18,"S\u1ED1 \u0111i\u1EC7n tho\u1EA1i"),s(),a(19,"th"),c(20,"\u0110\u1ECBa ch\u1EC9"),s(),a(21,"th"),c(22,"Ng\xE0y sinh nh\u1EADt"),s(),a(23,"th"),c(24,"Tr\u1EA1ng th\xE1i"),s(),a(25,"th"),c(26,"T\xF9y ch\u1ECDn"),s()()(),a(27,"tbody"),w(28,cu,20,11,"tr",5),s()(),a(29,"div",6)(30,"button",7),p("click",function(){return o.onPageChange(o.currentPage-1)}),c(31,"Previous"),s(),c(32,"\xA0 "),a(33,"span"),c(34),s(),c(35,"\xA0 "),a(36,"button",7),p("click",function(){return o.onPageChange(o.currentPage+1)}),c(37,"Next"),s()()()),n&2&&(u(4),g("ngModel",o.keyword),u(24),g("ngForOf",o.users),u(2),g("disabled",o.currentPage===0),u(4),lr("Page ",o.currentPage+1," of ",o.totalPages,""),u(2),g("disabled",o.currentPage>=o.totalPages-1))},dependencies:[F,ie,Ee,H,z,W,Z],styles:['@charset "UTF-8";li[_ngcontent-%COMP%]::marker{content:"\\1f464";white-space:nowrap}.pagination[_ngcontent-%COMP%]{justify-content:center}.btn-danger[_ngcontent-%COMP%]{width:70px}.container[_ngcontent-%COMP%]{background-color:#fff;padding:20px;min-height:100vh;display:flex;flex-direction:column}.item-user[_ngcontent-%COMP%]:hover{border:2px solid rgb(255,111,0)}']});let i=e;return i})();var pa=(()=>{let e=class e{constructor(t){this.http=t,this.apiBaseUrl=T.apiBaseUrl}getAllComments(){return this.http.get(`${this.apiBaseUrl}/comments/all`)}deleteComment(t){debugger;return this.http.delete(`${this.apiBaseUrl}/comments/${t}`,{responseType:"text"})}};e.\u0275fac=function(n){return new(n||e)(B(Fe))},e.\u0275prov=R({token:e,factory:e.\u0275fac,providedIn:"root"});let i=e;return i})();function uu(i,e){i&1&&(a(0,"div",3),c(1,"Loading comments..."),s())}function hu(i,e){if(i&1){let r=P();a(0,"tr")(1,"td"),c(2),s(),a(3,"td"),c(4),s(),a(5,"td"),c(6),s(),a(7,"td"),c(8),s(),a(9,"td"),c(10),s(),a(11,"td")(12,"button",5),p("click",function(){let o=C(r).$implicit,l=v(2);return E(l.deleteComment(o.id))}),c(13,"Delete"),s()()()}if(i&2){let r=e.$implicit;u(2),y(r.id),u(2),y(r.user_id.phone_number),u(2),y(r.content),u(2),y(r.ebook_id.id),u(2),y(r.ebook_id.name)}}function pu(i,e){if(i&1&&(a(0,"table")(1,"thead")(2,"tr")(3,"th"),c(4,"ID"),s(),a(5,"th"),c(6,"User ID"),s(),a(7,"th"),c(8,"Content"),s(),a(9,"th"),c(10,"Ebook ID"),s(),a(11,"th"),c(12,"Ebook Name"),s(),a(13,"th"),c(14,"Actions"),s()()(),a(15,"tbody"),w(16,hu,14,5,"tr",4),s()()),i&2){let r=v();u(16),g("ngForOf",r.comments)}}var ma=(()=>{let e=class e{constructor(t,n,o){this.commentService=t,this.userService=n,this.document=o,this.comments=[],this.isLoading=!1,this.users=[],this.currentPage=0,this.itemsPerPage=10,this.totalPages=0,this.keyword="",this.localStorage=o.defaultView?.localStorage}ngOnInit(){this.currentPage=Number(this.localStorage?.getItem("currentUserAdminPage"))||0,this.checkAccessAndLoadComments()}checkAccessAndLoadComments(){this.userService.getUsers(this.keyword,this.currentPage,this.itemsPerPage).subscribe({next:t=>{this.users=t.users,this.totalPages=t.totalPages,this.loadComments()},error:t=>{this.handleError(t,"getUsers")}})}handleError(t,n){switch(console.error(`Error in ${n}:`,t),t.status){case 401:alert("B\u1EA1n c\u1EA7n \u0111\u0103ng nh\u1EADp \u0111\u1EC3 truy c\u1EADp v\xE0o t\xE0i nguy\xEAn n\xE0y.");break;case 404:alert("Kh\xF4ng t\xECm th\u1EA5y t\xE0i nguy\xEAn.");break;case 500:alert("\u0110\xE3 x\u1EA3y ra l\u1ED7i m\xE1y ch\u1EE7. Vui l\xF2ng th\u1EED l\u1EA1i sau.");break;default:alert("\u0110\xE3 x\u1EA3y ra l\u1ED7i. Vui l\xF2ng th\u1EED l\u1EA1i.");break}}loadComments(){this.isLoading=!0,this.commentService.getAllComments().subscribe({next:t=>{this.comments=t,this.isLoading=!1},error:t=>{console.error("Error loading comments",t),this.isLoading=!1}})}deleteComment(t){confirm("Are you sure you want to delete this comment?")&&this.commentService.deleteComment(t).subscribe({next:n=>{this.comments=this.comments.filter(o=>o.id!==t),alert("X\xF3a comment th\xE0nh c\xF4ng"),location.reload()},error:n=>{console.error("Error deleting comment",n),n.status===401?alert("B\u1EA1n kh\xF4ng c\xF3 quy\u1EC1n x\xF3a comment n\xE0y"):n.status===404?alert("Comment kh\xF4ng t\u1ED3n t\u1EA1i"):n.status===500?alert("\u0110\xE3 x\u1EA3y ra l\u1ED7i m\xE1y ch\u1EE7. Vui l\xF2ng th\u1EED l\u1EA1i sau."):alert("\u0110\xE3 x\u1EA3y ra l\u1ED7i. Vui l\xF2ng th\u1EED l\u1EA1i.")}})}};e.\u0275fac=function(n){return new(n||e)(m(pa),m(re),m(K))},e.\u0275cmp=O({type:e,selectors:[["app-comment"]],standalone:!0,features:[k],decls:5,vars:2,consts:[[1,"container-fluid"],["class","loading-message",4,"ngIf"],[4,"ngIf"],[1,"loading-message"],[4,"ngFor","ngForOf"],[3,"click"]],template:function(n,o){n&1&&(a(0,"div",0)(1,"h1"),c(2,"Manage Comments"),s(),w(3,uu,2,0,"div",1)(4,pu,17,1,"table",2),s()),n&2&&(u(3),g("ngIf",o.isLoading),u(1),g("ngIf",!o.isLoading))},dependencies:[F,ie,ue],styles:["html[_ngcontent-%COMP%], body[_ngcontent-%COMP%]{height:100%;margin:0}.container-fluid[_ngcontent-%COMP%]{background-color:#fff;padding:20px;min-height:100vh;display:flex;flex-direction:column}.comment-admin[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{margin-bottom:20px}.loading-message[_ngcontent-%COMP%]{font-size:18px;color:#666}table[_ngcontent-%COMP%]{width:100%;border-collapse:collapse}th[_ngcontent-%COMP%], td[_ngcontent-%COMP%]{border:1px solid #ddd;padding:8px;text-align:left}th[_ngcontent-%COMP%]{background-color:#f2f2f2}tr[_ngcontent-%COMP%]:nth-child(2n){background-color:#f9f9f9}tr[_ngcontent-%COMP%]:hover{background-color:#ddd}button[_ngcontent-%COMP%]{background-color:#f44336;color:#fff;border:none;padding:5px 10px;cursor:pointer;border-radius:4px;font-size:14px}button[_ngcontent-%COMP%]:hover{background-color:#d32f2f}"]});let i=e;return i})();var ga=[{path:"admin",component:$i,children:[{path:"orders",component:oa,canActivate:[Xn],data:{roles:["admin"]}},{path:"products",component:sa,canActivate:[Xn],data:{roles:["admin"]}},{path:"categories",component:aa,canActivate:[Xn],data:{roles:["admin"]}},{path:"users",component:ha},{path:"comments",component:ma},{path:"orders/:id",component:ra},{path:"products/update/:id",component:la},{path:"products/insert",component:ca},{path:"categories/update/:id",component:ua},{path:"categories/insert",component:da}]}];var mu={provide:ur,useClass:ia,multi:!0},fa={providers:[vr(na),Zi(et.forChild(ga)),hr(pr()),mu,fr(),Zi(mr)]};var gu={providers:[_r()]},_a=cr(fa,gu);var fu=()=>gr(br,_a),kv=fu;export{kv as a};
